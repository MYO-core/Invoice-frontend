"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[900],{5900:(e,l,i)=>{i.r(l),i.d(l,{default:()=>E});var t=i(5043),s=i(1802),d=i(6059),n=i(9800),a=i(1645),o=i(2217),c=i(4435),r=i(9524),u=i(4406),m=i(289),v=i(8193),h=i(5397),x=i(6558),p=i(5256),j=i(4733),y=i(1402),A=i(6191),f=i(1966),g=i(3906),C=i.n(g),b=i(726),w=i.n(b),I=i(7975),N=i(2170);var k=i(579);const{Option:S}=u.A,O=e=>{let{setisAddCms:l,getAllData:i,setIsEditCms:d,isEditCms:c}=e;const[r,g]=(0,t.useState)([]),[b,O]=(0,t.useState)(""),[D,F]=(0,t.useState)(!1),[U,E]=(0,t.useState)(),[T,z]=(0,t.useState)(!1),[_,B]=(0,t.useState)(!1),[H,L]=(0,t.useState)(null);console.log("content1Output",H);const[R,V]=(0,t.useState)(null),[q]=m.A.useForm();return(0,t.useEffect)((()=>{null!==c&&void 0!==c&&c.cmsId&&(z(!0),(async e=>{let{id:l}=e;return await N.p.get("/cms/".concat(l))})({id:null===c||void 0===c?void 0:c.cmsId}).then((e=>{var l,i,t;q.setFieldsValue(null===e||void 0===e?void 0:e.data),L(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.content1),V(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.content2);const s=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.images.map(((e,l)=>({id:l,name:e,prodUrl:"https://api.hotelvarunagrand.com/uploads/".concat(e)})));g(s),z(!1)})).catch((e=>{console.log("err",e),z(!1)})))}),[null===c||void 0===c?void 0:c.cmsId]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(h.A,{spinning:T,children:(0,k.jsx)("div",{children:(0,k.jsxs)(m.A,{name:"cms",form:q,layout:"vertical",onFinish:e=>{const t={title:null===e||void 0===e?void 0:e.title,type:null===e||void 0===e?void 0:e.type,images:r&&r.map((e=>null===e||void 0===e?void 0:e.name)),content1:H,content2:R};var s;null!==c&&void 0!==c&&c.cmsId?(async e=>{let{id:l,body:i}=e;return await N.p.put("/cms/".concat(l),i)})({id:null===c||void 0===c?void 0:c.cmsId,body:t}).then((e=>{d({isOpen:!1,cmsId:""}),i(),v.Ay.success("Data updated successfully")})).catch((e=>console.log("err",e))):null===(s=(async e=>{let{body:l}=e;return await N.p.post("/cms",l)})({body:t}))||void 0===s||s.then((e=>{l(!1),i(),v.Ay.success("Data added successfully")})).catch((e=>{console.log("err :>> ",e)}))},autoComplete:"off",children:[(0,k.jsxs)(n.A,{gutter:[16,0],children:[(0,k.jsx)(a.A,{xs:24,md:12,children:(0,k.jsx)(m.A.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Required! "}],children:(0,k.jsx)(x.A,{})})}),(0,k.jsx)(a.A,{xs:24,md:12,children:(0,k.jsx)(m.A.Item,{name:"type",label:"Type",children:(0,k.jsxs)(u.A,{placeholder:"Select option...",allowClear:!0,children:[(0,k.jsx)(S,{value:"Header-Banner",children:"Header-Banner"}),(0,k.jsx)(S,{value:"Footer",children:"Footer"}),(0,k.jsx)(S,{value:"Contact-Us",children:"Contact-Us"}),(0,k.jsx)(S,{value:"About-Us",children:"About-Us"})]})})}),(0,k.jsx)(a.A,{xs:24,md:12,children:(0,k.jsxs)(m.A.Item,{label:"Image",name:"image",children:[(0,k.jsx)(p.A,{onChange:e=>{B(!0);const l=new FormData;l.append("file",e.file.originFileObj),(0,I.V)(l).then((l=>{g((i=>{var t;return[...i,{id:e.file.uid,file:e.file.originFileObj,name:null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.name}]})),B(!1)})).catch((e=>{v.Ay.error("Error while uploading"),B(!1)}))},fileList:[],children:(0,k.jsx)(s.A,{className:"flex items-center",icon:(0,k.jsx)(j.A,{}),children:"Click to Upload"})}),(0,k.jsx)("div",{className:"w-full",style:{maxHeight:"230px",overflowY:"auto"},children:(null===r||void 0===r?void 0:r.length)>0&&(null===r||void 0===r?void 0:r.map((e=>{var l;return(0,k.jsxs)("div",{className:"flex border rounded-md justify-between items-center p-1 px-3 my-1",children:[(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("span",{className:"mr-2",children:(0,k.jsx)(y.A,{})}),null!==e&&void 0!==e&&e.file?null===e||void 0===e||null===(l=e.file)||void 0===l?void 0:l.name:null===e||void 0===e?void 0:e.name]}),(0,k.jsxs)("div",{className:"flex gap-3 text-base",children:[(0,k.jsx)("div",{className:"cursor-pointer",children:(0,k.jsx)("div",{onClick:()=>{(async e=>{var l;const i=e;O(null!==i&&void 0!==i&&i.prodUrl?null===i||void 0===i?void 0:i.prodUrl:URL.createObjectURL(null===i||void 0===i?void 0:i.file)),F(!0),E(null!==i&&void 0!==i&&i.file?null===i||void 0===i||null===(l=i.file)||void 0===l?void 0:l.name:null===i||void 0===i?void 0:i.name)})(e)},children:(0,k.jsx)(A.A,{})})}),(0,k.jsx)("div",{className:"cursor-pointer",children:(0,k.jsx)("div",{onClick:()=>{const l=null===r||void 0===r?void 0:r.filter((l=>{var i;return null!==l&&void 0!==l&&l.file?(null===l||void 0===l||null===(i=l.file)||void 0===i?void 0:i.uid)!==(null===e||void 0===e?void 0:e.id):(null===l||void 0===l?void 0:l.id)!==(null===e||void 0===e?void 0:e.id)}));g(l)},children:(0,k.jsx)(f.A,{style:{color:"red"}})})})]})]},null===e||void 0===e?void 0:e.id)})))})]})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{children:"Content 1:"}),(0,k.jsx)(C(),{data:H,editor:w(),onChange:(e,l)=>{L(l.getData())}})]}),(0,k.jsxs)("div",{className:"mt-4",children:[(0,k.jsx)("label",{children:"Content 2:"}),(0,k.jsx)(C(),{data:R,editor:w(),onChange:(e,l)=>{V(l.getData())}})]}),(0,k.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,k.jsx)(s.A,{onClick:()=>{l(!1),d({isOpen:!1,cmsId:""})},children:"Cancel"}),(0,k.jsx)(s.A,{type:"primary",htmlType:"submit",loading:_,children:"Submit"})]})]})})}),(0,k.jsx)(o.A,{width:410,title:U,open:D,footer:null,onCancel:()=>{F(!1),O("")},destroyOnClose:!0,children:(0,k.jsx)("img",{src:b||"",alt:b,style:{width:"400px"}})})]})};var D=i(925),F=i(1734),U=i(7043);const E=()=>{const[e,l]=(0,t.useState)(!1),[i,u]=(0,t.useState)({isOpen:!1,cmsId:""}),[m,v]=(0,t.useState)([]),h=[{title:"Type",dataIndex:"type",key:"type",width:140},{title:"Title",dataIndex:"title",key:"title",width:150},{title:"Action",key:"action",render:(e,l)=>(0,k.jsxs)(c.A,{size:"middle",children:[(0,k.jsx)(s.A,{size:"middle",onClick:()=>u({isOpen:!0,cmsId:null===l||void 0===l?void 0:l._id}),children:"Edit"}),(0,k.jsx)(d.A,{title:"Are you sure to delete this task?",onConfirm:()=>{(async e=>{let{id:l}=e;return await N.p.delete("/cms/".concat(l))})({id:null===l||void 0===l?void 0:l._id}).then((e=>{console.log("res",e),message.success("Deleted Successfully"),x()})).catch((e=>console.log("err",e)))},okText:"Yes",cancelText:"No",children:(0,k.jsx)(s.A,{danger:!0,size:"middle",children:"Delete"})})]}),width:150}],x=()=>{(async e=>{let{start:l,limit:i}=e;return await N.p.get("/cms?start=".concat(l,"&limit=").concat(i))})({}).then((e=>{var l;e&&v(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.data)})).catch((e=>console.log("err",e)))};return(0,t.useEffect)((()=>{x()}),[]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(F.z,{title:"Cms",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/cms",breadcrumbName:"Cms"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,k.jsx)(D.rQ,{className:"p-3",children:(0,k.jsx)(n.A,{gutter:16,children:(0,k.jsx)(a.A,{sm:24,xs:24,lg:24,className:"",children:(0,k.jsx)(U.C,{moreBtn:(0,k.jsx)(s.A,{type:"primary",onClick:()=>l(!0),children:"Add"}),border:!1,size:"default",children:(0,k.jsx)(r.A,{scroll:{x:"100%",y:"auto"},columns:h,dataSource:m})})})})}),(0,k.jsx)(o.A,{title:"".concat(e?"Add":"Edit"),destroyOnClose:!0,open:e||i.isOpen,width:1024,footer:!1,onCancel:()=>{l(!1),u({isOpen:!1,cmsId:""})},children:(0,k.jsx)(O,{setisAddCms:l,getAllData:x,isEditCms:i,setIsEditCms:u})})]})}},7975:(e,l,i)=>{i.d(l,{V:()=>s});var t=i(2170);const s=async e=>await t.p.post("/upload",e)}}]);
//# sourceMappingURL=900.9452e2f9.chunk.js.map