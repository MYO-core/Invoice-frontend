"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[745],{745:(e,l,s)=>{s.r(l),s.d(l,{default:()=>q});var i=s(5043),t=s(1802),n=s(6059),d=s(9800),a=s(1645),r=s(2217),c=s(4435),o=s(9524),u=s(4406),m=s(289),v=s(8193),x=s(5397),h=s(6558),p=s(5256),j=s(4733),A=s(1402),y=s(6191),f=s(1966),g=s(3906),b=s.n(g),w=s(726),C=s.n(w),I=s(7975),k=s(2170);var N=s(579);const{Option:S}=u.A,D=e=>{let{setisAddCms:l,getAllData:s,setIsEditCms:n,isEditCms:c}=e;const[o,u]=(0,i.useState)([]),[g,w]=(0,i.useState)(""),[S,D]=(0,i.useState)(!1),[O,E]=(0,i.useState)(),[z,q]=(0,i.useState)(!1),[L,F]=(0,i.useState)(!1),[_,P]=(0,i.useState)(null);console.log("content1Output",_);const[R,T]=(0,i.useState)(null),[V]=m.A.useForm();return(0,i.useEffect)((()=>{null!==c&&void 0!==c&&c.cmsId&&(q(!0),(async e=>{let{id:l}=e;return await k.p.get("/products/".concat(l))})({id:null===c||void 0===c?void 0:c.cmsId}).then((e=>{var l,s,i;V.setFieldsValue(null===e||void 0===e?void 0:e.data),T(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.description);const t=null===e||void 0===e||null===(s=e.data)||void 0===s||null===(i=s.media)||void 0===i?void 0:i.filesData;u(t),q(!1)})).catch((e=>{console.log("err",e),q(!1)})))}),[null===c||void 0===c?void 0:c.cmsId]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x.A,{spinning:z,children:(0,N.jsx)("div",{children:(0,N.jsxs)(m.A,{name:"cms",form:V,layout:"vertical",onFinish:e=>{const i={name:null===e||void 0===e?void 0:e.name,inventory:null===e||void 0===e?void 0:e.inventory,media:{filesData:o},description:R};var t;null!==c&&void 0!==c&&c.cmsId?(async e=>{let{id:l,body:s}=e;return await k.p.patch("/products/".concat(l),s)})({id:null===c||void 0===c?void 0:c.cmsId,body:i}).then((e=>{n({isOpen:!1,cmsId:""}),s(),v.Ay.success("Data updated successfully")})).catch((e=>console.log("err",e))):null===(t=(async e=>{let{body:l}=e;return await k.p.post("/products",l)})({body:i}))||void 0===t||t.then((e=>{l(!1),s(),v.Ay.success("Data added successfully")})).catch((e=>{console.log("err :>> ",e)}))},autoComplete:"off",children:[(0,N.jsxs)(d.A,{gutter:[16,0],children:[(0,N.jsx)(a.A,{xs:24,md:12,children:(0,N.jsx)(m.A.Item,{label:"name",name:"name",rules:[{required:!0,message:"Required! "}],children:(0,N.jsx)(h.A,{})})}),(0,N.jsx)(a.A,{span:12,children:(0,N.jsx)(m.A.Item,{label:"Inventory",name:"inventory",rules:[{required:!0,message:"inventory is required!"}],children:(0,N.jsx)(h.A,{})})})]}),(0,N.jsxs)(d.A,{gutter:[16,0],children:[(0,N.jsx)(a.A,{xs:24,md:12,children:(0,N.jsx)(m.A.Item,{label:"Actual Price",name:"actual_price",rules:[{required:!0,message:"Required! "}],children:(0,N.jsx)(h.A,{})})}),(0,N.jsx)(a.A,{span:12,children:(0,N.jsx)(m.A.Item,{label:"Retail Price",name:"retail_price",rules:[{required:!0,message:"inventory is required!"}],children:(0,N.jsx)(h.A,{})})})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{children:"Description"}),(0,N.jsx)(b(),{data:R,editor:C(),onChange:(e,l)=>{T(l.getData())}})]}),(0,N.jsx)(d.A,{children:(0,N.jsx)(a.A,{xs:24,md:12,children:(0,N.jsxs)(m.A.Item,{label:"Image",name:"image",children:[(0,N.jsx)(p.A,{onChange:e=>{F(!0);const l=new FormData;l.append("file",e.file.originFileObj),(0,I.V)(l).then((e=>{u((l=>{var s;return[...l,{link:null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.link}]})),F(!1)})).catch((e=>{v.Ay.error("Error while uploading"),F(!1)}))},fileList:[],children:(0,N.jsx)(t.A,{className:"flex items-center",icon:(0,N.jsx)(j.A,{}),children:"Click to Upload"})}),(0,N.jsx)("div",{className:"w-full",style:{maxHeight:"230px",overflowY:"auto"},children:(null===o||void 0===o?void 0:o.length)>0&&(null===o||void 0===o?void 0:o.map((e=>(0,N.jsxs)("div",{className:"flex border rounded-md justify-between items-center p-1 px-3 my-1",children:[(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("span",{className:"mr-2",children:(0,N.jsx)(A.A,{})}),"Product Image"]}),(0,N.jsxs)("div",{className:"flex gap-3 text-base",children:[(0,N.jsx)("div",{className:"cursor-pointer",children:(0,N.jsx)("div",{onClick:()=>{(async e=>{var l;const s=e;w(null===s||void 0===s?void 0:s.link),D(!0),E(null!==s&&void 0!==s&&s.file?null===s||void 0===s||null===(l=s.file)||void 0===l?void 0:l.name:null===s||void 0===s?void 0:s.name)})(e)},children:(0,N.jsx)(y.A,{})})}),(0,N.jsx)("div",{className:"cursor-pointer",children:(0,N.jsx)("div",{onClick:()=>{const l=null===o||void 0===o?void 0:o.filter((l=>{var s;return null!==l&&void 0!==l&&l.file?(null===l||void 0===l||null===(s=l.file)||void 0===s?void 0:s.uid)!==(null===e||void 0===e?void 0:e.id):(null===l||void 0===l?void 0:l.id)!==(null===e||void 0===e?void 0:e.id)}));u(l)},children:(0,N.jsx)(f.A,{style:{color:"red"}})})})]})]},null===e||void 0===e?void 0:e.id))))})]})})}),(0,N.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,N.jsx)(t.A,{onClick:()=>{l(!1),n({isOpen:!1,cmsId:""})},children:"Cancel"}),(0,N.jsx)(t.A,{type:"primary",htmlType:"submit",loading:L,children:"Submit"})]})]})})}),(0,N.jsx)(r.A,{width:410,title:O,open:S,footer:null,onCancel:()=>{D(!1),w("")},destroyOnClose:!0,children:(0,N.jsx)("img",{src:g||"",alt:g,style:{width:"400px"}})})]})};var O=s(925),E=s(1734),z=s(7043);const q=()=>{const[e,l]=(0,i.useState)(!1),[s,u]=(0,i.useState)(0),[m,v]=(0,i.useState)({isOpen:!1,cmsId:""}),[x,h]=(0,i.useState)([]),p=[{title:"#Id",dataIndex:"id",key:"id",width:140},{title:"Name",dataIndex:"name",key:"name",width:140},{title:"Inventory",dataIndex:"inventory",key:"inventroy",width:150},{title:"Action",key:"action",render:(e,l)=>(0,N.jsxs)(c.A,{size:"middle",children:[(0,N.jsx)(t.A,{size:"middle",onClick:()=>v({isOpen:!0,cmsId:null===l||void 0===l?void 0:l.id}),children:"Edit"}),(0,N.jsx)(n.A,{title:"Are you sure to delete this task?",onConfirm:()=>{(async e=>{let{id:l}=e;return await k.p.delete("/products/".concat(l))})({id:null===l||void 0===l?void 0:l._id}).then((e=>{console.log("res",e),message.success("Deleted Successfully"),j()})).catch((e=>console.log("err",e)))},okText:"Yes",cancelText:"No",children:(0,N.jsx)(t.A,{danger:!0,size:"middle",children:"Delete"})})]}),width:150}],j=()=>{(async e=>{let{start:l,limit:s}=e;return await k.p.get("/products?start=".concat(l,"&limit=").concat(s))})({start:s,limit:10}).then((e=>{var l;e&&h(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.rows)})).catch((e=>console.log("err",e)))};return(0,i.useEffect)((()=>{j()}),[]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.z,{title:"Cms",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/products",breadcrumbName:"Products"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,N.jsx)(O.rQ,{className:"p-3",children:(0,N.jsx)(d.A,{gutter:16,children:(0,N.jsx)(a.A,{sm:24,xs:24,lg:24,className:"",children:(0,N.jsx)(z.C,{moreBtn:(0,N.jsx)(t.A,{type:"primary",onClick:()=>l(!0),children:"Add"}),border:!1,size:"default",children:(0,N.jsx)(o.A,{size:"small",scroll:{x:"100%",y:"auto"},columns:p,dataSource:x})})})})}),(0,N.jsx)(r.A,{title:"".concat(e?"Add":"Edit"),destroyOnClose:!0,open:e||m.isOpen,width:1024,footer:!1,onCancel:()=>{l(!1),v({isOpen:!1,cmsId:""})},children:(0,N.jsx)(D,{setisAddCms:l,getAllData:j,isEditCms:m,setIsEditCms:v})})]})}},7975:(e,l,s)=>{s.d(l,{V:()=>t});var i=s(2170);const t=async e=>await i.p.post("/upload",e)},1402:(e,l,s)=>{s.d(l,{A:()=>r});var i=s(9379),t=s(5043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};var d=s(2172),a=function(e,l){return t.createElement(d.A,(0,i.A)((0,i.A)({},e),{},{ref:l,icon:n}))};a.displayName="LinkOutlined";const r=t.forwardRef(a)}}]);
//# sourceMappingURL=745.9e4fa99c.chunk.js.map