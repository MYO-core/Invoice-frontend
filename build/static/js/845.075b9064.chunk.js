"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[845],{42113:(e,t,s)=>{s.d(t,{A:()=>l});s(65043);const l=s.p+"static/media/home.f87e389a5c1850fe48b55156d6a0d7b7.svg"},91734:(e,t,s)=>{s.d(t,{z:()=>h});var l,a,r=s(97775),i=s(35475),n=s(31105),c=s(57528),d=s(67947),o=s(94574);const m=(0,o.Ay)(d.A)(l||(l=(0,c.A)(["\n  .ant-breadcrumb {\n    ol{\n      @media (max-width: 575px) {\n        justify-content: center;\n      }\n    }\n    li{\n        display:flex;\n        align-items:center;\n    }\n  }\n"]))),x=o.Ay.div(a||(a=(0,c.A)(["\n  \n"])));var u=s(70579);function h(e){const{title:t,subTitle:l,routes:a,buttons:c,ghost:d,bgColor:o,className:h}=e,p=a?(0,u.jsx)(r.A,{className:"flex order-2 relative top-1.5",separator:(0,u.jsx)("span",{className:"inline-flex bg-light-extra relative -top-0.5 w-1 h-1 rounded-full"}),children:a.map(((e,t)=>t+1===a.length?(0,u.jsx)(r.A.Item,{className:"text-breadcrumbs dark:text-white30 text-15",children:e.breadcrumbName},t):(0,u.jsxs)(r.A.Item,{className:"inline-flex items-start",children:[(0,u.jsx)(n.k,{className:"relative top-0.5 ltr:mr-2 rtl:ml-2 [&>div>svg]:text-[#8c90a4] dark:[&>div>svg]:text-white60 ",src:s(42113).A})," ",(0,u.jsx)(i.N_,{to:e.path,className:"text-light hover:text-primary dark:text-[#a4a5aa] dark:hover:text-white87 text-sm",children:e.breadcrumbName})]},t)))}):"";return(0,u.jsx)(x,{bgColor:o,children:(0,u.jsx)(m,{className:"".concat(h),title:t,subTitle:l,breadcrumb:p,extra:c,ghost:d})})}},78845:(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var l=s(65043),a=s(33307),r=s(50525),i=s(89421),n=s(28440),c=s(47419),d=s(11645),o=s(94406),m=s(33946),x=s(37122),u=s(64435),h=s(10444),p=s(86178),g=s.n(p),j=s(48646),A=s(78240),y=s(50289),b=s(48193),v=s(5397),f=s(3428),w=s(88655),S=s(53815),I=s(47807),_=s(2543),k=s(89680),C=s(70579);const{Option:N}=o.A,z=e=>{let{setisAddCms:t,getAllData:s,setIsEditCms:r,isEditCms:n,currentStore:m}=e;const[x,u]=(0,l.useState)(!1),[h,p]=(0,l.useState)([]),[g,j]=(0,l.useState)(""),[A,z]=(0,l.useState)(!1),[F,P]=(0,l.useState)([]),[T,O]=(0,l.useState)({orderNumber:"",tableNumber:"",items:[],subtotal:0,tax:0,total:0}),[D]=y.A.useForm();(0,l.useEffect)((()=>{null!==n&&void 0!==n&&n.cmsId&&(u(!0),(0,S.W8)({id:null===n||void 0===n?void 0:n.cmsId}).then((e=>{D.setFieldsValue(null===e||void 0===e?void 0:e.data);let t=null===e||void 0===e?void 0:e.data,s={orderNumber:t.id,tableNumber:t.table_number,items:t.order_items,subtotal:t.total_price||0,tax:t.tax_precent||0,total:t.total_price||0,organisation:t.Organisation};O(s),u(!1)})).catch((e=>{console.log("err",e),u(!1)})))}),[null===n||void 0===n?void 0:n.cmsId]),(0,l.useEffect)((()=>{(0,I.hV)({search:g}).then((e=>{p(e.data.rows)})).catch((e=>{b.Ay.error("Error While Fetching Items")}))}),[g]),(0,l.useEffect)((()=>{(0,_.xH)({}).then((e=>{P(e.data.rows)})).catch((e=>{b.Ay.error("Error While Fetching Items")}))}),[]);const q=()=>{var e;let t=D.getFieldsValue(["order_items"]),s=0;null===t||void 0===t||null===(e=t.order_items)||void 0===e||e.map((e=>{let t=Number(null===e||void 0===e?void 0:e.price)*Number(null===e||void 0===e?void 0:e.quantity);s+=t}));let l=D.getFieldValue("tax_precent"),a=D.getFieldValue("discount_precent");s+=.01*l*s,s-=.01*a*s,D.setFieldValue("total_price",s)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(v.A,{spinning:x,children:(0,C.jsx)("div",{children:(0,C.jsxs)(y.A,{name:"order",form:D,layout:"vertical",onFinish:e=>{const l=e;var a;null!==n&&void 0!==n&&n.cmsId?(0,S.FM)({id:null===n||void 0===n?void 0:n.cmsId,body:l}).then((e=>{r({isOpen:!1,cmsId:""}),s(),b.Ay.success("Data updated successfully")})).catch((e=>console.log("err",e))):(l.store_id=m,null===(a=(0,S.zF)({body:l}))||void 0===a||a.then((e=>{t(!1),s(),b.Ay.success("Data added successfully")})).catch((e=>{console.log("err :>> ",e)})))},onChange:q,autoComplete:"off",children:[(0,C.jsxs)(c.A,{gutter:16,children:[(0,C.jsx)(d.A,{span:12,children:(0,C.jsx)(y.A.Item,{label:"Table number",name:"table_id",rules:[{required:!0,message:"Please select the table ID"}],children:(0,C.jsx)(o.A,{children:F.map((e=>(0,C.jsxs)(N,{value:e.id,children:[e.table_number," - "," ("+e.no_of_seats+" Seater )"]})))})})}),(0,C.jsx)(d.A,{span:12,children:(0,C.jsx)(y.A.Item,{label:"Customer Name",name:"customer_name",children:(0,C.jsx)(a.A,{})})})]}),(0,C.jsxs)(c.A,{gutter:16,children:[(0,C.jsx)(d.A,{xs:12,sm:12,md:12,lg:8,children:(0,C.jsx)(y.A.Item,{label:"Total Price",name:"total_price",rules:[{required:!0,message:"Please enter the total price"}],children:(0,C.jsx)(f.A,{min:0,precision:2,style:{width:"100%"}})})}),(0,C.jsx)(d.A,{xs:12,sm:12,md:12,lg:8,children:(0,C.jsx)(y.A.Item,{label:"Discount Percent",name:"discount_precent",initialValue:0,children:(0,C.jsx)(f.A,{min:0,max:100,precision:2,style:{width:"100%"}})})}),(0,C.jsx)(d.A,{xs:12,sm:12,md:12,lg:8,children:(0,C.jsx)(y.A.Item,{label:"Tax Percent",name:"tax_precent",initialValue:0,children:(0,C.jsx)(f.A,{min:0,max:100,precision:2,style:{width:"100%"}})})})]}),(0,C.jsx)(c.A,{gutter:16,children:(0,C.jsx)(d.A,{xs:12,sm:12,md:12,lg:8,children:(0,C.jsx)(y.A.Item,{label:"Order Status",name:"status",initialValue:"pending",children:(0,C.jsxs)(o.A,{children:[(0,C.jsx)(N,{value:"pending",children:"Pending"}),(0,C.jsx)(N,{value:"preparing",children:"Preparing"}),(0,C.jsx)(N,{value:"served",children:"Served"}),(0,C.jsx)(N,{value:"paid",children:"Paid"}),(0,C.jsx)(N,{value:"canceled",children:"Canceled"})]})})})}),(0,C.jsx)(y.A.List,{name:"order_items",children:(e,t)=>{let{add:s,remove:l}=t;return(0,C.jsxs)(C.Fragment,{children:[e.map((e=>{let{key:t,name:s,fieldKey:r,...i}=e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("hr",{style:{margin:"20px 0",borderColor:"#e8e8e8"}}),(0,C.jsxs)(c.A,{gutter:16,align:"middle",children:[(0,C.jsx)(d.A,{xs:12,sm:12,md:12,lg:6,children:(0,C.jsx)(y.A.Item,{...i,name:[s,"item_id"],fieldKey:[r,"item_id"],label:"Item Code",rules:[{required:!0,message:"Please select the item ID"}],children:(0,C.jsx)(o.A,{showSearch:!0,onSearch:e=>{j(e)},onChange:e=>{const t=h.find((t=>t.id===e));D.setFieldsValue({order_items:{[s]:{item_name:null===t||void 0===t?void 0:t.name,price:null===t||void 0===t?void 0:t.price,quantity:1}}}),q()},children:h.map((e=>(0,C.jsxs)(N,{value:e.id,children:[e.item_code," - ",e.name]},e.id)))})})}),(0,C.jsx)(d.A,{xs:12,sm:12,md:12,lg:6,children:(0,C.jsx)(y.A.Item,{...i,name:[s,"item_name"],fieldKey:[r,"item_name"],label:"Item Name",rules:[{required:!0,message:"Please enter the item name"}],children:(0,C.jsx)(a.A,{})})}),(0,C.jsx)(d.A,{xs:8,sm:12,md:12,lg:4,children:(0,C.jsx)(y.A.Item,{...i,name:[s,"quantity"],fieldKey:[r,"quantity"],label:"Quantity",rules:[{required:!0,message:"Please enter the quantity"}],children:(0,C.jsx)(f.A,{min:0,defaultValue:1,style:{width:"100%"}})})}),(0,C.jsx)(d.A,{xs:12,sm:12,md:12,lg:6,children:(0,C.jsx)(y.A.Item,{...i,name:[s,"price"],fieldKey:[r,"price"],label:"Unit Price",rules:[{required:!0,message:"Please enter the price"}],children:(0,C.jsx)(f.A,{min:0,precision:2,style:{width:"100%"}})})}),(0,C.jsx)(d.A,{span:2,children:(0,C.jsx)(w.A,{onClick:()=>{l(s),q()},style:{fontSize:"20px",color:"red"}})})]},t)]})})),(0,C.jsx)(y.A.Item,{children:(0,C.jsx)(i.A,{type:"dashed",onClick:()=>s(),block:!0,children:"Add Item"})})]})}}),(0,C.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,C.jsx)(i.A,{onClick:()=>{t(!1)},children:"Cancel"}),(0,C.jsx)(i.A,{onClick:()=>{z(!A)},children:"View Bill"}),(0,C.jsx)(i.A,{type:"primary",htmlType:"submit",loading:x,children:"Submit"})]})]})})}),(0,C.jsx)("div",{className:"mt-4",children:A&&(0,C.jsx)(k.A,{orderDetails:T})})]})};var F=s(40925),P=s(91734),T=s(57043),O=s(70495);const{Search:D}=a.A,{RangePicker:q}=r.A,V=()=>{const[e,t]=(0,l.useState)(!1),[s,a]=(0,l.useState)(0),[r,p]=(0,l.useState)(""),[y,b]=(0,l.useState)({isOpen:!1,cmsId:""}),[v,f]=(0,l.useState)([]),[w,I]=(0,l.useState)(0),[_,k]=(0,l.useState)(""),[N,D]=(0,l.useState)([]),[V,E]=(0,x.fp)(O.qt),B=[{title:"#Id",dataIndex:"id",key:"id",width:140},{title:"Total Price",dataIndex:"total_price",key:"total_price",width:140},{title:"Status",dataIndex:"status",key:"status",width:140},{title:"Date",dataIndex:"createdAt",render:(e,t)=>g()(t.createdAt).format("DD-MM-YYYY (HH:mm)"),width:140},{title:"Table",dataIndex:"table_id",key:"table_id",width:150},{title:"Action",key:"action",render:(e,t)=>(0,C.jsxs)(u.A,{size:"middle",children:[(0,C.jsx)(i.A,{size:"small",onClick:()=>b({isOpen:!0,cmsId:null===t||void 0===t?void 0:t.id}),children:(0,C.jsx)(j.A,{})}),(0,C.jsx)(n.A,{title:"Are you sure to delete this task?",onConfirm:()=>{(0,S.FN)({id:null===t||void 0===t?void 0:t._id}).then((e=>{console.log("res",e),message.success("Deleted Successfully"),H()})).catch((e=>console.log("err",e)))},okText:"Yes",cancelText:"No",children:(0,C.jsx)(i.A,{danger:!0,size:"small",children:(0,C.jsx)(A.A,{})})})]}),width:150}],H=()=>{(0,S.hV)({start:s,limit:10,search:r,status:_,dates:N,currentStore:V}).then((e=>{var t,s;e&&(f(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows),I(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.count))})).catch((e=>console.log("err",e)))};(0,l.useEffect)((()=>{H()}),[s,r,_,N,V]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(P.z,{title:"Orders",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/products",breadcrumbName:"Products"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,C.jsx)(F.rQ,{className:"p-3",children:(0,C.jsx)(c.A,{gutter:16,children:(0,C.jsx)(d.A,{sm:24,xs:24,lg:24,className:"",children:(0,C.jsx)(T.C,{title:(0,C.jsx)("div",{children:(0,C.jsxs)(c.A,{gutter:[16,16],align:"middle",children:[(0,C.jsx)(d.A,{xs:24,sm:12,md:8,lg:6,children:(0,C.jsxs)(o.A,{style:{width:"100%"},size:"middle",placeholder:"Status",onChange:e=>{k(e)},children:[(0,C.jsx)(Option,{value:"",children:"All"}),(0,C.jsx)(Option,{value:"pending",children:"Pending"}),(0,C.jsx)(Option,{value:"preparing",children:"Preparing"}),(0,C.jsx)(Option,{value:"served",children:"Served"}),(0,C.jsx)(Option,{value:"paid",children:"Paid"}),(0,C.jsx)(Option,{value:"canceled",children:"Canceled"})]})}),(0,C.jsx)(d.A,{xs:24,sm:12,md:8,lg:6,children:(0,C.jsx)(q,{size:"middle",onChange:(e,t)=>{D(t)},style:{width:"100%"}})})]})}),moreBtn:(0,C.jsx)(i.A,{type:"primary",onClick:()=>t(!0),children:"Add"}),children:(0,C.jsx)(h.A,{size:"small",scroll:{x:"100%",y:"auto"},columns:B,dataSource:v,pagination:{pageSize:10,total:w,showSizeChanger:!1},onChange:e=>{const{current:t}=e;a(10*(t-1))}})})})})}),(0,C.jsx)(m.A,{title:"".concat(e?"Add Order":"Edit Order"),destroyOnClose:!0,open:e||y.isOpen,width:1024,footer:!1,onCancel:()=>{t(!1),b({isOpen:!1,cmsId:""})},children:(0,C.jsx)(z,{setisAddCms:t,getAllData:H,isEditCms:y,setIsEditCms:b,currentStore:V})})]})}},89680:(e,t,s)=>{s.d(t,{A:()=>y});var l=s(65043),a=s(37122),r=s(77047),i=s(48193),n=s(39998),c=s(10444),d=s(89421),o=s(45904),m=s(65239),x=s.n(m),u=s(18233),h=s.n(u),p=s(70495),g=s(70579);const{Title:j,Text:A}=r.A,y=e=>{var t;let{orderDetails:s}=e;(0,l.useRef)(null);const r=(0,l.useRef)(null),[m,u]=(0,a.fp)(p.Zr),y=(new Date).toLocaleString(),[b,v]=(0,l.useState)(.01*Number(s.tax)*Number(s.total)),[f,w]=(0,l.useState)(0);(0,l.useEffect)((()=>{let e=0;s.items.forEach((t=>{e+=t.price*t.quantity})),w(e)}),[]);return(0,g.jsxs)("div",{children:[(0,g.jsxs)("div",{ref:r,style:{padding:"10px",width:"80mm",backgroundColor:"#fff",margin:"auto",fontFamily:"Arial, sans-serif",border:"1px solid #000",marginTop:"40px"},children:[(0,g.jsx)("style",{children:"\n                    .custom-row {\n                        color: #000 !important; \n                    }\n                    .custom-row td {\n                        color: #000 !important; \n                    }\n                "}),(0,g.jsx)(j,{level:5,style:{marginBottom:"5px"},children:m.name}),(0,g.jsx)(A,{style:{textAlign:"center",display:"block",fontSize:"14px",color:"#000"},children:m.address}),(0,g.jsxs)(A,{style:{textAlign:"center",display:"block",fontSize:"14px",color:"#000"},children:["Phone: ",m.phoneNumber]}),(0,g.jsxs)(A,{style:{textAlign:"center",display:"block",fontSize:"14px",marginBottom:"10px",color:"#000"},children:["GSTIN: ",null===s||void 0===s||null===(t=s.organisation)||void 0===t?void 0:t.gst]}),(0,g.jsx)(n.A,{style:{borderColor:"#000",margin:"0"}}),(0,g.jsxs)(A,{style:{textAlign:"left",fontSize:"14px",color:"#000",marginBottom:"10px"},children:["Name: ",s.customer_name]}),(0,g.jsx)(n.A,{style:{borderColor:"#000",margin:"0",color:"#000"}}),(0,g.jsx)("br",{}),(0,g.jsxs)(A,{style:{textAlign:"left",display:"block",fontSize:"14px",color:"#000"},children:["Date: ",y]}),(0,g.jsxs)(A,{style:{fontSize:"14px",color:"#000"},children:["Bill No: ",s.orderNumber]}),(0,g.jsx)("br",{}),(0,g.jsxs)(A,{style:{fontSize:"14px",color:"#000"},children:["Table: ",s.tableNumber]}),(0,g.jsx)(n.A,{style:{borderColor:"#000"}}),(0,g.jsx)(c.A,{dataSource:s.items,columns:[{title:"Item",dataIndex:"item_name",key:"item_name"},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center"},{title:"Price",dataIndex:"price",key:"price",align:"center",render:e=>"".concat(e.toFixed(2))},{title:"Amount",key:"total",align:"center",render:e=>"".concat((e.quantity*e.price).toFixed(2))}],pagination:!1,rowClassName:"custom-row td",size:"small",style:{marginBottom:"10px"}}),(0,g.jsxs)(A,{style:{textAlign:"right",display:"block",fontSize:"14px",color:"#000"},children:["Sub Total ",f]}),(0,g.jsxs)(A,{style:{textAlign:"right",display:"block",fontSize:"14px",color:"#000",marginBottom:"10px"},children:["gst ",s.tax,"% ",b.toFixed(2)]}),(0,g.jsx)(n.A,{style:{borderColor:"#000",margin:"0"}}),(0,g.jsx)(A,{style:{textAlign:"right",display:"block",fontSize:"10px",color:"#000"},children:"round off: 0.01"}),(0,g.jsx)(A,{style:{textAlign:"right",display:"block",fontSize:"16px",color:"#000",marginBottom:"10px"},children:(0,g.jsxs)("strong",{children:["Grand Total \u20b9 ",s.total]})}),(0,g.jsx)(n.A,{style:{borderColor:"#000",margin:"0"}}),(0,g.jsx)("br",{}),(0,g.jsx)(A,{style:{textAlign:"center",display:"block",fontSize:"14px",marginTop:"10px",color:"#000"},children:"Thank You Visit Again..."})]}),(0,g.jsx)(d.A,{style:{marginTop:"20px"},onClick:()=>{try{const e=r.current;x()(e).then((e=>{const t=e.toDataURL("image/png"),s=new o.Ay("p","mm",[80,e.height*(80/e.width)]);s.addImage(t,"PNG",0,0,80,e.height*(80/e.width));const l=s.output("blob"),a=URL.createObjectURL(l);h()({printable:a,type:"pdf",documentTitle:"Order Bill"})}))}catch(e){i.Ay.warning("Error While Printing Bill")}},children:"Download Bill"})]})}},53815:(e,t,s)=>{s.d(t,{FM:()=>n,FN:()=>c,W8:()=>i,hV:()=>r,zF:()=>a});var l=s(32170);const a=async e=>{let{body:t}=e;return await l.p.post("/orders",t)},r=async e=>{let{start:t,limit:s,status:a,search:r,dates:i,currentStore:n}=e,c=r?"&search=".concat(r):"",d=a?"&status=".concat(a):"",o=n?"&store_id=".concat(n):"",m="";2===i.length&&(m="&start_date=".concat(i[0],"&end_date=").concat(i[1]));return await l.p.get("/orders?start=".concat(t,"&limit=").concat(s).concat(c).concat(d).concat(m).concat(o))},i=async e=>{let{id:t}=e;return await l.p.get("/orders/".concat(t))},n=async e=>{let{id:t,body:s}=e;return await l.p.patch("/orders/".concat(t),s)},c=async e=>{let{id:t}=e;return await l.p.delete("/orders/".concat(t))}},47807:(e,t,s)=>{s.d(t,{FM:()=>n,FN:()=>c,W8:()=>i,hV:()=>r,zF:()=>a});var l=s(32170);const a=async e=>{let{body:t}=e;return await l.p.post("/restroItems",t)},r=async e=>{let{start:t=0,limit:s=10,search:a}=e,r=a?"&search=".concat(a):"";return await l.p.get("/restroItems?start=".concat(t,"&limit=").concat(s).concat(r))},i=async e=>{let{id:t}=e;return await l.p.get("/restroItems/".concat(t))},n=async e=>{let{id:t,body:s}=e;return await l.p.patch("/restroItems/".concat(t),s)},c=async e=>{let{id:t}=e;return await l.p.delete("/restroItems/".concat(t))}},2543:(e,t,s)=>{s.d(t,{FM:()=>n,W8:()=>i,xH:()=>r,zF:()=>a});var l=s(32170);const a=async e=>{let{body:t}=e;return await l.p.post("/tables",t)},r=async e=>{let{start:t=0,limit:s=10,search:a,type:r,isAvailable:i,store_id:n}=e,c=a?"&search=".concat(a):"",d=r?"&status=".concat(r):"",o=n?"&store_id=".concat(n):"",m=i?"&isAvailable=".concat(i):"";return await l.p.get("/tables?start=".concat(t,"&limit=").concat(s).concat(c).concat(d).concat(m).concat(o))},i=async e=>{let{id:t}=e;return await l.p.get("/tables/".concat(t))},n=async e=>{let{id:t,body:s}=e;return await l.p.patch("/tables/".concat(t),s)}},78240:(e,t,s)=>{s.d(t,{A:()=>c});var l=s(89379),a=s(65043);const r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-200 0H360v-72h304v72z"}}]},name:"delete",theme:"filled"};var i=s(22172),n=function(e,t){return a.createElement(i.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:r}))};n.displayName="DeleteFilled";const c=a.forwardRef(n)}}]);
//# sourceMappingURL=845.075b9064.chunk.js.map