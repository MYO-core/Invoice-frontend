"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[670],{36670:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var n=s(65043),l=s(46558),r=s(48193),a=s(64435),i=s(89421),o=s(28440),c=s(47419),d=s(11645),u=s(94406),m=s(19524),h=s(82217),p=s(50289),x=s(5397),v=s(76252),A=s(86178),f=s.n(A),j=s(32170);var y=s(46157),g=s(70579);const{Option:b}=u.A,C=e=>{let{setIsAddUsers:t,isEditUsers:s,setIsEditUsers:a,getAllUsers:o}=e;const[m,h]=(0,n.useState)(!1),[A,C]=(0,n.useState)([]),[w,I]=(0,n.useState)({}),[N]=p.A.useForm();(0,n.useEffect)((()=>{E()}),[]),(0,n.useEffect)((()=>{null!==s&&void 0!==s&&s.userId&&(h(!0),(async e=>{let{id:t}=e;return await j.p.get("/users/".concat(t))})({id:null===s||void 0===s?void 0:s.userId}).then((e=>{const t=e.data;t.dob=f()(t.dob),C([{_id:t.roomId,roomNumber:t.roomNumber}]),N.setFieldsValue(t),h(!1)})).catch((e=>{console.log("err",e),h(!1)})))}),[null===s||void 0===s?void 0:s.userId]);const E=async e=>{h(!0),(0,y.L_)({}).then((e=>{var t;const s=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;C(s),h(!1)})).catch((e=>{r.Ay.error("Error fetching room suggestions"),h(!1)}))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.A,{spinning:m}),(0,g.jsx)("div",{children:(0,g.jsxs)(p.A,{form:N,name:"User",labelCol:{span:8},wrapperCol:{span:16},onFinish:e=>{const n=e;var l;(h(!0),null!==s&&void 0!==s&&s.userId)?(async e=>{let{id:t,body:s}=e;return await j.p.patch("/users/".concat(t),s)})({id:null===s||void 0===s?void 0:s.userId,body:n}).then((e=>{a({isOpen:!1,userId:""}),o(),r.Ay.success("User updated successfully")})).catch((e=>{r.Ay.error("Something Went Wrong")})):null===(l=(async e=>{let{body:t}=e;return await j.p.post("/users",t)})({body:n}))||void 0===l||l.then((e=>{r.Ay.success("User added successfully"),t(!1),o({start:0,limit:10}),h(!1)})).catch((e=>{r.Ay.error("Something Went Wrong"),console.log("err :>> ",e),h(!1)}))},autoComplete:"off",children:[(0,g.jsxs)(c.A,{gutter:16,children:[" ",(0,g.jsxs)(d.A,{span:12,children:[" ",(0,g.jsx)(p.A.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Required! "}],children:(0,g.jsx)(l.A,{})})]}),(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Required! "}],children:(0,g.jsx)(l.A,{})})})]}),(0,g.jsxs)(c.A,{gutter:16,children:[(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Father's Name",name:"fatherName",children:(0,g.jsx)(l.A,{})})}),(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Mother's Name",name:"motherName",children:(0,g.jsx)(l.A,{})})})]}),(0,g.jsxs)(c.A,{gutter:16,children:[(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Date Of Birth",name:"dob",children:(0,g.jsx)(v.A,{})})}),(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Role",name:"role_id",children:(0,g.jsx)(u.A,{showSearch:!0,placeholder:"Select role",loading:m,filterOption:!1,optionLabelProp:"children",children:A.map((e=>(0,g.jsx)(b,{value:e.id,children:e.name},e.id)))})})})]}),(0,g.jsxs)(c.A,{gutter:16,children:[(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(p.A.Item,{name:"gender",label:"Gender",children:(0,g.jsxs)(u.A,{placeholder:"Select option...",allowClear:!0,children:[(0,g.jsx)(b,{value:"male",children:"Male"}),(0,g.jsx)(b,{value:"female",children:"Female"}),(0,g.jsx)(b,{value:"other",children:"Others"})]})})}),(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(p.A.Item,{name:"address",label:"Address",children:(0,g.jsx)(l.A,{})})})]}),!(null!==s&&void 0!==s&&s.userId)&&(0,g.jsx)(c.A,{gutter:16,children:(0,g.jsx)(d.A,{span:12,children:(0,g.jsx)(p.A.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Required! "}],children:(0,g.jsx)(l.A,{})})})}),(0,g.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,g.jsx)(i.A,{onClick:()=>{t(!1),a({isOpen:!1,userId:""})},children:"Cancel"}),(0,g.jsx)(i.A,{type:"primary",htmlType:"submit",children:"Submit"})]})]})})]})};var w=s(40925),I=s(91734),N=s(57043);const{Search:E}=l.A,O=()=>{const[e,t]=(0,n.useState)([]),[s,l]=(0,n.useState)([]),[p,x]=(0,n.useState)(!1),[v,A]=(0,n.useState)({}),[f,b]=(0,n.useState)(""),[O,k]=(0,n.useState)("");(0,n.useEffect)((()=>{(0,y.L_)({}).then((e=>{var t;const s=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data;let n=[{value:"",label:"All"}];s.map((e=>{n.push({value:e.id,label:e.name})})),l(n)})).catch((e=>{r.Ay.error("Error fetching room suggestions")}))}),[]);const S=()=>{(async e=>{let{start:t,limit:s,roleId:n,search:l}=e,r=n?"&roleId=".concat(n):"",a=l?"&search=".concat(l):"";return await j.p.get("/users?start=".concat(t||0,"&limit=").concat(s||10).concat(r).concat(a))})({search:f,roleId:O}).then((e=>{var s;e&&t(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.rows)})).catch((e=>console.log("err",e)))};(0,n.useEffect)((()=>{S()}),[f,O]);const U=[{title:"Name",dataIndex:"name",key:"name",width:150},{title:"Email",dataIndex:"email",key:"email",width:200},{title:"Father's Name",dataIndex:"fatherName",key:"fatherName",width:150},{title:"Mother's Name",dataIndex:"motherName",key:"otherName",width:150},{title:"Gender",dataIndex:"gender",key:"gender",width:150},{title:"Role",dataIndex:"role",key:"role",width:150},{title:"Action",key:"action",render:(e,t)=>(0,g.jsxs)(a.A,{size:"middle",children:[(0,g.jsx)(i.A,{size:"middle",onClick:()=>A({isOpen:!0,userId:null===t||void 0===t?void 0:t.id}),children:"Edit"}),(0,g.jsx)(o.A,{title:"Are you sure to delete this User?",onConfirm:()=>{(async e=>await j.p.delete("/users/".concat(e)))({id:null===t||void 0===t?void 0:t._id}).then((e=>{r.Ay.success("User Deleted Successfully"),S()})).catch((e=>console.log("err",e)))},okText:"Yes",cancelText:"No",children:(0,g.jsx)(i.A,{danger:!0,size:"middle",children:"Delete"})})]}),width:150}];return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(I.z,{title:"Users",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/users",breadcrumbName:"Users"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,g.jsx)(w.rQ,{className:"p-3  ",children:(0,g.jsx)(c.A,{gutter:16,children:(0,g.jsx)(d.A,{children:(0,g.jsx)(N.C,{title:(0,g.jsxs)("div",{className:"flex items-center gap-4",children:[(0,g.jsx)("div",{children:(0,g.jsx)(u.A,{style:{width:120},size:"middle",placeholder:"Role",onChange:e=>{k(e)},options:s})}),(0,g.jsx)("div",{children:(0,g.jsx)(E,{placeholder:"search",allowClear:!0,enterButton:"Search",size:"middle",onSearch:e=>{b(e)}})})]}),moreBtn:(0,g.jsx)(i.A,{type:"primary",onClick:()=>x(!0),children:"Add"}),children:(0,g.jsx)(m.A,{size:"small",scroll:{x:"100%",y:"auto"},columns:U,dataSource:e})})})})}),(0,g.jsx)(h.A,{title:p?"Add Users":"Edit Users",destroyOnClose:!0,open:p||v.isOpen,width:1024,footer:!1,onCancel:()=>{x(!1),A({isOpen:!1,userId:null})},children:(0,g.jsx)(C,{setIsAddUsers:x,getAllUsers:S,isEditUsers:v,setIsEditUsers:A})})]})}},46157:(e,t,s)=>{s.d(t,{EO:()=>o,L_:()=>r,S0:()=>i,vZ:()=>l,xF:()=>a});var n=s(32170);const l=async e=>{let{body:t}=e;return await n.p.post("/roles",t)},r=async e=>{let{start:t,limit:s,RoleNumber:l,status:r}=e;return await n.p.get("/roles?start=".concat(t,"&limit=").concat(s))},a=async e=>{let{id:t}=e;return await n.p.get("/roles/".concat(t))},i=async e=>{let{id:t,body:s}=e;return await n.p.patch("/roles/".concat(t),s)},o=async e=>{let{id:t}=e;return await n.p.delete("/roles/".concat(t))}},28440:(e,t,s)=>{s.d(t,{A:()=>C});var n=s(58168),l=s(5544),r=s(51376),a=s(64600),i=s.n(a),o=s(28678),c=s(25001),d=s(65043),u=s(35296),m=s(36282),h=s(12701),p=s(89421),x=s(83085),v=s(38046),A=s(38097),f=s(8376),j=s(98986),y=function(e){var t=e.prefixCls,s=e.okButtonProps,l=e.cancelButtonProps,r=e.title,a=e.cancelText,i=e.okText,o=e.okType,c=e.icon,m=e.showCancel,h=void 0===m||m,y=e.close,g=e.onConfirm,b=e.onCancel,C=d.useContext(u.QO).getPrefixCls;return d.createElement(A.A,{componentName:"Popconfirm",defaultLocale:f.A.Popconfirm},(function(e){return d.createElement("div",{className:"".concat(t,"-inner-content")},d.createElement("div",{className:"".concat(t,"-message")},c&&d.createElement("span",{className:"".concat(t,"-message-icon")},c),d.createElement("div",{className:"".concat(t,"-message-title")},(0,j.b)(r))),d.createElement("div",{className:"".concat(t,"-buttons")},h&&d.createElement(p.A,(0,n.A)({onClick:b,size:"small"},l),null!==a&&void 0!==a?a:e.cancelText),d.createElement(v.A,{buttonProps:(0,n.A)((0,n.A)({size:"small"},(0,x.D)(o)),s),actionFn:g,close:y,prefixCls:C("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!==i&&void 0!==i?i:e.okText)))}))},g=void 0,b=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(s[n[l]]=e[n[l]])}return s};const C=d.forwardRef((function(e,t){var s=e.prefixCls,a=e.placement,p=void 0===a?"top":a,x=e.trigger,v=void 0===x?"click":x,A=e.okType,f=void 0===A?"primary":A,j=e.icon,C=void 0===j?d.createElement(r.A,null):j,w=e.children,I=e.overlayClassName,N=e.onOpenChange,E=e.onVisibleChange,O=b(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),k=d.useContext(u.QO).getPrefixCls,S=(0,o.A)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),U=(0,l.A)(S,2),P=U[0],T=U[1],F=function(e,t){T(e,!0),null===E||void 0===E||E(e,t),null===N||void 0===N||N(e,t)},z=k("popover",s),R=k("popconfirm",s),_=i()(R,I);return d.createElement(m.A,(0,n.A)({},O,{trigger:v,prefixCls:z,placement:p,onOpenChange:function(t){var s=e.disabled;void 0!==s&&s||F(t)},open:P,ref:t,overlayClassName:_,_overlay:d.createElement(y,(0,n.A)({okType:f,icon:C},e,{prefixCls:z,close:function(e){F(!1,e)},onConfirm:function(t){var s;return null===(s=e.onConfirm)||void 0===s?void 0:s.call(g,t)},onCancel:function(t){var s;F(!1,t),null===(s=e.onCancel)||void 0===s||s.call(g,t)}}))}),(0,h.Ob)(w,{onKeyDown:function(e){var t,s;d.isValidElement(w)&&(null===(s=null===w||void 0===w?void 0:(t=w.props).onKeyDown)||void 0===s||s.call(t,e)),function(e){e.keyCode===c.A.ESC&&P&&F(!1,e)}(e)}}))}))}}]);
//# sourceMappingURL=670.09385c05.chunk.js.map