"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[745],{745:(e,s,i)=>{i.r(s),i.d(s,{default:()=>F});var l=i(5043),t=i(1802),d=i(6059),n=i(9800),a=i(1645),r=i(2217),o=i(4435),c=i(9524),u=i(4406),m=i(289),v=i(8193),x=i(5397),h=i(6558),p=i(5256),j=i(4733),A=i(1402),y=i(6191),f=i(1966),g=i(3906),b=i.n(g),C=i(726),I=i.n(C),w=i(7975),k=i(2170);var N=i(579);const{Option:S}=u.A,D=e=>{let{setisAddCms:s,getAllData:i,setIsEditCms:d,isEditCms:o}=e;const[c,u]=(0,l.useState)([]),[g,C]=(0,l.useState)(""),[S,D]=(0,l.useState)(!1),[O,E]=(0,l.useState)(),[q,F]=(0,l.useState)(!1),[z,_]=(0,l.useState)(!1),[P,R]=(0,l.useState)(null);console.log("content1Output",P);const[T,V]=(0,l.useState)(null),[Y]=m.A.useForm();return(0,l.useEffect)((()=>{null!==o&&void 0!==o&&o.cmsId&&(F(!0),(async e=>{let{id:s}=e;return await k.p.get("/products/".concat(s))})({id:null===o||void 0===o?void 0:o.cmsId}).then((e=>{var s,i,l;Y.setFieldsValue(null===e||void 0===e?void 0:e.data),V(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.description);const t=null===e||void 0===e||null===(i=e.data)||void 0===i||null===(l=i.media)||void 0===l?void 0:l.filesData;u(t),F(!1)})).catch((e=>{console.log("err",e),F(!1)})))}),[null===o||void 0===o?void 0:o.cmsId]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(x.A,{spinning:q,children:(0,N.jsx)("div",{children:(0,N.jsxs)(m.A,{name:"cms",form:Y,layout:"vertical",onFinish:e=>{const l={name:null===e||void 0===e?void 0:e.name,inventory:null===e||void 0===e?void 0:e.inventory,media:{filesData:c},description:T};var t;null!==o&&void 0!==o&&o.cmsId?(async e=>{let{id:s,body:i}=e;return await k.p.patch("/products/".concat(s),i)})({id:null===o||void 0===o?void 0:o.cmsId,body:l}).then((e=>{d({isOpen:!1,cmsId:""}),i(),v.Ay.success("Data updated successfully")})).catch((e=>console.log("err",e))):null===(t=(async e=>{let{body:s}=e;return await k.p.post("/products",s)})({body:l}))||void 0===t||t.then((e=>{s(!1),i(),v.Ay.success("Data added successfully")})).catch((e=>{console.log("err :>> ",e)}))},autoComplete:"off",children:[(0,N.jsxs)(n.A,{gutter:[16,0],children:[(0,N.jsx)(a.A,{xs:24,md:12,children:(0,N.jsx)(m.A.Item,{label:"name",name:"name",rules:[{required:!0,message:"Required! "}],children:(0,N.jsx)(h.A,{})})}),(0,N.jsx)(a.A,{span:12,children:(0,N.jsx)(m.A.Item,{label:"Inventory",name:"inventory",rules:[{required:!0,message:"inventory is required!"}],children:(0,N.jsx)(h.A,{})})})]}),(0,N.jsxs)(n.A,{gutter:[16,0],children:[(0,N.jsx)(a.A,{xs:24,md:12,children:(0,N.jsx)(m.A.Item,{label:"Actual Price",name:"actual_price",rules:[{required:!0,message:"Required! "}],children:(0,N.jsx)(h.A,{})})}),(0,N.jsx)(a.A,{span:12,children:(0,N.jsx)(m.A.Item,{label:"Retail Price",name:"retail_price",rules:[{required:!0,message:"inventory is required!"}],children:(0,N.jsx)(h.A,{})})})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{children:"Description"}),(0,N.jsx)(b(),{data:T,editor:I(),onChange:(e,s)=>{V(s.getData())}})]}),(0,N.jsx)(n.A,{children:(0,N.jsx)(a.A,{xs:24,md:12,children:(0,N.jsxs)(m.A.Item,{label:"Image",name:"image",children:[(0,N.jsx)(p.A,{onChange:e=>{_(!0);const s=new FormData;s.append("file",e.file.originFileObj),(0,w.V)(s).then((e=>{u((s=>{var i;return[...s,{link:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.link}]})),_(!1)})).catch((e=>{v.Ay.error("Error while uploading"),_(!1)}))},fileList:[],children:(0,N.jsx)(t.A,{className:"flex items-center",icon:(0,N.jsx)(j.A,{}),children:"Click to Upload"})}),(0,N.jsx)("div",{className:"w-full",style:{maxHeight:"230px",overflowY:"auto"},children:(null===c||void 0===c?void 0:c.length)>0&&(null===c||void 0===c?void 0:c.map((e=>(0,N.jsxs)("div",{className:"flex border rounded-md justify-between items-center p-1 px-3 my-1",children:[(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("span",{className:"mr-2",children:(0,N.jsx)(A.A,{})}),"Product Image"]}),(0,N.jsxs)("div",{className:"flex gap-3 text-base",children:[(0,N.jsx)("div",{className:"cursor-pointer",children:(0,N.jsx)("div",{onClick:()=>{(async e=>{var s;const i=e;C(null===i||void 0===i?void 0:i.link),D(!0),E(null!==i&&void 0!==i&&i.file?null===i||void 0===i||null===(s=i.file)||void 0===s?void 0:s.name:null===i||void 0===i?void 0:i.name)})(e)},children:(0,N.jsx)(y.A,{})})}),(0,N.jsx)("div",{className:"cursor-pointer",children:(0,N.jsx)("div",{onClick:()=>{const s=null===c||void 0===c?void 0:c.filter((s=>{var i;return null!==s&&void 0!==s&&s.file?(null===s||void 0===s||null===(i=s.file)||void 0===i?void 0:i.uid)!==(null===e||void 0===e?void 0:e.id):(null===s||void 0===s?void 0:s.id)!==(null===e||void 0===e?void 0:e.id)}));u(s)},children:(0,N.jsx)(f.A,{style:{color:"red"}})})})]})]},null===e||void 0===e?void 0:e.id))))})]})})}),(0,N.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,N.jsx)(t.A,{onClick:()=>{s(!1),d({isOpen:!1,cmsId:""})},children:"Cancel"}),(0,N.jsx)(t.A,{type:"primary",htmlType:"submit",loading:z,children:"Submit"})]})]})})}),(0,N.jsx)(r.A,{width:410,title:O,open:S,footer:null,onCancel:()=>{D(!1),C("")},destroyOnClose:!0,children:(0,N.jsx)("img",{src:g||"",alt:g,style:{width:"400px"}})})]})};var O=i(925),E=i(1734),q=i(7043);const F=()=>{const[e,s]=(0,l.useState)(!1),[i,u]=(0,l.useState)({isOpen:!1,cmsId:""}),[m,v]=(0,l.useState)([]),x=[{title:"#Id",dataIndex:"id",key:"id",width:140},{title:"Name",dataIndex:"name",key:"name",width:140},{title:"Inventory",dataIndex:"inventory",key:"inventroy",width:150},{title:"Action",key:"action",render:(e,s)=>(0,N.jsxs)(o.A,{size:"middle",children:[(0,N.jsx)(t.A,{size:"middle",onClick:()=>u({isOpen:!0,cmsId:null===s||void 0===s?void 0:s.id}),children:"Edit"}),(0,N.jsx)(d.A,{title:"Are you sure to delete this task?",onConfirm:()=>{(async e=>{let{id:s}=e;return await k.p.delete("/products/".concat(s))})({id:null===s||void 0===s?void 0:s._id}).then((e=>{console.log("res",e),message.success("Deleted Successfully"),h()})).catch((e=>console.log("err",e)))},okText:"Yes",cancelText:"No",children:(0,N.jsx)(t.A,{danger:!0,size:"middle",children:"Delete"})})]}),width:150}],h=()=>{(async e=>{let{start:s,limit:i}=e;return await k.p.get("/products?start=".concat(s,"&limit=").concat(i))})({}).then((e=>{var s;e&&v(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.rows)})).catch((e=>console.log("err",e)))};return(0,l.useEffect)((()=>{h()}),[]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.z,{title:"Cms",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/products",breadcrumbName:"Products"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,N.jsx)(O.rQ,{className:"p-3",children:(0,N.jsx)(n.A,{gutter:16,children:(0,N.jsx)(a.A,{sm:24,xs:24,lg:24,className:"",children:(0,N.jsx)(q.C,{moreBtn:(0,N.jsx)(t.A,{type:"primary",onClick:()=>s(!0),children:"Add"}),border:!1,size:"default",children:(0,N.jsx)(c.A,{size:"small",scroll:{x:"100%",y:"auto"},columns:x,dataSource:m})})})})}),(0,N.jsx)(r.A,{title:"".concat(e?"Add":"Edit"),destroyOnClose:!0,open:e||i.isOpen,width:1024,footer:!1,onCancel:()=>{s(!1),u({isOpen:!1,cmsId:""})},children:(0,N.jsx)(D,{setisAddCms:s,getAllData:h,isEditCms:i,setIsEditCms:u})})]})}},7975:(e,s,i)=>{i.d(s,{V:()=>t});var l=i(2170);const t=async e=>await l.p.post("/upload",e)}}]);
//# sourceMappingURL=745.6c21e43d.chunk.js.map