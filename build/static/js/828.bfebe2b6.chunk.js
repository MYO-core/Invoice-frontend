"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[828],{828:(e,t,s)=>{s.r(t),s.d(t,{default:()=>H});var l=s(5043),a=s(7122),i=s(3307),r=s(9800),n=s(1645),d=s(4406),c=s(1802),o=s(9602),m=s(3946),u=s(1554),h=s(289),x=s(8193),j=s(5397),p=s(3428),b=s(1966),A=s(2543),v=s(579);const{Option:g}=d.A,y=e=>{let{setisAddCms:t,getAllData:s,setIsEditCms:a,isEditCms:o,currentStore:m,setNewRecord:u,newRecord:y}=e;const[f,_]=(0,l.useState)(!1),[w]=h.A.useForm();return(0,l.useEffect)((()=>{null!==o&&void 0!==o&&o.cmsId&&(_(!0),(0,A.W8)({id:null===o||void 0===o?void 0:o.cmsId}).then((e=>{w.setFieldsValue({tables:[null===e||void 0===e?void 0:e.data]}),_(!1)})).catch((e=>{console.log("err",e),_(!1)})))}),[null===o||void 0===o?void 0:o.cmsId]),(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(j.A,{spinning:f,children:(0,v.jsx)("div",{children:(0,v.jsxs)(h.A,{form:w,layout:"vertical",onFinish:e=>{const s=e.tables.map((e=>({...e,store_id:m})));if(null!==o&&void 0!==o&&o.cmsId){var l,i,r;let e={no_of_seats:null===(l=s[0])||void 0===l?void 0:l.no_of_seats,status:null===(i=s[0])||void 0===i?void 0:i.status,table_number:null===(r=s[0])||void 0===r?void 0:r.table_number};(0,A.FM)({id:null===o||void 0===o?void 0:o.cmsId,body:e}).then((e=>{a({isOpen:!1,cmsId:""}),u(y+1),x.Ay.success("Data updated successfully")})).catch((e=>console.log("err",e)))}else{var n;null===(n=(0,A.zF)({body:s}))||void 0===n||n.then((e=>{t(!1),u(y+1),x.Ay.success("Tables added successfully")})).catch((e=>{console.log("err :>> ",e)}))}},initialValues:{tables:[{status:"booked"}]},children:[(0,v.jsx)(h.A.List,{name:"tables",children:(e,t)=>{let{add:s,remove:l}=t;return(0,v.jsxs)(v.Fragment,{children:[e.map(((t,s)=>(0,v.jsx)("div",{style:{marginBottom:20},children:(0,v.jsxs)(r.A,{gutter:16,align:"middle",children:[(0,v.jsx)(n.A,{xs:24,sm:24,md:24,lg:8,children:(0,v.jsx)(h.A.Item,{...t,label:"Table Number ".concat(s+1),name:[t.name,"table_number"],fieldKey:[t.fieldKey,"table_number"],rules:[{type:"string",message:"Table number must be a string."}],children:(0,v.jsx)(i.A,{placeholder:"Enter table number"})})}),(0,v.jsx)(n.A,{xs:24,sm:24,md:24,lg:8,children:(0,v.jsx)(h.A.Item,{...t,label:"Number of Seats",name:[t.name,"no_of_seats"],fieldKey:[t.fieldKey,"no_of_seats"],rules:[{required:!0,message:"Please enter the number of seats."},{type:"number",min:1,message:"Number of seats must be at least 1."}],children:(0,v.jsx)(p.A,{min:1,placeholder:"Enter number of seats",style:{width:"100%"}})})}),(0,v.jsx)(n.A,{xs:12,sm:12,md:12,lg:6,children:(0,v.jsx)(h.A.Item,{...t,label:"Status",name:[t.name,"status"],fieldKey:[t.fieldKey,"status"],rules:[{required:!0,message:"Please select the status."}],children:(0,v.jsxs)(d.A,{placeholder:"Select status",children:[(0,v.jsx)(g,{value:"available",children:"Available"}),(0,v.jsx)(g,{value:"booked",children:"Booked"}),(0,v.jsx)(g,{value:"service",children:"Service"}),(0,v.jsx)(g,{value:"preparing",children:"Preparing"})]})})}),(0,v.jsx)(n.A,{span:2,children:e.length>1&&(0,v.jsx)(b.A,{onClick:()=>l(t.name),style:{fontSize:"20px",color:"#ff4d4f",cursor:"pointer",marginTop:"30px"}})})]})},t.key))),!(null!==o&&void 0!==o&&o.cmsId)&&(0,v.jsx)(h.A.Item,{children:(0,v.jsx)(c.A,{type:"dashed",onClick:()=>s(),style:{width:"60%"},block:!0,children:"Add Another Table"})})]})}}),(0,v.jsxs)(h.A.Item,{style:{textAlign:"right"},children:[(0,v.jsx)(c.A,{onClick:()=>t(!1),style:{marginRight:8},children:"Cancel"}),(0,v.jsx)(c.A,{type:"primary",htmlType:"submit",children:"Submit"})]})]})})})})};var f=s(8655),_=s(3815),w=s(7807);const{Option:I}=d.A,S=e=>{let{tableData:t,setVisible:s,visible:a,currentStore:o}=e;const[m,u]=(0,l.useState)(!1),[b,A]=(0,l.useState)([]),[g,y]=(0,l.useState)(""),[S]=h.A.useForm();(0,l.useEffect)((()=>{(0,w.hV)({}).then((e=>{A(e.data.rows)})).catch((e=>{x.Ay.error("Error While Fetching Items")}))}),[S,g]),(0,l.useEffect)((()=>{a&&(S.resetFields(),S.setFieldsValue({table_id:t.id}))}),[S,a]);const C=()=>{var e;let t=S.getFieldsValue(["order_items"]),s=0;null===t||void 0===t||null===(e=t.order_items)||void 0===e||e.map((e=>{let t=Number(null===e||void 0===e?void 0:e.price)*Number(null===e||void 0===e?void 0:e.quantity);s+=t}));let l=S.getFieldValue("tax_precent"),a=S.getFieldValue("discount_precent");s+=.01*l*s,s-=.01*a*s,S.setFieldValue("total_price",s)};return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(j.A,{spinning:m,children:(0,v.jsx)("div",{children:(0,v.jsxs)(h.A,{name:"order",form:S,layout:"vertical",onChange:C,onFinish:e=>{var t;const l=e;l.store_id=o,null===(t=(0,_.zF)({body:l}))||void 0===t||t.then((e=>{x.Ay.success("Data added successfully"),s(!1)})).catch((e=>{console.log("err :>> ",e)}))},autoComplete:"off",children:[(0,v.jsxs)(r.A,{gutter:16,children:[(0,v.jsx)(n.A,{span:12,children:(0,v.jsx)(h.A.Item,{label:"Table number",name:"table_id",rules:[{required:!0,message:"Please select the table ID"}],children:(0,v.jsx)(d.A,{children:(0,v.jsxs)(I,{value:t.id,children:[t.table_number," - "," ("+t.no_of_seats+" Seater )"]})})})}),(0,v.jsx)(n.A,{span:12,children:(0,v.jsx)(h.A.Item,{label:"Customer Name",name:"customer_name",children:(0,v.jsx)(i.A,{})})})]}),(0,v.jsxs)(r.A,{gutter:16,children:[(0,v.jsx)(n.A,{xs:12,sm:12,md:12,lg:8,children:(0,v.jsx)(h.A.Item,{label:"Total Price",name:"total_price",rules:[{required:!0,message:"Please enter the total price"}],children:(0,v.jsx)(p.A,{min:0,precision:2,style:{width:"100%"}})})}),(0,v.jsx)(n.A,{xs:12,sm:12,md:12,lg:8,children:(0,v.jsx)(h.A.Item,{label:"Discount Percent",name:"discount_precent",initialValue:0,children:(0,v.jsx)(p.A,{min:0,max:100,precision:2,style:{width:"100%"}})})}),(0,v.jsx)(n.A,{xs:12,sm:12,md:12,lg:8,children:(0,v.jsx)(h.A.Item,{label:"Tax Percent",name:"tax_precent",initialValue:0,children:(0,v.jsx)(p.A,{min:0,max:100,precision:2,style:{width:"100%"}})})})]}),(0,v.jsx)(r.A,{gutter:16,children:(0,v.jsx)(n.A,{xs:12,sm:12,md:12,lg:8,children:(0,v.jsx)(h.A.Item,{label:"Order Status",name:"status",initialValue:"pending",children:(0,v.jsxs)(d.A,{children:[(0,v.jsx)(I,{value:"pending",children:"Pending"}),(0,v.jsx)(I,{value:"preparing",children:"Preparing"}),(0,v.jsx)(I,{value:"served",children:"Served"}),(0,v.jsx)(I,{value:"paid",children:"Paid"}),(0,v.jsx)(I,{value:"canceled",children:"Canceled"})]})})})}),(0,v.jsx)(h.A.List,{name:"order_items",children:(e,t)=>{let{add:s,remove:l}=t;return(0,v.jsxs)(v.Fragment,{children:[e.map((e=>{let{key:t,name:s,fieldKey:a,...c}=e;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("hr",{style:{margin:"20px 0",borderColor:"#e8e8e8"}}),(0,v.jsxs)(r.A,{gutter:16,align:"middle",children:[(0,v.jsx)(n.A,{xs:12,sm:12,md:12,lg:6,children:(0,v.jsx)(h.A.Item,{...c,name:[s,"item_id"],fieldKey:[a,"item_id"],label:"Item Code",rules:[{required:!0,message:"Please select the item ID"}],children:(0,v.jsx)(d.A,{showSearch:!0,onSearch:e=>{y(e)},onChange:e=>{const t=b.find((t=>t.id===e));S.setFieldsValue({order_items:{[s]:{item_name:null===t||void 0===t?void 0:t.name,price:null===t||void 0===t?void 0:t.price,quantity:1}}}),C()},children:b.map((e=>(0,v.jsxs)(I,{value:e.id,children:[e.item_code," - ",e.name]},e.id)))})})}),(0,v.jsx)(n.A,{xs:12,sm:12,md:12,lg:6,children:(0,v.jsx)(h.A.Item,{...c,name:[s,"item_name"],fieldKey:[a,"item_name"],label:"Item Name",rules:[{required:!0,message:"Please enter the item name"}],children:(0,v.jsx)(i.A,{})})}),(0,v.jsx)(n.A,{xs:8,sm:12,md:12,lg:4,children:(0,v.jsx)(h.A.Item,{...c,name:[s,"quantity"],fieldKey:[a,"quantity"],label:"Quantity",rules:[{required:!0,message:"Please enter the quantity"}],children:(0,v.jsx)(p.A,{min:0,style:{width:"100%"}})})}),(0,v.jsx)(n.A,{xs:12,sm:12,md:12,lg:6,children:(0,v.jsx)(h.A.Item,{...c,name:[s,"price"],fieldKey:[a,"price"],label:"Unit Price",rules:[{required:!0,message:"Please enter the price"}],children:(0,v.jsx)(p.A,{min:0,precision:2,style:{width:"100%"}})})}),(0,v.jsx)(n.A,{span:2,children:(0,v.jsx)(f.A,{onClick:()=>{l(s),C()},style:{fontSize:"20px",color:"red"}})})]},t)]})})),(0,v.jsx)(h.A.Item,{children:(0,v.jsx)(c.A,{type:"dashed",onClick:()=>s(),block:!0,children:"Add Item"})})]})}}),(0,v.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,v.jsx)(c.A,{onClick:()=>{s(!1)},children:"Cancel"}),(0,v.jsx)(c.A,{type:"primary",htmlType:"submit",loading:m,children:"Submit"})]})]})})})})};var C=s(7047),F=s(1068),k=s(2013),N=s(8387),T=s(6059),P=s(5337),V=s(8646),D=s(8240);const{Text:O,Title:q}=C.A,{Panel:E}=F.A,z=e=>{let{allData:t,setIsEditCms:s,setTableData:l,setVisible:a}=e;return(0,v.jsx)("div",{style:{padding:"1px"},children:(0,v.jsx)(r.A,{gutter:[16,16],children:t.map((e=>(0,v.jsx)(n.A,{xs:24,sm:12,md:8,lg:6,children:(0,v.jsxs)(k.A,{title:(0,v.jsx)(q,{level:5,children:(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsxs)("span",{className:"text-sm sm:text-base",children:["Table No:- ",e.table_number]}),(0,v.jsx)("span",{className:"ml-4 sm:ml-16",children:(0,v.jsx)(P.A,{onClick:()=>{a(!0),l(e)},style:{cursor:"pointer",color:"#1890ff"}})})]})}),bordered:!1,style:{boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",borderRadius:"8px"},children:[(0,v.jsx)(O,{strong:!0,children:"#ID: "}),(0,v.jsx)(O,{children:e.id}),(0,v.jsx)("br",{}),(0,v.jsx)(O,{strong:!0,children:"Total Seats: "}),(0,v.jsx)(O,{children:e.no_of_seats}),(0,v.jsx)("br",{}),(0,v.jsx)(O,{strong:!0,children:"Status: "}),"available"===e.status?(0,v.jsx)(N.A,{color:"green",children:e.status}):(0,v.jsx)(N.A,{color:"red",children:e.status}),(0,v.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,v.jsx)(V.A,{onClick:()=>s({isOpen:!0,cmsId:null===e||void 0===e?void 0:e.id}),style:{cursor:"pointer",color:"#1890ff"}}),(0,v.jsx)(T.A,{title:"Are you sure to delete this Table?",onConfirm:()=>{},okText:"Yes",cancelText:"No",children:(0,v.jsx)(D.A,{onClick:()=>{},style:{cursor:"pointer",color:"#ff4d4f"}})})]})]})},e.id)))})})};var K=s(925),R=s(1734),W=s(7043),B=s(495);const{Search:M}=i.A,H=()=>{const[e,t]=(0,l.useState)(!1),[s,i]=(0,l.useState)(0),[h,x]=(0,l.useState)(""),[j,p]=(0,l.useState)(""),[b,g]=(0,a.fp)(B.qt),[f,_]=(0,a.fp)(B.oc),[w,I]=(0,l.useState)(!1),[C,F]=(0,l.useState)(0),[k,N]=(0,l.useState)(0),[T,P]=(0,l.useState)(!1),[V,D]=(0,l.useState)({isOpen:!1,cmsId:""}),[O,q]=(0,l.useState)([]),E=e=>{let{search:t,type:l,isAvailable:a}=e;(0,A.xH)({start:s,limit:12,search:t,type:l,isAvailable:a,store_id:b}).then((e=>{var t,s;e&&(q(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows),N(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.count))})).catch((e=>console.log("err",e)))};(0,l.useEffect)((()=>{E({search:h,type:j,isAvailable:w})}),[h,j,w,b,C,s]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(R.z,{title:"Tables",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/tables",breadcrumbName:"Tables"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,v.jsx)(K.rQ,{className:"p-3",children:(0,v.jsx)(r.A,{gutter:16,children:(0,v.jsx)(n.A,{sm:24,xs:24,lg:24,className:"",children:(0,v.jsxs)(W.C,{title:(0,v.jsx)("div",{children:(0,v.jsxs)(r.A,{gutter:[16,16],align:"middle",children:[(0,v.jsx)(n.A,{xs:24,sm:12,md:6,children:(0,v.jsxs)(d.A,{style:{width:"100%"},size:"medium",placeholder:"Status",onChange:e=>{p(e)},children:[(0,v.jsx)(Option,{value:"",children:"All"}),(0,v.jsx)(Option,{value:"booked",children:"Booked"}),(0,v.jsx)(Option,{value:"available",children:"Available"}),(0,v.jsx)(Option,{value:"service",children:"Service"}),(0,v.jsx)(Option,{value:"preparing",children:"Preparing"})]})}),(0,v.jsx)(n.A,{xs:24,sm:8,md:6,children:(0,v.jsx)(M,{placeholder:"Table number",allowClear:!0,enterButton:"Search",size:"medium",onSearch:e=>{x(e)},style:{width:"100%"}})})]})}),moreBtn:(0,v.jsx)(c.A,{type:"primary",onClick:()=>t(!0),children:"Add"}),children:[(0,v.jsx)(z,{allData:O,setIsEditCms:D,setTableData:_,setVisible:P}),(0,v.jsx)("div",{className:"mt-2 flex justify-end",children:(0,v.jsx)(o.A,{pageSize:12,total:k,onChange:e=>{i(10*(e-1))},showSizeChanger:!1})})]})})})}),(0,v.jsx)(m.A,{title:"".concat(e?"Add Tables":"Edit Table"),destroyOnClose:!0,open:e||V.isOpen,width:1024,footer:!1,onCancel:()=>{t(!1),D({isOpen:!1,cmsId:""})},children:(0,v.jsx)(y,{setisAddCms:t,getAllData:E,isEditCms:V,setIsEditCms:D,currentStore:b,newRecord:C,setNewRecord:F})}),(0,v.jsx)(u.A,{title:"Add Order",placement:"right",onClose:()=>{P(!1)},open:T,width:window.innerWidth<768?300:600,children:(0,v.jsx)(S,{setVisible:P,tableData:f,visible:T,currentStore:b})})]})}},3815:(e,t,s)=>{s.d(t,{FM:()=>n,FN:()=>d,W8:()=>r,hV:()=>i,zF:()=>a});var l=s(2170);const a=async e=>{let{body:t}=e;return await l.p.post("/orders",t)},i=async e=>{let{start:t,limit:s,status:a,search:i,dates:r}=e,n=i?"&search=".concat(i):"",d=a?"&status=".concat(a):"",c="";2===r.length&&(c="&start_date=".concat(r[0],"&end_date=").concat(r[1]));return await l.p.get("/orders?start=".concat(t,"&limit=").concat(s).concat(n).concat(d).concat(c))},r=async e=>{let{id:t}=e;return await l.p.get("/orders/".concat(t))},n=async e=>{let{id:t,body:s}=e;return await l.p.patch("/orders/".concat(t),s)},d=async e=>{let{id:t}=e;return await l.p.delete("/orders/".concat(t))}},7807:(e,t,s)=>{s.d(t,{FM:()=>n,FN:()=>d,W8:()=>r,hV:()=>i,zF:()=>a});var l=s(2170);const a=async e=>{let{body:t}=e;return await l.p.post("/restroItems",t)},i=async e=>{let{start:t=0,limit:s=10,search:a}=e,i=a?"&search=".concat(a):"";return await l.p.get("/restroItems?start=".concat(t,"&limit=").concat(s).concat(i))},r=async e=>{let{id:t}=e;return await l.p.get("/restroItems/".concat(t))},n=async e=>{let{id:t,body:s}=e;return await l.p.patch("/restroItems/".concat(t),s)},d=async e=>{let{id:t}=e;return await l.p.delete("/restroItems/".concat(t))}},2543:(e,t,s)=>{s.d(t,{FM:()=>n,W8:()=>r,xH:()=>i,zF:()=>a});var l=s(2170);const a=async e=>{let{body:t}=e;return await l.p.post("/tables",t)},i=async e=>{let{start:t=0,limit:s=10,search:a,type:i,isAvailable:r,store_id:n}=e,d=a?"&search=".concat(a):"",c=i?"&status=".concat(i):"",o=n?"&store_id=".concat(n):"",m=r?"&isAvailable=".concat(r):"";return await l.p.get("/tables?start=".concat(t,"&limit=").concat(s).concat(d).concat(c).concat(m).concat(o))},r=async e=>{let{id:t}=e;return await l.p.get("/tables/".concat(t))},n=async e=>{let{id:t,body:s}=e;return await l.p.patch("/tables/".concat(t),s)}}}]);
//# sourceMappingURL=828.bfebe2b6.chunk.js.map