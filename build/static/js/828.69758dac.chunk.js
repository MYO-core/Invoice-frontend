"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[828],{828:(e,s,t)=>{t.r(s),t.d(s,{default:()=>H});var l=t(5043),a=t(7122),i=t(3307),r=t(9800),n=t(1645),d=t(4406),c=t(1802),o=t(9602),m=t(3946),h=t(1554),u=t(289),x=t(8193),j=t(5397),p=t(3428),b=t(1966),A=t(2543),y=t(579);const{Option:g}=d.A,v=e=>{let{setisAddCms:s,getAllData:t,setIsEditCms:a,isEditCms:o,currentStore:m,setNewRecord:h,newRecord:v}=e;const[f,w]=(0,l.useState)(!1),[I]=u.A.useForm();return(0,l.useEffect)((()=>{null!==o&&void 0!==o&&o.cmsId&&(w(!0),(0,A.W8)({id:null===o||void 0===o?void 0:o.cmsId}).then((e=>{I.setFieldsValue({tables:[null===e||void 0===e?void 0:e.data]}),w(!1)})).catch((e=>{console.log("err",e),w(!1)})))}),[null===o||void 0===o?void 0:o.cmsId]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(j.A,{spinning:f,children:(0,y.jsx)("div",{children:(0,y.jsxs)(u.A,{form:I,layout:"vertical",onFinish:e=>{const t=e.tables.map((e=>({...e,store_id:m})));if(null!==o&&void 0!==o&&o.cmsId){var l,i,r;let e={no_of_seats:null===(l=t[0])||void 0===l?void 0:l.no_of_seats,status:null===(i=t[0])||void 0===i?void 0:i.status,table_number:null===(r=t[0])||void 0===r?void 0:r.table_number};(0,A.FM)({id:null===o||void 0===o?void 0:o.cmsId,body:e}).then((e=>{a({isOpen:!1,cmsId:""}),h(v+1),x.Ay.success("Data updated successfully")})).catch((e=>console.log("err",e)))}else{var n;null===(n=(0,A.zF)({body:t}))||void 0===n||n.then((e=>{s(!1),h(v+1),x.Ay.success("Tables added successfully")})).catch((e=>{console.log("err :>> ",e)}))}},initialValues:{tables:[{status:"booked"}]},children:[(0,y.jsx)(u.A.List,{name:"tables",children:(e,s)=>{let{add:t,remove:l}=s;return(0,y.jsxs)(y.Fragment,{children:[e.map(((s,t)=>(0,y.jsx)("div",{style:{marginBottom:20},children:(0,y.jsxs)(r.A,{gutter:16,align:"middle",children:[(0,y.jsx)(n.A,{xs:24,sm:24,md:24,lg:8,children:(0,y.jsx)(u.A.Item,{...s,label:"Table Number ".concat(t+1),name:[s.name,"table_number"],fieldKey:[s.fieldKey,"table_number"],rules:[{type:"string",message:"Table number must be a string."}],children:(0,y.jsx)(i.A,{placeholder:"Enter table number"})})}),(0,y.jsx)(n.A,{xs:24,sm:24,md:24,lg:8,children:(0,y.jsx)(u.A.Item,{...s,label:"Number of Seats",name:[s.name,"no_of_seats"],fieldKey:[s.fieldKey,"no_of_seats"],rules:[{required:!0,message:"Please enter the number of seats."},{type:"number",min:1,message:"Number of seats must be at least 1."}],children:(0,y.jsx)(p.A,{min:1,placeholder:"Enter number of seats",style:{width:"100%"}})})}),(0,y.jsx)(n.A,{xs:12,sm:12,md:12,lg:6,children:(0,y.jsx)(u.A.Item,{...s,label:"Status",name:[s.name,"status"],fieldKey:[s.fieldKey,"status"],rules:[{required:!0,message:"Please select the status."}],children:(0,y.jsxs)(d.A,{placeholder:"Select status",children:[(0,y.jsx)(g,{value:"available",children:"Available"}),(0,y.jsx)(g,{value:"booked",children:"Booked"}),(0,y.jsx)(g,{value:"service",children:"Service"}),(0,y.jsx)(g,{value:"preparing",children:"Preparing"})]})})}),(0,y.jsx)(n.A,{span:2,children:e.length>1&&(0,y.jsx)(b.A,{onClick:()=>l(s.name),style:{fontSize:"20px",color:"#ff4d4f",cursor:"pointer",marginTop:"30px"}})})]})},s.key))),!(null!==o&&void 0!==o&&o.cmsId)&&(0,y.jsx)(u.A.Item,{children:(0,y.jsx)(c.A,{type:"dashed",onClick:()=>t(),style:{width:"60%"},block:!0,children:"Add Another Table"})})]})}}),(0,y.jsxs)(u.A.Item,{style:{textAlign:"right"},children:[(0,y.jsx)(c.A,{onClick:()=>s(!1),style:{marginRight:8},children:"Cancel"}),(0,y.jsx)(c.A,{type:"primary",htmlType:"submit",children:"Submit"})]})]})})})})};var f=t(8655),w=t(3815),I=t(7807);const{Option:S}=d.A,_=e=>{let{tableData:s,setVisible:t,visible:a,currentStore:o}=e;const[m,h]=(0,l.useState)(!1),[b,A]=(0,l.useState)([]),[g,v]=(0,l.useState)(""),[_]=u.A.useForm();return(0,l.useEffect)((()=>{(0,I.hV)({}).then((e=>{A(e.data.rows)})).catch((e=>{x.Ay.error("Error While Fetching Items")}))}),[_,g]),(0,l.useEffect)((()=>{a&&(_.resetFields(),_.setFieldsValue({table_id:s.id}))}),[_,a]),(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(j.A,{spinning:m,children:(0,y.jsx)("div",{children:(0,y.jsxs)(u.A,{name:"order",form:_,layout:"vertical",onFinish:e=>{var s;const l=e;l.store_id=o,null===(s=(0,w.zF)({body:l}))||void 0===s||s.then((e=>{x.Ay.success("Data added successfully"),t(!1)})).catch((e=>{console.log("err :>> ",e)}))},autoComplete:"off",children:[(0,y.jsxs)(r.A,{gutter:16,children:[(0,y.jsx)(n.A,{span:12,children:(0,y.jsx)(u.A.Item,{label:"Table number",name:"table_id",rules:[{required:!0,message:"Please select the table ID"}],children:(0,y.jsx)(d.A,{children:(0,y.jsxs)(S,{value:s.id,children:[s.table_number," - "," ("+s.no_of_seats+" Seater )"]})})})}),(0,y.jsx)(n.A,{span:12,children:(0,y.jsx)(u.A.Item,{label:"Customer Name",name:"customer_name",children:(0,y.jsx)(i.A,{})})})]}),(0,y.jsxs)(r.A,{gutter:16,children:[(0,y.jsx)(n.A,{xs:12,sm:12,md:12,lg:8,children:(0,y.jsx)(u.A.Item,{label:"Total Price",name:"total_price",rules:[{required:!0,message:"Please enter the total price"}],children:(0,y.jsx)(p.A,{min:0,precision:2,style:{width:"100%"}})})}),(0,y.jsx)(n.A,{xs:12,sm:12,md:12,lg:8,children:(0,y.jsx)(u.A.Item,{label:"Discount Percent",name:"discount_precent",initialValue:0,children:(0,y.jsx)(p.A,{min:0,max:100,precision:2,style:{width:"100%"}})})}),(0,y.jsx)(n.A,{xs:12,sm:12,md:12,lg:8,children:(0,y.jsx)(u.A.Item,{label:"Tax Percent",name:"tax_precent",initialValue:0,children:(0,y.jsx)(p.A,{min:0,max:100,precision:2,style:{width:"100%"}})})})]}),(0,y.jsx)(r.A,{gutter:16,children:(0,y.jsx)(n.A,{xs:12,sm:12,md:12,lg:8,children:(0,y.jsx)(u.A.Item,{label:"Order Status",name:"status",initialValue:"pending",children:(0,y.jsxs)(d.A,{children:[(0,y.jsx)(S,{value:"pending",children:"Pending"}),(0,y.jsx)(S,{value:"preparing",children:"Preparing"}),(0,y.jsx)(S,{value:"served",children:"Served"}),(0,y.jsx)(S,{value:"paid",children:"Paid"}),(0,y.jsx)(S,{value:"canceled",children:"Canceled"})]})})})}),(0,y.jsx)(u.A.List,{name:"order_items",children:(e,s)=>{let{add:t,remove:l}=s;return(0,y.jsxs)(y.Fragment,{children:[e.map((e=>{let{key:s,name:t,fieldKey:a,...c}=e;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("hr",{style:{margin:"20px 0",borderColor:"#e8e8e8"}}),(0,y.jsxs)(r.A,{gutter:16,align:"middle",children:[(0,y.jsx)(n.A,{xs:12,sm:12,md:12,lg:6,children:(0,y.jsx)(u.A.Item,{...c,name:[t,"item_id"],fieldKey:[a,"item_id"],label:"Item Code",rules:[{required:!0,message:"Please select the item ID"}],children:(0,y.jsx)(d.A,{showSearch:!0,onSearch:e=>{v(e)},onChange:e=>{const s=b.find((s=>s.id===e));_.setFieldsValue({order_items:{[t]:{item_name:null===s||void 0===s?void 0:s.name,price:null===s||void 0===s?void 0:s.price}}})},children:b.map((e=>(0,y.jsxs)(S,{value:e.id,children:[e.item_code," - ",e.name]},e.id)))})})}),(0,y.jsx)(n.A,{xs:12,sm:12,md:12,lg:6,children:(0,y.jsx)(u.A.Item,{...c,name:[t,"item_name"],fieldKey:[a,"item_name"],label:"Item Name",rules:[{required:!0,message:"Please enter the item name"}],children:(0,y.jsx)(i.A,{})})}),(0,y.jsx)(n.A,{xs:8,sm:12,md:12,lg:4,children:(0,y.jsx)(u.A.Item,{...c,name:[t,"quantity"],fieldKey:[a,"quantity"],label:"Quantity",rules:[{required:!0,message:"Please enter the quantity"}],children:(0,y.jsx)(p.A,{min:0,style:{width:"100%"}})})}),(0,y.jsx)(n.A,{xs:12,sm:12,md:12,lg:6,children:(0,y.jsx)(u.A.Item,{...c,name:[t,"price"],fieldKey:[a,"price"],label:"Price",rules:[{required:!0,message:"Please enter the price"}],children:(0,y.jsx)(p.A,{min:0,precision:2,style:{width:"100%"}})})}),(0,y.jsx)(n.A,{span:2,children:(0,y.jsx)(f.A,{onClick:()=>l(t),style:{fontSize:"20px",color:"red"}})})]},s)]})})),(0,y.jsx)(u.A.Item,{children:(0,y.jsx)(c.A,{type:"dashed",onClick:()=>t(),block:!0,children:"Add Item"})})]})}}),(0,y.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,y.jsx)(c.A,{onClick:()=>{setIsOrderModalOpen(!1)},children:"Cancel"}),(0,y.jsx)(c.A,{type:"primary",htmlType:"submit",loading:m,children:"Submit"})]})]})})})})};var C=t(7047),F=t(1068),k=t(2013),T=t(8387),N=t(6059),P=t(5337),O=t(8646),D=t(8240);const{Text:E,Title:V}=C.A,{Panel:q}=F.A,z=e=>{let{allData:s,setIsEditCms:t,setTableData:l,setVisible:a}=e;return(0,y.jsx)("div",{style:{padding:"1px"},children:(0,y.jsx)(r.A,{gutter:[16,16],children:s.map((e=>(0,y.jsx)(n.A,{xs:24,sm:12,md:8,lg:6,children:(0,y.jsxs)(k.A,{title:(0,y.jsx)(V,{level:5,children:(0,y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,y.jsxs)("span",{className:"text-sm sm:text-base",children:["Table No:- ",e.table_number]}),(0,y.jsx)("span",{className:"ml-4 sm:ml-16",children:(0,y.jsx)(P.A,{onClick:()=>{a(!0),l(e)},style:{cursor:"pointer",color:"#1890ff"}})})]})}),bordered:!1,style:{boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",borderRadius:"8px"},children:[(0,y.jsx)(E,{strong:!0,children:"#ID: "}),(0,y.jsx)(E,{children:e.id}),(0,y.jsx)("br",{}),(0,y.jsx)(E,{strong:!0,children:"Total Seats: "}),(0,y.jsx)(E,{children:e.no_of_seats}),(0,y.jsx)("br",{}),(0,y.jsx)(E,{strong:!0,children:"Status: "}),"available"===e.status?(0,y.jsx)(T.A,{color:"green",children:e.status}):(0,y.jsx)(T.A,{color:"red",children:e.status}),(0,y.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,y.jsx)(O.A,{onClick:()=>t({isOpen:!0,cmsId:null===e||void 0===e?void 0:e.id}),style:{cursor:"pointer",color:"#1890ff"}}),(0,y.jsx)(N.A,{title:"Are you sure to delete this Table?",onConfirm:()=>{},okText:"Yes",cancelText:"No",children:(0,y.jsx)(D.A,{onClick:()=>{},style:{cursor:"pointer",color:"#ff4d4f"}})})]})]})},e.id)))})})};var K=t(925),R=t(1734),W=t(7043),B=t(495);const{Search:M}=i.A,H=()=>{const[e,s]=(0,l.useState)(!1),[t,i]=(0,l.useState)(0),[u,x]=(0,l.useState)(""),[j,p]=(0,l.useState)(""),[b,g]=(0,a.fp)(B.qt),[f,w]=(0,a.fp)(B.oc),[I,S]=(0,l.useState)(!1),[C,F]=(0,l.useState)(0),[k,T]=(0,l.useState)(0),[N,P]=(0,l.useState)(!1),[O,D]=(0,l.useState)({isOpen:!1,cmsId:""}),[E,V]=(0,l.useState)([]),q=e=>{let{search:s,type:l,isAvailable:a}=e;(0,A.xH)({start:t,limit:12,search:s,type:l,isAvailable:a,store_id:b}).then((e=>{var s,t;e&&(V(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.rows),T(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.count))})).catch((e=>console.log("err",e)))};(0,l.useEffect)((()=>{q({search:u,type:j,isAvailable:I})}),[u,j,I,b,C,t]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(R.z,{title:"Tables",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/tables",breadcrumbName:"Tables"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,y.jsx)(K.rQ,{className:"p-3",children:(0,y.jsx)(r.A,{gutter:16,children:(0,y.jsx)(n.A,{sm:24,xs:24,lg:24,className:"",children:(0,y.jsxs)(W.C,{title:(0,y.jsx)("div",{children:(0,y.jsxs)(r.A,{gutter:[16,16],align:"middle",children:[(0,y.jsx)(n.A,{xs:24,sm:12,md:6,children:(0,y.jsxs)(d.A,{style:{width:"100%"},size:"medium",placeholder:"Status",onChange:e=>{p(e)},children:[(0,y.jsx)(Option,{value:"",children:"All"}),(0,y.jsx)(Option,{value:"booked",children:"Booked"}),(0,y.jsx)(Option,{value:"available",children:"Available"}),(0,y.jsx)(Option,{value:"service",children:"Service"}),(0,y.jsx)(Option,{value:"preparing",children:"Preparing"})]})}),(0,y.jsx)(n.A,{xs:24,sm:8,md:6,children:(0,y.jsx)(M,{placeholder:"Table number",allowClear:!0,enterButton:"Search",size:"medium",onSearch:e=>{x(e)},style:{width:"100%"}})})]})}),moreBtn:(0,y.jsx)(c.A,{type:"primary",onClick:()=>s(!0),children:"Add"}),children:[(0,y.jsx)(z,{allData:E,setIsEditCms:D,setTableData:w,setVisible:P}),(0,y.jsx)("div",{className:"mt-2 flex justify-end",children:(0,y.jsx)(o.A,{pageSize:12,total:k,onChange:e=>{i(10*(e-1))},showSizeChanger:!1})})]})})})}),(0,y.jsx)(m.A,{title:"".concat(e?"Add Tables":"Edit Table"),destroyOnClose:!0,open:e||O.isOpen,width:1024,footer:!1,onCancel:()=>{s(!1),D({isOpen:!1,cmsId:""})},children:(0,y.jsx)(v,{setisAddCms:s,getAllData:q,isEditCms:O,setIsEditCms:D,currentStore:b,newRecord:C,setNewRecord:F})}),(0,y.jsx)(h.A,{title:"Add Order",placement:"right",onClose:()=>{P(!1)},open:N,width:window.innerWidth<768?300:600,children:(0,y.jsx)(_,{setVisible:P,tableData:f,visible:N,currentStore:b})})]})}},3815:(e,s,t)=>{t.d(s,{FM:()=>n,FN:()=>d,W8:()=>r,hV:()=>i,zF:()=>a});var l=t(2170);const a=async e=>{let{body:s}=e;return await l.p.post("/orders",s)},i=async e=>{let{start:s,limit:t}=e;return await l.p.get("/orders?start=".concat(s,"&limit=").concat(t))},r=async e=>{let{id:s}=e;return await l.p.get("/orders/".concat(s))},n=async e=>{let{id:s,body:t}=e;return await l.p.patch("/orders/".concat(s),t)},d=async e=>{let{id:s}=e;return await l.p.delete("/orders/".concat(s))}},7807:(e,s,t)=>{t.d(s,{FM:()=>n,FN:()=>d,W8:()=>r,hV:()=>i,zF:()=>a});var l=t(2170);const a=async e=>{let{body:s}=e;return await l.p.post("/restroItems",s)},i=async e=>{let{start:s=0,limit:t=10,search:a}=e,i=a?"&search=".concat(a):"";return await l.p.get("/restroItems?start=".concat(s,"&limit=").concat(t).concat(i))},r=async e=>{let{id:s}=e;return await l.p.get("/restroItems/".concat(s))},n=async e=>{let{id:s,body:t}=e;return await l.p.patch("/restroItems/".concat(s),t)},d=async e=>{let{id:s}=e;return await l.p.delete("/restroItems/".concat(s))}},2543:(e,s,t)=>{t.d(s,{FM:()=>n,W8:()=>r,xH:()=>i,zF:()=>a});var l=t(2170);const a=async e=>{let{body:s}=e;return await l.p.post("/tables",s)},i=async e=>{let{start:s=0,limit:t=10,search:a,type:i,isAvailable:r,store_id:n}=e,d=a?"&search=".concat(a):"",c=i?"&status=".concat(i):"",o=n?"&store_id=".concat(n):"",m=r?"&isAvailable=".concat(r):"";return await l.p.get("/tables?start=".concat(s,"&limit=").concat(t).concat(d).concat(c).concat(m).concat(o))},r=async e=>{let{id:s}=e;return await l.p.get("/tables/".concat(s))},n=async e=>{let{id:s,body:t}=e;return await l.p.patch("/tables/".concat(s),t)}}}]);
//# sourceMappingURL=828.69758dac.chunk.js.map