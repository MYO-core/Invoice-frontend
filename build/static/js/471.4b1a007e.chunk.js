"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[471],{89680:(e,t,n)=>{n.d(t,{A:()=>f});var l=n(65043),r=n(37122),s=n(77047),a=n(48193),i=n(39998),o=n(10444),c=n(89421),d=n(45904),u=n(65239),m=n.n(u),h=n(18233),x=n.n(h),p=n(70495),v=n(70579);const{Title:b,Text:y}=s.A,f=e=>{var t,n;let{orderDetails:s}=e;const u=(0,l.useRef)(null),h=(0,l.useRef)(null),[f,g]=(0,r.fp)(p.Zr),A=(new Date).toLocaleString(),[j,C]=(0,l.useState)(.01*Number(s.tax)*Number(s.total)),[w,k]=(0,l.useState)(0);(0,l.useEffect)((()=>{let e=0;s.items.forEach((t=>{e+=t.price*t.quantity})),k(e)}),[]);return(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{ref:u,style:{padding:"10px",width:"80mm",backgroundColor:"#fff",margin:"auto",fontFamily:"Arial, sans-serif",border:"1px solid #000",color:"#000"},children:[(0,v.jsx)(b,{level:5,style:{marginBottom:"5px"},children:f.name}),(0,v.jsx)(y,{style:{textAlign:"center",display:"block",fontSize:"12px",color:"#000"},children:f.address}),(0,v.jsxs)(y,{style:{textAlign:"center",display:"block",fontSize:"10px",color:"#000"},children:["Phone: ",f.phoneNumber]}),(0,v.jsxs)(y,{style:{textAlign:"center",display:"block",fontSize:"12px",marginBottom:"10px",color:"#000"},children:["GSTIN: ",null===s||void 0===s||null===(t=s.organisation)||void 0===t?void 0:t.gst]}),(0,v.jsx)(i.A,{style:{borderColor:"#000",margin:"0"}}),(0,v.jsxs)(y,{style:{textAlign:"left",fontSize:"12px",color:"#000"},children:["Name: ",s.customer_name]}),(0,v.jsx)(i.A,{style:{borderColor:"#000",margin:"0"}}),(0,v.jsx)("br",{}),(0,v.jsxs)(y,{style:{textAlign:"left",display:"block",fontSize:"12px",color:"#000"},children:["Date: ",A]}),(0,v.jsxs)(y,{style:{fontSize:"12px",color:"#000"},children:["Bill No: ",s.orderNumber]}),(0,v.jsx)("br",{}),(0,v.jsxs)(y,{style:{fontSize:"12px",color:"#000"},children:["Table: ",s.tableNumber]}),(0,v.jsx)(i.A,{style:{borderColor:"#000"}}),(0,v.jsx)(o.A,{dataSource:s.items,columns:[{title:"Item",dataIndex:"item_name",key:"item_name"},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center"}],pagination:!1,size:"small",style:{marginBottom:"10px",color:"#000"}}),(0,v.jsx)(i.A,{style:{borderColor:"#000"}}),(0,v.jsx)(y,{style:{textAlign:"center",display:"block",fontSize:"12px",color:"#000"},children:"Thank You Visit Again"})]}),(0,v.jsx)(c.A,{style:{marginTop:"20px"},onClick:()=>{const e=u.current;m()(e).then((e=>{const t=e.toDataURL("image/png"),n=new d.Ay("p","mm",[80,e.height*(80/e.width)]);n.addImage(t,"PNG",0,0,80,e.height*(80/e.width)),n.save("kot.pdf")}))},children:"Print KOT"}),(0,v.jsxs)("div",{ref:h,style:{padding:"10px",width:"80mm",backgroundColor:"#fff",margin:"auto",fontFamily:"Arial, sans-serif",border:"1px solid #000",marginTop:"40px"},children:[(0,v.jsx)("style",{children:"\n                    .custom-row {\n                        color: #000 !important; \n                    }\n                    .custom-row td {\n                        color: #000 !important; \n                    }\n                "}),(0,v.jsx)(b,{level:5,style:{marginBottom:"5px"},children:f.name}),(0,v.jsx)(y,{style:{textAlign:"center",display:"block",fontSize:"12px",color:"#000"},children:f.address}),(0,v.jsxs)(y,{style:{textAlign:"center",display:"block",fontSize:"10px",color:"#000"},children:["Phone: ",f.phoneNumber]}),(0,v.jsxs)(y,{style:{textAlign:"center",display:"block",fontSize:"12px",marginBottom:"10px",color:"#000"},children:["GSTIN: ",null===s||void 0===s||null===(n=s.organisation)||void 0===n?void 0:n.gst]}),(0,v.jsx)(i.A,{style:{borderColor:"#000",margin:"0"}}),(0,v.jsxs)(y,{style:{textAlign:"left",fontSize:"12px",color:"#000"},children:["Name: ",s.customer_name]}),(0,v.jsx)(i.A,{style:{borderColor:"#000",margin:"0",color:"#000"}}),(0,v.jsx)("br",{}),(0,v.jsxs)(y,{style:{textAlign:"left",display:"block",fontSize:"12px",color:"#000"},children:["Date: ",A]}),(0,v.jsxs)(y,{style:{fontSize:"12px",color:"#000"},children:["Bill No: ",s.orderNumber]}),(0,v.jsx)("br",{}),(0,v.jsxs)(y,{style:{fontSize:"12px",color:"#000"},children:["Table: ",s.tableNumber]}),(0,v.jsx)(i.A,{style:{borderColor:"#000"}}),(0,v.jsx)(o.A,{dataSource:s.items,columns:[{title:"Item",dataIndex:"item_name",key:"item_name"},{title:"Qty",dataIndex:"quantity",key:"quantity",align:"center"},{title:"Price",dataIndex:"price",key:"price",align:"center",render:e=>"".concat(e.toFixed(2))},{title:"Amount",key:"total",align:"center",render:e=>"".concat((e.quantity*e.price).toFixed(2))}],pagination:!1,rowClassName:"custom-row",size:"small",style:{marginBottom:"10px"}}),(0,v.jsxs)(y,{style:{textAlign:"right",display:"block",fontSize:"14px",color:"#000"},children:[(0,v.jsx)("strong",{children:"Sub Total "})," ",w]}),(0,v.jsxs)(y,{style:{textAlign:"right",display:"block",fontSize:"14px",color:"#000",marginBottom:"10px"},children:[(0,v.jsx)("strong",{children:"gst "})," ",s.tax,"% ",j.toFixed(2)]}),(0,v.jsx)(i.A,{style:{borderColor:"#000",margin:"0"}}),(0,v.jsx)(y,{style:{textAlign:"right",display:"block",fontSize:"10px",color:"#000"},children:"round off: 0.01"}),(0,v.jsx)(y,{style:{textAlign:"right",display:"block",fontSize:"16px",color:"#000",marginBottom:"10px"},children:(0,v.jsxs)("strong",{children:["Grand Total \u20b9 ",s.total]})}),(0,v.jsx)(i.A,{style:{borderColor:"#000",margin:"0"}}),(0,v.jsx)("br",{}),(0,v.jsx)(y,{style:{textAlign:"center",display:"block",fontSize:"14px",marginTop:"10px",color:"#000"},children:"Thank You Visit Again..."})]}),(0,v.jsx)(c.A,{style:{marginTop:"20px"},onClick:()=>{try{const e=h.current;m()(e).then((e=>{const t=e.toDataURL("image/png"),n=new d.Ay("p","mm",[80,e.height*(80/e.width)]);n.addImage(t,"PNG",0,0,80,e.height*(80/e.width));const l=n.output("blob"),r=URL.createObjectURL(l);x()({printable:r,type:"pdf",documentTitle:"Order Bill"})}))}catch(e){a.Ay.warning("Error While Printing Bill")}},children:"Download Bill"})]})}},91471:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ae});var l=n(65043),r=n(37122),s=n(33307),a=n(47419),i=n(11645),o=n(94406),c=n(89421),d=n(69602),u=n(33946),m=n(58168),h=n(64467),x=n(5544),p=n(53727),v=n(64600),b=n.n(v),y=n(89379),f=n(44347),g=n(52664),A=n(7419),j=n(25001),C=n(48060);const w=l.createContext(null);const k=function(e){var t=e.prefixCls,n=e.className,r=e.style,s=e.children,a=e.containerRef,i=e.id,o={onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp};return l.createElement(l.Fragment,null,l.createElement("div",(0,m.A)({id:i,className:b()("".concat(t,"-content"),n),style:(0,y.A)({},r),"aria-modal":"true",role:"dialog",ref:a},o),s))};var S=n(97907);function N(e){return"string"===typeof e&&String(Number(e))===e?((0,S.Ay)(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var _={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function E(e,t){var n,r,s,a,i=e.prefixCls,o=e.open,c=e.placement,d=e.inline,u=e.push,p=e.forceRender,v=e.autoFocus,f=e.keyboard,g=e.rootClassName,S=e.rootStyle,E=e.zIndex,I=e.className,O=e.id,F=e.style,T=e.motion,z=e.width,D=e.height,P=e.children,K=e.contentWrapperStyle,M=e.mask,V=e.maskClosable,R=e.maskMotion,B=e.maskClassName,q=e.maskStyle,L=e.afterOpenChange,W=e.onClose,U=e.onMouseEnter,H=e.onMouseOver,G=e.onMouseLeave,Q=e.onClick,Y=e.onKeyDown,X=e.onKeyUp,Z=l.useRef(),J=l.useRef(),$=l.useRef();l.useImperativeHandle(t,(function(){return Z.current}));l.useEffect((function(){var e;o&&v&&(null===(e=Z.current)||void 0===e||e.focus({preventScroll:!0}))}),[o]);var ee=l.useState(!1),te=(0,x.A)(ee,2),ne=te[0],le=te[1],re=l.useContext(w),se=null!==(n=null!==(r=null===(s=!1===u?{distance:0}:!0===u?{}:u||{})||void 0===s?void 0:s.distance)&&void 0!==r?r:null===re||void 0===re?void 0:re.pushDistance)&&void 0!==n?n:180,ae=l.useMemo((function(){return{pushDistance:se,push:function(){le(!0)},pull:function(){le(!1)}}}),[se]);l.useEffect((function(){var e,t;o?null===re||void 0===re||null===(e=re.push)||void 0===e||e.call(re):null===re||void 0===re||null===(t=re.pull)||void 0===t||t.call(re)}),[o]),l.useEffect((function(){return function(){var e;null===re||void 0===re||null===(e=re.pull)||void 0===e||e.call(re)}}),[]);var ie=M&&l.createElement(A.Ay,(0,m.A)({key:"mask"},R,{visible:o}),(function(e,t){var n=e.className,r=e.style;return l.createElement("div",{className:b()("".concat(i,"-mask"),n,B),style:(0,y.A)((0,y.A)({},r),q),onClick:V&&o?W:void 0,ref:t})})),oe="function"===typeof T?T(c):T,ce={};if(ne&&se)switch(c){case"top":ce.transform="translateY(".concat(se,"px)");break;case"bottom":ce.transform="translateY(".concat(-se,"px)");break;case"left":ce.transform="translateX(".concat(se,"px)");break;default:ce.transform="translateX(".concat(-se,"px)")}"left"===c||"right"===c?ce.width=N(z):ce.height=N(D);var de={onMouseEnter:U,onMouseOver:H,onMouseLeave:G,onClick:Q,onKeyDown:Y,onKeyUp:X},ue=l.createElement(A.Ay,(0,m.A)({key:"panel"},oe,{visible:o,forceRender:p,onVisibleChanged:function(e){null===L||void 0===L||L(e)},removeOnLeave:!1,leavedClassName:"".concat(i,"-content-wrapper-hidden")}),(function(t,n){var r=t.className,s=t.style;return l.createElement("div",(0,m.A)({className:b()("".concat(i,"-content-wrapper"),r),style:(0,y.A)((0,y.A)((0,y.A)({},ce),s),K)},(0,C.A)(e,{data:!0})),l.createElement(k,(0,m.A)({id:O,containerRef:n,prefixCls:i,className:I,style:F},de),P))})),me=(0,y.A)({},S);return E&&(me.zIndex=E),l.createElement(w.Provider,{value:ae},l.createElement("div",{className:b()(i,"".concat(i,"-").concat(c),g,(a={},(0,h.A)(a,"".concat(i,"-open"),o),(0,h.A)(a,"".concat(i,"-inline"),d),a)),style:me,tabIndex:-1,ref:Z,onKeyDown:function(e){var t=e.keyCode,n=e.shiftKey;switch(t){case j.A.TAB:var l;if(t===j.A.TAB)if(n||document.activeElement!==$.current){if(n&&document.activeElement===J.current){var r;null===(r=$.current)||void 0===r||r.focus({preventScroll:!0})}}else null===(l=J.current)||void 0===l||l.focus({preventScroll:!0});break;case j.A.ESC:W&&f&&(e.stopPropagation(),W(e))}}},ie,l.createElement("div",{tabIndex:0,ref:J,style:_,"aria-hidden":"true","data-sentinel":"start"}),ue,l.createElement("div",{tabIndex:0,ref:$,style:_,"aria-hidden":"true","data-sentinel":"end"})))}const I=l.forwardRef(E);const O=function(e){var t=e.open,n=void 0!==t&&t,r=e.prefixCls,s=void 0===r?"rc-drawer":r,a=e.placement,i=void 0===a?"right":a,o=e.autoFocus,c=void 0===o||o,d=e.keyboard,u=void 0===d||d,m=e.width,h=void 0===m?378:m,p=e.mask,v=void 0===p||p,b=e.maskClosable,A=void 0===b||b,j=e.getContainer,C=e.forceRender,w=e.afterOpenChange,k=e.destroyOnClose,S=e.onMouseEnter,N=e.onMouseOver,_=e.onMouseLeave,E=e.onClick,O=e.onKeyDown,F=e.onKeyUp,T=l.useState(!1),z=(0,x.A)(T,2),D=z[0],P=z[1];var K=l.useState(!1),M=(0,x.A)(K,2),V=M[0],R=M[1];(0,g.A)((function(){R(!0)}),[]);var B=!!V&&n,q=l.useRef(),L=l.useRef();(0,g.A)((function(){B&&(L.current=document.activeElement)}),[B]);if(!C&&!D&&!B&&k)return null;var W={onMouseEnter:S,onMouseOver:N,onMouseLeave:_,onClick:E,onKeyDown:O,onKeyUp:F},U=(0,y.A)((0,y.A)({},e),{},{open:B,prefixCls:s,placement:i,autoFocus:c,keyboard:u,width:h,mask:v,maskClosable:A,inline:!1===j,afterOpenChange:function(e){var t,n;(P(e),null===w||void 0===w||w(e),e||!L.current||(null===(t=q.current)||void 0===t?void 0:t.contains(L.current)))||(null===(n=L.current)||void 0===n||n.focus({preventScroll:!0}))},ref:q},W);return l.createElement(f.A,{open:B||C||D,autoDestroy:!1,getContainer:j,autoLock:v&&(B||D)},l.createElement(I,U))};var F=n(35296),T=n(16436),z=n(83290),D=n(29592),P=n(45132),K=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]])}return n},M=((0,D.P)("default","large"),{distance:180});const V=function(e){var t=e.width,n=e.height,r=e.size,s=void 0===r?"default":r,a=e.closable,i=void 0===a||a,o=e.mask,c=void 0===o||o,d=e.push,u=void 0===d?M:d,v=e.closeIcon,y=void 0===v?l.createElement(p.A,null):v,f=e.bodyStyle,g=e.drawerStyle,A=e.className,j=e.visible,C=e.open,w=e.children,k=e.style,S=e.title,N=e.headerStyle,_=e.onClose,E=e.footer,I=e.footerStyle,D=e.prefixCls,V=e.getContainer,R=e.extra,B=e.afterVisibleChange,q=e.afterOpenChange,L=K(e,["width","height","size","closable","mask","push","closeIcon","bodyStyle","drawerStyle","className","visible","open","children","style","title","headerStyle","onClose","footer","footerStyle","prefixCls","getContainer","extra","afterVisibleChange","afterOpenChange"]),W=l.useContext(F.QO),U=W.getPopupContainer,H=W.getPrefixCls,G=W.direction,Q=H("drawer",D),Y=void 0===V&&U?function(){return U(document.body)}:V,X=i&&l.createElement("button",{type:"button",onClick:_,"aria-label":"Close",className:"".concat(Q,"-close")},y);[["visible","open"],["afterVisibleChange","afterOpenChange"]].forEach((function(e){var t=(0,x.A)(e,2);t[0],t[1]}));var Z=b()((0,h.A)({"no-mask":!c},"".concat(Q,"-rtl"),"rtl"===G),A),J=l.useMemo((function(){return null!==t&&void 0!==t?t:"large"===s?736:378}),[t,s]),$=l.useMemo((function(){return null!==n&&void 0!==n?n:"large"===s?736:378}),[n,s]),ee={motionName:(0,z.by)(Q,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500};return l.createElement(P.K6,null,l.createElement(T.XB,{status:!0,override:!0},l.createElement(O,(0,m.A)({prefixCls:Q,onClose:_},L,{open:null!==C&&void 0!==C?C:j,mask:c,push:u,width:J,height:$,rootClassName:Z,getContainer:Y,afterOpenChange:function(e){null===q||void 0===q||q(e),null===B||void 0===B||B(e)},maskMotion:ee,motion:function(e){return{motionName:(0,z.by)(Q,"panel-motion-".concat(e)),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500}},rootStyle:k}),l.createElement("div",{className:"".concat(Q,"-wrapper-body"),style:(0,m.A)({},g)},S||i?l.createElement("div",{className:b()("".concat(Q,"-header"),(0,h.A)({},"".concat(Q,"-header-close-only"),i&&!S&&!R)),style:N},l.createElement("div",{className:"".concat(Q,"-header-title")},X,S&&l.createElement("div",{className:"".concat(Q,"-title")},S)),R&&l.createElement("div",{className:"".concat(Q,"-extra")},R)):null,l.createElement("div",{className:"".concat(Q,"-body"),style:f},w),function(){if(!E)return null;var e="".concat(Q,"-footer");return l.createElement("div",{className:e,style:I},E)}()))))};var R=n(50289),B=n(48193),q=n(5397),L=n(3428),W=n(61966),U=n(2543),H=n(70579);const{Option:G}=o.A,Q=e=>{let{setisAddCms:t,getAllData:n,setIsEditCms:r,isEditCms:d,currentStore:u,setNewRecord:m,newRecord:h}=e;const[x,p]=(0,l.useState)(!1),[v]=R.A.useForm();return(0,l.useEffect)((()=>{null!==d&&void 0!==d&&d.cmsId&&(p(!0),(0,U.W8)({id:null===d||void 0===d?void 0:d.cmsId}).then((e=>{v.setFieldsValue({tables:[null===e||void 0===e?void 0:e.data]}),p(!1)})).catch((e=>{console.log("err",e),p(!1)})))}),[null===d||void 0===d?void 0:d.cmsId]),(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(q.A,{spinning:x,children:(0,H.jsx)("div",{children:(0,H.jsxs)(R.A,{form:v,layout:"vertical",onFinish:e=>{const n=e.tables.map((e=>({...e,store_id:u})));if(null!==d&&void 0!==d&&d.cmsId){var l,s,a;let e={no_of_seats:null===(l=n[0])||void 0===l?void 0:l.no_of_seats,status:null===(s=n[0])||void 0===s?void 0:s.status,table_number:null===(a=n[0])||void 0===a?void 0:a.table_number};(0,U.FM)({id:null===d||void 0===d?void 0:d.cmsId,body:e}).then((e=>{r({isOpen:!1,cmsId:""}),m(h+1),B.Ay.success("Data updated successfully")})).catch((e=>console.log("err",e)))}else{var i;null===(i=(0,U.zF)({body:n}))||void 0===i||i.then((e=>{t(!1),m(h+1),B.Ay.success("Tables added successfully")})).catch((e=>{console.log("err :>> ",e)}))}},initialValues:{tables:[{status:"available"}]},children:[(0,H.jsx)(R.A.List,{name:"tables",children:(e,t)=>{let{add:n,remove:l}=t;return(0,H.jsxs)(H.Fragment,{children:[e.map(((t,n)=>(0,H.jsx)("div",{style:{marginBottom:20},children:(0,H.jsxs)(a.A,{gutter:16,align:"middle",children:[(0,H.jsx)(i.A,{xs:24,sm:24,md:24,lg:8,children:(0,H.jsx)(R.A.Item,{...t,label:"Table Number",name:[t.name,"table_number"],fieldKey:[t.fieldKey,"table_number"],rules:[{type:"string",message:"Table number must be a string."}],children:(0,H.jsx)(s.A,{placeholder:"Enter table number"})})}),(0,H.jsx)(i.A,{xs:24,sm:24,md:24,lg:8,children:(0,H.jsx)(R.A.Item,{...t,label:"Number of Seats",name:[t.name,"no_of_seats"],fieldKey:[t.fieldKey,"no_of_seats"],rules:[{required:!0,message:"Please enter the number of seats."},{type:"number",min:1,message:"Number of seats must be at least 1."}],children:(0,H.jsx)(L.A,{min:1,placeholder:"Enter number of seats",style:{width:"100%"}})})}),(0,H.jsx)(i.A,{xs:12,sm:12,md:12,lg:6,children:(0,H.jsx)(R.A.Item,{...t,label:"Status",name:[t.name,"status"],fieldKey:[t.fieldKey,"status"],rules:[{required:!0,message:"Please select the status."}],children:(0,H.jsxs)(o.A,{placeholder:"Select status",children:[(0,H.jsx)(G,{value:"available",children:"Available"}),(0,H.jsx)(G,{value:"booked",children:"Booked"}),(0,H.jsx)(G,{value:"service",children:"Service"}),(0,H.jsx)(G,{value:"preparing",children:"Preparing"})]})})}),(0,H.jsx)(i.A,{span:2,children:e.length>1&&(0,H.jsx)(W.A,{onClick:()=>l(t.name),style:{fontSize:"20px",color:"#ff4d4f",cursor:"pointer",marginTop:"30px"}})})]})},t.key))),!(null!==d&&void 0!==d&&d.cmsId)&&(0,H.jsx)(R.A.Item,{children:(0,H.jsx)(c.A,{type:"dashed",onClick:()=>n(),style:{width:"60%"},block:!0,children:"Add Another Table"})})]})}}),(0,H.jsxs)(R.A.Item,{style:{textAlign:"right"},children:[(0,H.jsx)(c.A,{onClick:()=>t(!1),style:{marginRight:8},children:"Cancel"}),(0,H.jsx)(c.A,{type:"primary",htmlType:"submit",children:"Submit"})]})]})})})})};var Y=n(41264),X=n(9254),Z=n(88655),J=n(89680),$=n(53815),ee=n(47807);const{Option:te}=o.A,ne=e=>{let{tableData:t,setVisible:n,visible:r,currentStore:d,allCms:u,setAllCms:m}=e;const[h,x]=(0,l.useState)(!1),[p,v]=(0,l.useState)([]),[b,y]=(0,l.useState)(!1),[f,g]=(0,l.useState)(""),[A,j]=(0,l.useState)([]),[C,w]=(0,l.useState)({orderNumber:"",tableNumber:"",items:[],subtotal:0,tax:0,total:0}),[k]=R.A.useForm(),S=(e,n)=>{let l=u.map((l=>l.id===t.id?(l.status=n,l.current_order=e,l):l));m(l)};(0,l.useEffect)((()=>{(0,ee.hV)({search:f}).then((e=>{v(e.data.rows)})).catch((e=>{B.Ay.error("Error While Fetching Items")}))}),[k,f]),(0,l.useEffect)((()=>{j([]),y(!1),w({orderNumber:"",tableNumber:"",items:[],subtotal:0,tax:0,total:0})}),[r]);(0,l.useEffect)((()=>{var e;r&&(k.resetFields(),k.setFieldsValue({table_id:t.id}),t.current_order&&(e=t.current_order,x(!0),(0,$.W8)({id:e}).then((e=>{k.setFieldsValue(null===e||void 0===e?void 0:e.data);let n=null===e||void 0===e?void 0:e.data,l={orderNumber:n.id,tableNumber:t.table_number,items:n.order_items,subtotal:n.total_price||0,tax:n.tax_precent||0,total:n.total_price||0,organisation:n.Organisation};w(l),x(!1)})).catch((e=>{var t;B.Ay.error((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Something Went Wrong"),console.log("err",e),x(!1)}))))}),[k,r]);const N=()=>{var e;let t=k.getFieldsValue(["order_items"]),n=0;null===t||void 0===t||null===(e=t.order_items)||void 0===e||e.map((e=>{let t=Number(null===e||void 0===e?void 0:e.price)*Number(null===e||void 0===e?void 0:e.quantity);n+=t}));let l=k.getFieldValue("tax_precent"),r=k.getFieldValue("discount_precent");n+=.01*l*n,n-=.01*r*n,k.setFieldValue("total_price",n)};return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(q.A,{spinning:h,children:(0,H.jsx)("div",{children:(0,H.jsxs)(R.A,{name:"order",form:k,layout:"vertical",onChange:N,onFinish:e=>{const l=e;var r;(l.table_id=l.table_id.toString(),t.current_order)?(l.order_items=[...l.order_items,...A],(0,$.FM)({id:t.current_order,body:l}).then((e=>{let n="paid"===l.status?"available":"booked",r="paid"===l.status?null:t.current_order;S(r,n),B.Ay.success("Data updated successfully")})).catch((e=>{B.Ay.error("Something Went Wrong"),console.log("err :>> ",e)}))):(l.store_id=d,null===(r=(0,$.zF)({body:l}))||void 0===r||r.then((e=>{var t;let r="paid"===l.status?null:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id,s="paid"===l.status?"available":"booked";S(r,s),B.Ay.success("Data added successfully"),n(!1)})).catch((e=>{B.Ay.error("Something Went Wrong"),console.log("err :>> ",e)})))},autoComplete:"off",children:[(0,H.jsxs)(a.A,{gutter:16,children:[(0,H.jsx)(i.A,{span:12,children:(0,H.jsx)(R.A.Item,{label:"Table number",name:"table_id",rules:[{required:!0,message:"Please select the table ID"}],children:(0,H.jsx)(o.A,{children:(0,H.jsxs)(te,{value:t.id,children:[t.table_number," - "," ("+t.no_of_seats+" Seater )"]})})})}),(0,H.jsx)(i.A,{span:12,children:(0,H.jsx)(R.A.Item,{label:"Customer Name",name:"customer_name",children:(0,H.jsx)(s.A,{})})})]}),(0,H.jsxs)(a.A,{gutter:16,children:[(0,H.jsx)(i.A,{xs:12,sm:12,md:12,lg:8,children:(0,H.jsx)(R.A.Item,{label:"Total Price",name:"total_price",rules:[{required:!0,message:"Please enter the total price"}],children:(0,H.jsx)(L.A,{min:0,precision:2,style:{width:"100%"}})})}),(0,H.jsx)(i.A,{xs:12,sm:12,md:12,lg:8,children:(0,H.jsx)(R.A.Item,{label:"Discount Percent",name:"discount_precent",initialValue:0,children:(0,H.jsx)(L.A,{min:0,max:100,precision:2,style:{width:"100%"}})})}),(0,H.jsx)(i.A,{xs:12,sm:12,md:12,lg:8,children:(0,H.jsx)(R.A.Item,{label:"Gst",name:"tax_precent",initialValue:5,children:(0,H.jsx)(L.A,{min:0,max:100,precision:2,style:{width:"100%"}})})})]}),(0,H.jsxs)(a.A,{gutter:16,children:[(0,H.jsx)(i.A,{xs:12,sm:12,md:12,lg:8,children:(0,H.jsx)(R.A.Item,{label:"Order Status",name:"status",initialValue:"pending",children:(0,H.jsxs)(o.A,{children:[(0,H.jsx)(te,{value:"pending",children:"Pending"}),(0,H.jsx)(te,{value:"preparing",children:"Preparing"}),(0,H.jsx)(te,{value:"served",children:"Served"}),(0,H.jsx)(te,{value:"paid",children:"Paid"}),(0,H.jsx)(te,{value:"canceled",children:"Canceled"})]})})}),(0,H.jsx)(i.A,{xs:12,sm:12,md:12,lg:8,children:(0,H.jsx)(R.A.Item,{label:"Table Status",name:"free_table",valuePropName:"checked",children:(0,H.jsx)(Y.A,{checkedChildren:"Available",unCheckedChildren:"Booked"})})})]}),(0,H.jsx)(R.A.List,{name:"order_items",children:(e,n)=>{let{add:l,remove:r}=n;return(0,H.jsxs)(H.Fragment,{children:[e.map((e=>{let{key:n,name:l,fieldKey:o,...c}=e;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("hr",{style:{margin:"20px 0",borderColor:"#e8e8e8"}}),(0,H.jsxs)(a.A,{gutter:16,align:"middle",children:[(0,H.jsx)(i.A,{xs:12,sm:12,md:12,lg:6,children:(0,H.jsx)(R.A.Item,{...c,name:[l,"item_id"],fieldKey:[o,"item_id"],label:"Item Code",rules:[{required:!0,message:"Please select the item ID"}],children:(0,H.jsx)(X.A,{onSearch:e=>{g(e)},onSelect:e=>{const t=p.find((t=>t.id===e));k.setFieldsValue({order_items:{[l]:{item_name:null===t||void 0===t?void 0:t.name,price:null===t||void 0===t?void 0:t.price,quantity:1}}}),N()},options:p.map((e=>({value:e.id,label:"".concat(e.name," - ").concat(e.item_code)})))})})}),(0,H.jsx)(i.A,{xs:12,sm:12,md:12,lg:6,children:(0,H.jsx)(R.A.Item,{...c,name:[l,"item_name"],fieldKey:[o,"item_name"],label:"Item Name",rules:[{required:!0,message:"Please enter the item name"}],children:(0,H.jsx)(s.A,{})})}),(0,H.jsx)(i.A,{xs:8,sm:12,md:12,lg:4,children:(0,H.jsx)(R.A.Item,{...c,name:[l,"quantity"],fieldKey:[o,"quantity"],label:"Quantity",rules:[{required:!0,message:"Please enter the quantity"}],children:(0,H.jsx)(L.A,{min:0,style:{width:"100%"}})})}),(0,H.jsx)(i.A,{xs:12,sm:12,md:12,lg:6,children:(0,H.jsx)(R.A.Item,{...c,name:[l,"price"],fieldKey:[o,"price"],label:"Unit Price",rules:[{required:!0,message:"Please enter the price"}],children:(0,H.jsx)(L.A,{min:0,precision:2,style:{width:"100%"}})})}),(0,H.jsx)(i.A,{span:2,children:(0,H.jsx)(Z.A,{onClick:()=>{const e=k.getFieldValue("order_items")[l];if(r(l),t.current_order){let t=A;t.push({...e,deleted:!0}),j(t)}N()},style:{fontSize:"20px",color:"red"}})})]},n)]})})),(0,H.jsx)(R.A.Item,{children:(0,H.jsx)(c.A,{type:"dashed",onClick:()=>l(),block:!0,children:"Add Item"})})]})}}),(0,H.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,H.jsx)(c.A,{onClick:()=>{n(!1)},children:"Cancel"}),(0,H.jsx)(c.A,{onClick:()=>{(null===C||void 0===C?void 0:C.orderNumber)>""?y(!b):B.Ay.warning("Please Save the Order")},children:"View Bill"}),(0,H.jsx)(c.A,{type:"primary",htmlType:"submit",loading:h,children:"Submit"})]})]})})}),(0,H.jsx)("div",{className:"mt-4",children:b&&(0,H.jsx)(J.A,{orderDetails:C})})]})};var le=n(77047),re=n(1068),se=n(2013),ae=n(8387),ie=n(28440),oe=n(76191),ce=n(75337),de=n(48646),ue=n(78240);const{Text:me,Title:he}=le.A,{Panel:xe}=re.A,pe=e=>{let{allData:t,setIsEditCms:n,setTableData:l,setVisible:r}=e;return(0,H.jsx)("div",{style:{padding:"1px"},children:(0,H.jsx)(a.A,{gutter:[16,16],children:t.map((e=>(0,H.jsx)(i.A,{xs:24,sm:12,md:8,lg:6,children:(0,H.jsxs)(se.A,{title:(0,H.jsx)(he,{level:5,children:(0,H.jsxs)("div",{className:"flex justify-between items-center",children:[(0,H.jsxs)("span",{className:"text-sm sm:text-base",children:["Table No:- ",e.table_number]}),(0,H.jsx)("span",{className:"ml-5 sm:ml-16 ",onClick:()=>{r(!0),l(e)},children:e.current_order?(0,H.jsxs)(ae.A,{color:"blue",children:[(0,H.jsx)(oe.A,{className:"mr-1"}),"view Order"]}):(0,H.jsxs)(ae.A,{color:"green",children:[(0,H.jsx)(ce.A,{className:"mr-1"}),"Add Order"]})})]})}),bordered:!1,style:{boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",borderRadius:"8px"},children:[(0,H.jsx)(me,{strong:!0,children:"#ID: "}),(0,H.jsx)(me,{children:e.id}),(0,H.jsx)("br",{}),(0,H.jsx)(me,{strong:!0,children:"Total Seats: "}),(0,H.jsx)(me,{children:e.no_of_seats}),(0,H.jsx)("br",{}),(0,H.jsx)(me,{strong:!0,children:"Status: "}),"available"===e.status?(0,H.jsx)(ae.A,{color:"green",children:e.status}):(0,H.jsx)(ae.A,{color:"red",children:e.status}),(0,H.jsx)("br",{}),e.current_order&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(me,{strong:!0,children:"Current Order: "}),"#"+e.current_order]}),!e.current_order&&(0,H.jsx)(H.Fragment,{children:(0,H.jsx)(me,{strong:!0,children:"Waiting For Orders"})}),(0,H.jsxs)("div",{className:"flex justify-between mt-2",children:[(0,H.jsx)(de.A,{onClick:()=>n({isOpen:!0,cmsId:null===e||void 0===e?void 0:e.id}),style:{cursor:"pointer",color:"#1890ff"}}),(0,H.jsx)(ie.A,{title:"Are you sure to delete this Table?",onConfirm:()=>{},okText:"Yes",cancelText:"No",children:(0,H.jsx)(ue.A,{onClick:()=>{},style:{cursor:"pointer",color:"#ff4d4f"}})})]})]})},e.id)))})})};var ve=n(40925),be=n(91734),ye=n(57043),fe=n(70495);const{Search:ge}=s.A,Ae=()=>{const[e,t]=(0,l.useState)(!1),[n,s]=(0,l.useState)(0),[m,h]=(0,l.useState)(""),[x,p]=(0,l.useState)(""),[v,b]=(0,r.fp)(fe.qt),[y,f]=(0,r.fp)(fe.oc),[g,A]=(0,l.useState)(!1),[j,C]=(0,l.useState)(0),[w,k]=(0,l.useState)(0),[S,N]=(0,l.useState)(!1),[_,E]=(0,l.useState)({isOpen:!1,cmsId:""}),[I,O]=(0,l.useState)([]),F=e=>{let{search:t,type:l,isAvailable:r}=e;(0,U.xH)({start:n,limit:12,search:t,type:l,isAvailable:r,store_id:v}).then((e=>{var t,n;e&&(O(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows),k(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.count))})).catch((e=>console.log("err",e)))};(0,l.useEffect)((()=>{F({search:m,type:x,isAvailable:g})}),[m,x,g,v,j,n]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(be.z,{title:"Tables",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/tables",breadcrumbName:"Tables"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,H.jsx)(ve.rQ,{className:"p-3",children:(0,H.jsx)(a.A,{gutter:16,children:(0,H.jsx)(i.A,{sm:24,xs:24,lg:24,className:"",children:(0,H.jsxs)(ye.C,{title:(0,H.jsx)("div",{children:(0,H.jsxs)(a.A,{gutter:[16,16],align:"middle",children:[(0,H.jsx)(i.A,{xs:24,sm:12,md:6,children:(0,H.jsxs)(o.A,{style:{width:"100%"},size:"medium",placeholder:"Status",onChange:e=>{p(e)},children:[(0,H.jsx)(Option,{value:"",children:"All"}),(0,H.jsx)(Option,{value:"booked",children:"Booked"}),(0,H.jsx)(Option,{value:"available",children:"Available"}),(0,H.jsx)(Option,{value:"service",children:"Service"}),(0,H.jsx)(Option,{value:"preparing",children:"Preparing"})]})}),(0,H.jsx)(i.A,{xs:24,sm:8,md:6,children:(0,H.jsx)(ge,{placeholder:"Table number",allowClear:!0,enterButton:"Search",size:"medium",onSearch:e=>{h(e)},style:{width:"100%"}})})]})}),moreBtn:(0,H.jsx)(c.A,{type:"primary",onClick:()=>t(!0),children:"Add"}),children:[(0,H.jsx)(pe,{allData:I,setIsEditCms:E,setTableData:f,setVisible:N}),(0,H.jsx)("div",{className:"mt-2 flex justify-end",children:(0,H.jsx)(d.A,{pageSize:12,total:w,onChange:e=>{s(10*(e-1))},showSizeChanger:!1})})]})})})}),(0,H.jsx)(u.A,{title:"".concat(e?"Add Tables":"Edit Table"),destroyOnClose:!0,open:e||_.isOpen,width:1024,footer:!1,onCancel:()=>{t(!1),E({isOpen:!1,cmsId:""})},children:(0,H.jsx)(Q,{setisAddCms:t,getAllData:F,isEditCms:_,setIsEditCms:E,currentStore:v,newRecord:j,setNewRecord:C})}),(0,H.jsx)(V,{title:y.current_order?"Update Order #"+y.current_order:"Add Order",placement:"right",onClose:()=>{N(!1)},open:S,width:window.innerWidth<768?300:600,children:(0,H.jsx)(ne,{setVisible:N,tableData:y,visible:S,allCms:I,setAllCms:O,currentStore:v})})]})}},53815:(e,t,n)=>{n.d(t,{FM:()=>i,FN:()=>o,W8:()=>a,hV:()=>s,zF:()=>r});var l=n(32170);const r=async e=>{let{body:t}=e;return await l.p.post("/orders",t)},s=async e=>{let{start:t,limit:n,status:r,search:s,dates:a,currentStore:i}=e,o=s?"&search=".concat(s):"",c=r?"&status=".concat(r):"",d=i?"&store_id=".concat(i):"",u="";2===a.length&&(u="&start_date=".concat(a[0],"&end_date=").concat(a[1]));return await l.p.get("/orders?start=".concat(t,"&limit=").concat(n).concat(o).concat(c).concat(u).concat(d))},a=async e=>{let{id:t}=e;return await l.p.get("/orders/".concat(t))},i=async e=>{let{id:t,body:n}=e;return await l.p.patch("/orders/".concat(t),n)},o=async e=>{let{id:t}=e;return await l.p.delete("/orders/".concat(t))}},47807:(e,t,n)=>{n.d(t,{FM:()=>i,FN:()=>o,W8:()=>a,hV:()=>s,zF:()=>r});var l=n(32170);const r=async e=>{let{body:t}=e;return await l.p.post("/restroItems",t)},s=async e=>{let{start:t=0,limit:n=10,search:r}=e,s=r?"&search=".concat(r):"";return await l.p.get("/restroItems?start=".concat(t,"&limit=").concat(n).concat(s))},a=async e=>{let{id:t}=e;return await l.p.get("/restroItems/".concat(t))},i=async e=>{let{id:t,body:n}=e;return await l.p.patch("/restroItems/".concat(t),n)},o=async e=>{let{id:t}=e;return await l.p.delete("/restroItems/".concat(t))}},2543:(e,t,n)=>{n.d(t,{FM:()=>i,W8:()=>a,xH:()=>s,zF:()=>r});var l=n(32170);const r=async e=>{let{body:t}=e;return await l.p.post("/tables",t)},s=async e=>{let{start:t=0,limit:n=10,search:r,type:s,isAvailable:a,store_id:i}=e,o=r?"&search=".concat(r):"",c=s?"&status=".concat(s):"",d=i?"&store_id=".concat(i):"",u=a?"&isAvailable=".concat(a):"";return await l.p.get("/tables?start=".concat(t,"&limit=").concat(n).concat(o).concat(c).concat(u).concat(d))},a=async e=>{let{id:t}=e;return await l.p.get("/tables/".concat(t))},i=async e=>{let{id:t,body:n}=e;return await l.p.patch("/tables/".concat(t),n)}},61966:(e,t,n)=>{n.d(t,{A:()=>o});var l=n(89379),r=n(65043);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var a=n(22172),i=function(e,t){return r.createElement(a.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:s}))};i.displayName="DeleteOutlined";const o=r.forwardRef(i)},41264:(e,t,n)=>{n.d(t,{A:()=>A});var l=n(58168),r=n(64467),s=n(40164),a=n(64600),i=n.n(a),o=n(5544),c=n(80045),d=n(65043),u=n(28678),m=n(25001),h=d.forwardRef((function(e,t){var n,l=e.prefixCls,s=void 0===l?"rc-switch":l,a=e.className,h=e.checked,x=e.defaultChecked,p=e.disabled,v=e.loadingIcon,b=e.checkedChildren,y=e.unCheckedChildren,f=e.onClick,g=e.onChange,A=e.onKeyDown,j=(0,c.A)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),C=(0,u.A)(!1,{value:h,defaultValue:x}),w=(0,o.A)(C,2),k=w[0],S=w[1];function N(e,t){var n=k;return p||(S(n=e),null===g||void 0===g||g(n,t)),n}var _=i()(s,a,(n={},(0,r.A)(n,"".concat(s,"-checked"),k),(0,r.A)(n,"".concat(s,"-disabled"),p),n));return d.createElement("button",Object.assign({},j,{type:"button",role:"switch","aria-checked":k,disabled:p,className:_,ref:t,onKeyDown:function(e){e.which===m.A.LEFT?N(!1,e):e.which===m.A.RIGHT&&N(!0,e),null===A||void 0===A||A(e)},onClick:function(e){var t=N(!k,e);null===f||void 0===f||f(t,e)}}),v,d.createElement("span",{className:"".concat(s,"-inner")},k?b:y))}));h.displayName="Switch";const x=h;var p=n(35296),v=n(78440),b=n(87063),y=n(16021),f=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]])}return n},g=d.forwardRef((function(e,t){var n,a=e.prefixCls,o=e.size,c=e.disabled,u=e.loading,m=e.className,h=void 0===m?"":m,g=f(e,["prefixCls","size","disabled","loading","className"]),A=d.useContext(p.QO),j=A.getPrefixCls,C=A.direction,w=d.useContext(b.A),k=d.useContext(v.A),S=(null!==c&&void 0!==c?c:k)||u,N=j("switch",a),_=d.createElement("div",{className:"".concat(N,"-handle")},u&&d.createElement(s.A,{className:"".concat(N,"-loading-icon")})),E=i()((n={},(0,r.A)(n,"".concat(N,"-small"),"small"===(o||w)),(0,r.A)(n,"".concat(N,"-loading"),u),(0,r.A)(n,"".concat(N,"-rtl"),"rtl"===C),n),h);return d.createElement(y.A,{insertExtraNode:!0},d.createElement(x,(0,l.A)({},g,{prefixCls:N,className:E,disabled:S,ref:t,loadingIcon:_})))}));g.__ANT_SWITCH=!0;const A=g}}]);
//# sourceMappingURL=471.4b1a007e.chunk.js.map