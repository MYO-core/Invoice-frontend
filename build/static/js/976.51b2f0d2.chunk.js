"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[976],{5976:(e,n,t)=>{t.r(n),t.d(n,{default:()=>j});var o=t(5043),l=t(3307),s=t(1802),a=t(6059),r=t(8193),i=t(9800),c=t(1645),d=t(2217),u=t(4435),m=t(802),p=t(289),h=t(5397),v=t(8186),x=t(6157),f=t(579);const A=e=>{let{setisAddRoom:n,isEditRoom:t,setIsEditRoom:a,getAllRoomList:u}=e;const[m,A]=(0,o.useState)(!1),[y,g]=(0,o.useState)(),[C,b]=(0,o.useState)(!1),[j,E]=(0,o.useState)(!1),[O]=p.A.useForm(),S=["Users","Roles","Invoices","Customers","Stores","Company"],w=["add","edit","view","delete"];return(0,o.useEffect)((()=>{null!==t&&void 0!==t&&t.roleId&&(b(!0),(0,x.xF)({id:null===t||void 0===t?void 0:t.roleId}).then((e=>{var n;let t=null===e||void 0===e?void 0:e.data;const o={name:t.name};null===t||void 0===t||null===(n=t.permission)||void 0===n||n.forEach((e=>{w.forEach((n=>{o["".concat(e.module,"-").concat(n)]=e[n]}))})),O.setFieldsValue(o),b(!1)})).catch((e=>{console.log("err",e),b(!1)})))}),[null===t||void 0===t?void 0:t.roleId]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.A,{spinning:C,children:(0,f.jsx)("div",{children:(0,f.jsxs)(p.A,{form:O,name:"Roles",labelCol:{span:8},wrapperCol:{span:16},onFinish:e=>{const o=S.map((n=>{const t={};return w.forEach((o=>{t[o]=e["".concat(n,"-").concat(o)]||!1})),{module:n,...t}})),l={name:e.name,permission:o};var s;null!==t&&void 0!==t&&t.roleId?(0,x.S0)({id:null===t||void 0===t?void 0:t.roleId,body:l}).then((e=>{a({isOpen:!1,roleId:""}),u(),r.Ay.success("Role updated successfully")})).catch((e=>{console.log("err",e),r.Ay.error("Something Went Wrong")})):null===(s=(0,x.vZ)({body:l}))||void 0===s||s.then((e=>{n(!1),u(),r.Ay.success("Role added successfully")})).catch((e=>{console.log("err :>> ",e),r.Ay.error("Something Went Wrong")}))},autoComplete:"off",children:[(0,f.jsx)(i.A,{gutter:16,children:(0,f.jsx)(c.A,{span:12,children:(0,f.jsx)(p.A.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Required! "}],children:(0,f.jsx)(l.A,{})})})}),S.map((e=>(0,f.jsx)(i.A,{gutter:24,children:(0,f.jsx)(c.A,{span:24,children:(0,f.jsx)(p.A.Item,{label:e,labelCol:{span:4},wrapperCol:{span:20},children:w.map((n=>(0,f.jsx)(p.A.Item,{name:"".concat(e,"-").concat(n),valuePropName:"checked",noStyle:!0,children:(0,f.jsx)(v.A,{children:n.charAt(0).toUpperCase()+n.slice(1)})},"".concat(e,"-").concat(n))))})})},e))),(0,f.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,f.jsx)(s.A,{onClick:()=>{n(!1),a({isOpen:!1,RoleId:""})},children:"Cancel"}),(0,f.jsx)(s.A,{type:"primary",htmlType:"submit",loading:j,children:"Submit"})]})]})})}),(0,f.jsx)(d.A,{width:700,title:y,open:m,footer:null,onCancel:()=>{A(!1)},destroyOnClose:!0})]})};var y=t(925),g=t(1734),C=t(7043);const{Search:b}=l.A,j=()=>{const[e,n]=(0,o.useState)(0),[t,l]=(0,o.useState)(0),[p,h]=(0,o.useState)(!1),[v,j]=(0,o.useState)({isOpen:!1,roleId:""}),[E,O]=(0,o.useState)([]),[S,w]=(0,o.useState)(""),[R,k]=(0,o.useState)(""),N=[{title:"name",dataIndex:"name",key:"name",width:140},{title:"Action",key:"action",render:(e,n)=>(0,f.jsxs)(u.A,{size:"middle",children:[(0,f.jsx)(s.A,{size:"middle",onClick:()=>{j({isOpen:!0,roleId:null===n||void 0===n?void 0:n.id}),console.log(v)},children:"Edit"}),(0,f.jsx)(a.A,{title:"Are you sure to delete this role?",onConfirm:()=>{(0,x.EO)({id:null===n||void 0===n?void 0:n.id}).then((e=>{console.log("res",e),r.Ay.success("Role Deleted Successfully"),I()})).catch((e=>{console.log("err",e),r.Ay.error("Something Went Wrong")}))},okText:"Yes",cancelText:"No",children:(0,f.jsx)(s.A,{danger:!0,size:"middle",children:"Delete"})})]}),width:150}],I=()=>{(0,x.L_)({}).then((e=>{var n;e&&O(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.data)})).catch((e=>console.log("err",e)))};(0,o.useEffect)((()=>{I()}),[S,R]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.z,{title:"Roles",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/roles",breadcrumbName:"Roles"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,f.jsx)(y.rQ,{className:"p-3",children:(0,f.jsx)(i.A,{gutter:16,children:(0,f.jsx)(c.A,{sm:24,xs:24,lg:24,className:"",children:(0,f.jsx)(C.C,{title:(0,f.jsx)("div",{className:"flex items-center gap-4",children:(0,f.jsx)("div",{children:(0,f.jsx)(b,{placeholder:"Search",allowClear:!0,enterButton:"Search",size:"middle",onSearch:e=>{w(e)}})})}),moreBtn:(0,f.jsx)(s.A,{type:"primary",onClick:()=>h(!0),children:"Add"}),border:!1,size:"default",children:(0,f.jsx)(m.A,{scroll:{x:"100%",y:"auto"},size:"small",columns:N,dataSource:E,pagination:{total:e,onChange:e=>{l(10*(e-1))}}})})})})}),(0,f.jsx)(d.A,{title:"".concat(p?"Add Role":"Edit Role"),destroyOnClose:!0,open:p||v.isOpen,footer:!1,onCancel:()=>{h(!1),j({isOpen:!1,roleId:""})},children:(0,f.jsx)(A,{setisAddRoom:h,isEditRoom:v,setIsEditRoom:j,getAllRoomList:I})})]})}},6157:(e,n,t)=>{t.d(n,{EO:()=>i,L_:()=>s,S0:()=>r,vZ:()=>l,xF:()=>a});var o=t(2170);const l=async e=>{let{body:n}=e;return await o.p.post("/roles",n)},s=async e=>{let{start:n,limit:t,RoleNumber:l,status:s}=e;return await o.p.get("/roles?start=".concat(n,"&limit=").concat(t))},a=async e=>{let{id:n}=e;return await o.p.get("/roles/".concat(n))},r=async e=>{let{id:n,body:t}=e;return await o.p.patch("/roles/".concat(n),t)},i=async e=>{let{id:n}=e;return await o.p.delete("/roles/".concat(n))}},6059:(e,n,t)=>{t.d(n,{A:()=>j});var o=t(8168),l=t(5544),s=t(1376),a=t(4600),r=t.n(a),i=t(8678),c=t(5001),d=t(5043),u=t(5296),m=t(6282),p=t(2701),h=t(1802),v=t(3085),x=t(8046),f=t(8097),A=t(8376),y=t(8986),g=function(e){var n=e.prefixCls,t=e.okButtonProps,l=e.cancelButtonProps,s=e.title,a=e.cancelText,r=e.okText,i=e.okType,c=e.icon,m=e.showCancel,p=void 0===m||m,g=e.close,C=e.onConfirm,b=e.onCancel,j=d.useContext(u.QO).getPrefixCls;return d.createElement(f.A,{componentName:"Popconfirm",defaultLocale:A.A.Popconfirm},(function(e){return d.createElement("div",{className:"".concat(n,"-inner-content")},d.createElement("div",{className:"".concat(n,"-message")},c&&d.createElement("span",{className:"".concat(n,"-message-icon")},c),d.createElement("div",{className:"".concat(n,"-message-title")},(0,y.b)(s))),d.createElement("div",{className:"".concat(n,"-buttons")},p&&d.createElement(h.A,(0,o.A)({onClick:b,size:"small"},l),null!==a&&void 0!==a?a:e.cancelText),d.createElement(x.A,{buttonProps:(0,o.A)((0,o.A)({size:"small"},(0,v.D)(i)),t),actionFn:C,close:g,prefixCls:j("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!==r&&void 0!==r?r:e.okText)))}))},C=void 0,b=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(o=Object.getOwnPropertySymbols(e);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(t[o[l]]=e[o[l]])}return t};const j=d.forwardRef((function(e,n){var t=e.prefixCls,a=e.placement,h=void 0===a?"top":a,v=e.trigger,x=void 0===v?"click":v,f=e.okType,A=void 0===f?"primary":f,y=e.icon,j=void 0===y?d.createElement(s.A,null):y,E=e.children,O=e.overlayClassName,S=e.onOpenChange,w=e.onVisibleChange,R=b(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),k=d.useContext(u.QO).getPrefixCls,N=(0,i.A)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),I=(0,l.A)(N,2),P=I[0],T=I[1],z=function(e,n){T(e,!0),null===w||void 0===w||w(e,n),null===S||void 0===S||S(e,n)},F=k("popover",t),V=k("popconfirm",t),D=r()(V,O);return d.createElement(m.A,(0,o.A)({},R,{trigger:x,prefixCls:F,placement:h,onOpenChange:function(n){var t=e.disabled;void 0!==t&&t||z(n)},open:P,ref:n,overlayClassName:D,_overlay:d.createElement(g,(0,o.A)({okType:A,icon:j},e,{prefixCls:F,close:function(e){z(!1,e)},onConfirm:function(n){var t;return null===(t=e.onConfirm)||void 0===t?void 0:t.call(C,n)},onCancel:function(n){var t;z(!1,n),null===(t=e.onCancel)||void 0===t||t.call(C,n)}}))}),(0,p.Ob)(E,{onKeyDown:function(e){var n,t;d.isValidElement(E)&&(null===(t=null===E||void 0===E?void 0:(n=E.props).onKeyDown)||void 0===t||t.call(n,e)),function(e){e.keyCode===c.A.ESC&&P&&z(!1,e)}(e)}}))}))}}]);
//# sourceMappingURL=976.51b2f0d2.chunk.js.map