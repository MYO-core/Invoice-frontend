"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[582],{582:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var l=r(5043),n=r(6558),a=r(4435),s=r(1802),o=r(6059),i=r(8193),d=r(9800),c=r(1645),u=r(4406),m=r(9524),h=r(2217),p=r(6178),x=r.n(p),v=r(289),A=r(5397),y=r(6252),f=r(2170);var j=r(6157),b=r(579);const{Option:g}=u.A,C=e=>{let{setIsAddOrder:t,isEditOrder:r,setIsEditOrder:a,getAllOrder:o}=e;const[m,h]=(0,l.useState)(!1),[p,C]=(0,l.useState)([]),[O,k]=(0,l.useState)({}),[w]=v.A.useForm();(0,l.useEffect)((()=>{null!==r&&void 0!==r&&r.orderId&&(h(!0),(async e=>{let{id:t}=e;return await f.p.get("/orders/".concat(t))})({id:null===r||void 0===r?void 0:r.orderId}).then((e=>{const t=e.data;t.checkInDate=x()(t.checkInDate),t.checkOutDate=x()(t.checkOutDate),C([{_id:t.roomId,roomNumber:t.roomNumber}]),w.setFieldsValue(t),h(!1)})).catch((e=>{console.log("err",e),h(!1)})))}),[null===r||void 0===r?void 0:r.orderId]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(A.A,{spinning:m}),(0,b.jsx)("div",{children:(0,b.jsxs)(v.A,{form:w,name:"orders",labelCol:{span:8},wrapperCol:{span:16},onFinish:e=>{const l=e;var n;(h(!0),null!==r&&void 0!==r&&r.orderId)?(async e=>{let{id:t,body:r}=e;return await f.p.put("/orders/".concat(t),r)})({id:null===r||void 0===r?void 0:r.orderId,body:l}).then((e=>{a({isOpen:!1,orderId:""}),o(),i.Ay.success("Order updated successfully")})).catch((e=>{i.Ay.error("Room Already Booked")})):null===(n=(async e=>{let{body:t}=e;return await f.p.post("/orders",t)})({body:l}))||void 0===n||n.then((e=>{i.Ay.success("Order added successfully"),t(!1),o({start:0,limit:10}),h(!1)})).catch((e=>{i.Ay.error("Room is already Booked"),console.log("err :>> ",e),h(!1)}))},autoComplete:"off",children:[(0,b.jsxs)(d.A,{gutter:16,children:[" ",(0,b.jsxs)(c.A,{span:12,children:[" ",(0,b.jsx)(v.A.Item,{label:"Name",name:"customerName",rules:[{required:!0,message:"Required! "}],children:(0,b.jsx)(n.A,{})})]}),(0,b.jsx)(c.A,{span:12,children:(0,b.jsx)(v.A.Item,{label:"Email",name:"customerEmail",rules:[{required:!0,message:"Required! "}],children:(0,b.jsx)(n.A,{})})})]}),(0,b.jsxs)(d.A,{gutter:16,children:[(0,b.jsx)(c.A,{span:12,children:(0,b.jsx)(v.A.Item,{label:"Check-in Date",name:"checkInDate",rules:[{required:!0,message:"Required! "}],children:(0,b.jsx)(y.A,{})})}),(0,b.jsx)(c.A,{span:12,children:(0,b.jsx)(v.A.Item,{label:"Check-out Date",name:"checkOutDate",rules:[{required:!0,message:"Required! "}],children:(0,b.jsx)(y.A,{})})})]}),(0,b.jsxs)(d.A,{gutter:16,children:[(0,b.jsx)(c.A,{span:12,children:(0,b.jsx)(v.A.Item,{label:"Amount",name:"amountToBePaid",rules:[{required:!0,message:"Required! "}],children:(0,b.jsx)(n.A,{})})}),(0,b.jsx)(c.A,{span:12,children:(0,b.jsx)(v.A.Item,{label:"Room Number",name:"roomId",rules:[{}],children:(0,b.jsx)(u.A,{showSearch:!0,placeholder:"Select room number",loading:m,filterOption:!1,onSearch:async e=>{h(!0),(0,j.L_)({roomNumber:e}).then((e=>{var t;const r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rooms;C(r),h(!1)})).catch((e=>{i.Ay.error("Error fetching room suggestions"),h(!1)}))},optionLabelProp:"children",children:p.map((e=>(0,b.jsx)(g,{value:e._id,children:e.roomNumber},e._id)))})})})]}),(0,b.jsxs)(d.A,{gutter:16,children:[(0,b.jsx)(c.A,{span:12,children:(0,b.jsx)(v.A.Item,{name:"roomType",label:"Room Type",children:(0,b.jsxs)(u.A,{placeholder:"Select option...",allowClear:!0,children:[(0,b.jsx)(g,{value:"Standard",children:"Standard"}),(0,b.jsx)(g,{value:"Deluxe",children:"Deluxe"}),(0,b.jsx)(g,{value:"Suite",children:"Suite"})]})})}),(0,b.jsx)(c.A,{span:12,children:(0,b.jsx)(v.A.Item,{name:"status",label:"Status",children:(0,b.jsxs)(u.A,{placeholder:"Select option...",allowClear:!0,children:[(0,b.jsx)(g,{value:"payment_pending",children:"Payment Pending"}),(0,b.jsx)(g,{value:"completed",children:"Completed"}),(0,b.jsx)(g,{value:"confirmed",children:"Confirmed"})]})})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,b.jsx)(s.A,{onClick:()=>{t(!1),a({isOpen:!1,orderId:""})},children:"Cancel"}),(0,b.jsx)(s.A,{type:"primary",htmlType:"submit",children:"Submit"})]})]})})]})};var O=r(925),k=r(1734),w=r(7043);const{Search:I}=n.A,N=()=>{const[e,t]=(0,l.useState)([]),[r,n]=(0,l.useState)(!1),[p,v]=(0,l.useState)({}),[A,y]=(0,l.useState)(""),[j,g]=(0,l.useState)(""),N=()=>{(async e=>{let{start:t,limit:r,search:l,status:n}=e;return await f.p.get("/orders?start=".concat(t,"&limit=").concat(r,"&status=").concat(n||"","&search=").concat(l||""))})({search:A,status:j}).then((e=>{var r;e&&t(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.data)})).catch((e=>console.log("err",e)))};(0,l.useEffect)((()=>{N()}),[A,j]);const E=[{title:"Name",dataIndex:"customerName",key:"customerName",width:150},{title:"Email",dataIndex:"customerEmail",key:"customerEmail",width:150},{title:"Check In",dataIndex:"checkInDate",key:"checkInDate",width:150,render:e=>x()(e).format("YYYY-MM-DD")},{title:"Check Out",dataIndex:"checkOutDate",key:"checkOutDate",width:150,render:e=>x()(e).format("YYYY-MM-DD")},{title:"Room Number",dataIndex:"roomNumber",key:"roomNumber",width:150,render:e=>e||"-"},{title:"Status",dataIndex:"status",key:"status",width:150},{title:"Action",key:"action",render:(e,t)=>(0,b.jsxs)(a.A,{size:"middle",children:[(0,b.jsx)(s.A,{size:"middle",onClick:()=>v({isOpen:!0,orderId:null===t||void 0===t?void 0:t._id}),children:"Edit"}),(0,b.jsx)(o.A,{title:"Are you sure to delete this Order?",onConfirm:()=>{(async e=>{let{id:t}=e;return await f.p.delete("/orders/".concat(t))})({id:null===t||void 0===t?void 0:t._id}).then((e=>{i.Ay.success("Order Deleted Successfully"),N()})).catch((e=>console.log("err",e)))},okText:"Yes",cancelText:"No",children:(0,b.jsx)(s.A,{danger:!0,size:"middle",children:"Delete"})})]}),width:150}];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.z,{title:"Orders",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/orders",breadcrumbName:"Orders"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,b.jsx)(O.rQ,{className:"p-3  ",children:(0,b.jsx)(d.A,{gutter:16,children:(0,b.jsx)(c.A,{sm:24,xs:24,lg:24,className:"",children:(0,b.jsx)(w.C,{title:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{children:(0,b.jsx)(u.A,{style:{width:120},size:"middle",placeholder:"Status",onChange:e=>{g(e)},options:[{value:"",label:"All"},{value:"room_allocated",label:"Room Allocated"},{value:"confirmed",label:"Confirmed"},{value:"canceled",label:"Cancelled"},{value:"cancel_request",label:"Cancel Requested"},{value:"completed",label:"Completed"},{value:"payment_pending",label:"Payment Pending"}]})}),(0,b.jsx)("div",{children:(0,b.jsx)(I,{placeholder:"search",allowClear:!0,enterButton:"Search",size:"middle",onSearch:e=>{y(e)}})})]}),moreBtn:(0,b.jsx)(s.A,{type:"primary",onClick:()=>n(!0),children:"Add"}),children:(0,b.jsx)(m.A,{size:"small",scroll:{x:"100%",y:"auto"},columns:E,dataSource:e})})})})}),(0,b.jsx)(h.A,{title:r?"Add Order":"Edit Order",destroyOnClose:!0,open:r||p.isOpen,width:1024,footer:!1,onCancel:()=>{n(!1),v({isOpen:!1,orderId:null})},children:(0,b.jsx)(C,{setIsAddOrder:n,getAllOrder:N,isEditOrder:p,setIsEditOrder:v})})]})}},6157:(e,t,r)=>{r.d(t,{EO:()=>i,L_:()=>a,S0:()=>o,vZ:()=>n,xF:()=>s});var l=r(2170);const n=async e=>{let{body:t}=e;return await l.p.post("/roles",t)},a=async e=>{let{start:t,limit:r,RoleNumber:n,status:a}=e;return await l.p.get("/roles?start=".concat(t,"&limit=").concat(r))},s=async e=>{let{id:t}=e;return await l.p.get("/roles/".concat(t))},o=async e=>{let{id:t,body:r}=e;return await l.p.patch("/roles/".concat(t),r)},i=async e=>{let{id:t}=e;return await l.p.delete("/roles/".concat(t))}},6059:(e,t,r)=>{r.d(t,{A:()=>C});var l=r(8168),n=r(5544),a=r(1376),s=r(4600),o=r.n(s),i=r(8678),d=r(5001),c=r(5043),u=r(5296),m=r(6282),h=r(2701),p=r(1802),x=r(3085),v=r(8046),A=r(8097),y=r(8376),f=r(8986),j=function(e){var t=e.prefixCls,r=e.okButtonProps,n=e.cancelButtonProps,a=e.title,s=e.cancelText,o=e.okText,i=e.okType,d=e.icon,m=e.showCancel,h=void 0===m||m,j=e.close,b=e.onConfirm,g=e.onCancel,C=c.useContext(u.QO).getPrefixCls;return c.createElement(A.A,{componentName:"Popconfirm",defaultLocale:y.A.Popconfirm},(function(e){return c.createElement("div",{className:"".concat(t,"-inner-content")},c.createElement("div",{className:"".concat(t,"-message")},d&&c.createElement("span",{className:"".concat(t,"-message-icon")},d),c.createElement("div",{className:"".concat(t,"-message-title")},(0,f.b)(a))),c.createElement("div",{className:"".concat(t,"-buttons")},h&&c.createElement(p.A,(0,l.A)({onClick:g,size:"small"},n),null!==s&&void 0!==s?s:e.cancelText),c.createElement(v.A,{buttonProps:(0,l.A)((0,l.A)({size:"small"},(0,x.D)(i)),r),actionFn:b,close:j,prefixCls:C("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},null!==o&&void 0!==o?o:e.okText)))}))},b=void 0,g=function(e,t){var r={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(l=Object.getOwnPropertySymbols(e);n<l.length;n++)t.indexOf(l[n])<0&&Object.prototype.propertyIsEnumerable.call(e,l[n])&&(r[l[n]]=e[l[n]])}return r};const C=c.forwardRef((function(e,t){var r=e.prefixCls,s=e.placement,p=void 0===s?"top":s,x=e.trigger,v=void 0===x?"click":x,A=e.okType,y=void 0===A?"primary":A,f=e.icon,C=void 0===f?c.createElement(a.A,null):f,O=e.children,k=e.overlayClassName,w=e.onOpenChange,I=e.onVisibleChange,N=g(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),E=c.useContext(u.QO).getPrefixCls,S=(0,i.A)(!1,{value:void 0!==e.open?e.open:e.visible,defaultValue:void 0!==e.defaultOpen?e.defaultOpen:e.defaultVisible}),D=(0,n.A)(S,2),P=D[0],R=D[1],T=function(e,t){R(e,!0),null===I||void 0===I||I(e,t),null===w||void 0===w||w(e,t)},_=E("popover",r),q=E("popconfirm",r),z=o()(q,k);return c.createElement(m.A,(0,l.A)({},N,{trigger:v,prefixCls:_,placement:p,onOpenChange:function(t){var r=e.disabled;void 0!==r&&r||T(t)},open:P,ref:t,overlayClassName:z,_overlay:c.createElement(j,(0,l.A)({okType:y,icon:C},e,{prefixCls:_,close:function(e){T(!1,e)},onConfirm:function(t){var r;return null===(r=e.onConfirm)||void 0===r?void 0:r.call(b,t)},onCancel:function(t){var r;T(!1,t),null===(r=e.onCancel)||void 0===r||r.call(b,t)}}))}),(0,h.Ob)(O,{onKeyDown:function(e){var t,r;c.isValidElement(O)&&(null===(r=null===O||void 0===O?void 0:(t=O.props).onKeyDown)||void 0===r||r.call(t,e)),function(e){e.keyCode===d.A.ESC&&P&&T(!1,e)}(e)}}))}))}}]);
//# sourceMappingURL=582.fa1d4017.chunk.js.map