"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[900],{5900:(e,l,t)=>{t.r(l),t.d(l,{default:()=>L});var i=t(5043),s=t(1802),n=t(6059),d=t(9800),a=t(1645),o=t(2217),c=t(4435),r=t(9524),u=t(4406),m=t(289),v=t(8193),h=t(5397),x=t(6558),p=t(5256),j=t(4733),f=t(1402),A=t(6191),y=t(1966),g=t(3906),b=t.n(g),C=t(726),w=t.n(C),I=t(7975),k=t(2170);var N=t(579);const{Option:S}=u.A,O=e=>{let{setisAddCms:l,getAllData:t,setIsEditCms:n,isEditCms:c}=e;const[r,g]=(0,i.useState)([]),[C,O]=(0,i.useState)(""),[D,E]=(0,i.useState)(!1),[F,L]=(0,i.useState)(),[U,z]=(0,i.useState)(!1),[T,B]=(0,i.useState)(!1),[R,_]=(0,i.useState)(null);console.log("content1Output",R);const[H,V]=(0,i.useState)(null),[q]=m.A.useForm();return(0,i.useEffect)((()=>{null!==c&&void 0!==c&&c.cmsId&&(z(!0),(async e=>{let{id:l}=e;return await k.p.get("/cms/".concat(l))})({id:null===c||void 0===c?void 0:c.cmsId}).then((e=>{var l,t,i;q.setFieldsValue(null===e||void 0===e?void 0:e.data),_(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.content1),V(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.content2);const s=null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.images.map(((e,l)=>({id:l,name:e,prodUrl:"https://api.hotelvarunagrand.com/uploads/".concat(e)})));g(s),z(!1)})).catch((e=>{console.log("err",e),z(!1)})))}),[null===c||void 0===c?void 0:c.cmsId]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(h.A,{spinning:U,children:(0,N.jsx)("div",{children:(0,N.jsxs)(m.A,{name:"cms",form:q,layout:"vertical",onFinish:e=>{const i={title:null===e||void 0===e?void 0:e.title,type:null===e||void 0===e?void 0:e.type,images:r&&r.map((e=>null===e||void 0===e?void 0:e.name)),content1:R,content2:H};var s;null!==c&&void 0!==c&&c.cmsId?(async e=>{let{id:l,body:t}=e;return await k.p.put("/cms/".concat(l),t)})({id:null===c||void 0===c?void 0:c.cmsId,body:i}).then((e=>{n({isOpen:!1,cmsId:""}),t(),v.Ay.success("Data updated successfully")})).catch((e=>console.log("err",e))):null===(s=(async e=>{let{body:l}=e;return await k.p.post("/cms",l)})({body:i}))||void 0===s||s.then((e=>{l(!1),t(),v.Ay.success("Data added successfully")})).catch((e=>{console.log("err :>> ",e)}))},autoComplete:"off",children:[(0,N.jsxs)(d.A,{gutter:[16,0],children:[(0,N.jsx)(a.A,{xs:24,md:12,children:(0,N.jsx)(m.A.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Required! "}],children:(0,N.jsx)(x.A,{})})}),(0,N.jsx)(a.A,{xs:24,md:12,children:(0,N.jsx)(m.A.Item,{name:"type",label:"Type",children:(0,N.jsxs)(u.A,{placeholder:"Select option...",allowClear:!0,children:[(0,N.jsx)(S,{value:"Header-Banner",children:"Header-Banner"}),(0,N.jsx)(S,{value:"Footer",children:"Footer"}),(0,N.jsx)(S,{value:"Contact-Us",children:"Contact-Us"}),(0,N.jsx)(S,{value:"About-Us",children:"About-Us"})]})})}),(0,N.jsx)(a.A,{xs:24,md:12,children:(0,N.jsxs)(m.A.Item,{label:"Image",name:"image",children:[(0,N.jsx)(p.A,{onChange:e=>{B(!0);const l=new FormData;l.append("file",e.file.originFileObj),(0,I.V)(l).then((l=>{g((t=>{var i;return[...t,{id:e.file.uid,file:e.file.originFileObj,name:null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.name}]})),B(!1)})).catch((e=>{v.Ay.error("Error while uploading"),B(!1)}))},fileList:[],children:(0,N.jsx)(s.A,{className:"flex items-center",icon:(0,N.jsx)(j.A,{}),children:"Click to Upload"})}),(0,N.jsx)("div",{className:"w-full",style:{maxHeight:"230px",overflowY:"auto"},children:(null===r||void 0===r?void 0:r.length)>0&&(null===r||void 0===r?void 0:r.map((e=>{var l;return(0,N.jsxs)("div",{className:"flex border rounded-md justify-between items-center p-1 px-3 my-1",children:[(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("span",{className:"mr-2",children:(0,N.jsx)(f.A,{})}),null!==e&&void 0!==e&&e.file?null===e||void 0===e||null===(l=e.file)||void 0===l?void 0:l.name:null===e||void 0===e?void 0:e.name]}),(0,N.jsxs)("div",{className:"flex gap-3 text-base",children:[(0,N.jsx)("div",{className:"cursor-pointer",children:(0,N.jsx)("div",{onClick:()=>{(async e=>{var l;const t=e;O(null!==t&&void 0!==t&&t.prodUrl?null===t||void 0===t?void 0:t.prodUrl:URL.createObjectURL(null===t||void 0===t?void 0:t.file)),E(!0),L(null!==t&&void 0!==t&&t.file?null===t||void 0===t||null===(l=t.file)||void 0===l?void 0:l.name:null===t||void 0===t?void 0:t.name)})(e)},children:(0,N.jsx)(A.A,{})})}),(0,N.jsx)("div",{className:"cursor-pointer",children:(0,N.jsx)("div",{onClick:()=>{const l=null===r||void 0===r?void 0:r.filter((l=>{var t;return null!==l&&void 0!==l&&l.file?(null===l||void 0===l||null===(t=l.file)||void 0===t?void 0:t.uid)!==(null===e||void 0===e?void 0:e.id):(null===l||void 0===l?void 0:l.id)!==(null===e||void 0===e?void 0:e.id)}));g(l)},children:(0,N.jsx)(y.A,{style:{color:"red"}})})})]})]},null===e||void 0===e?void 0:e.id)})))})]})})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{children:"Content 1:"}),(0,N.jsx)(b(),{data:R,editor:w(),onChange:(e,l)=>{_(l.getData())}})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{children:"Content 2:"}),(0,N.jsx)(b(),{data:H,editor:w(),onChange:(e,l)=>{V(l.getData())}})]}),(0,N.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,N.jsx)(s.A,{onClick:()=>{l(!1),n({isOpen:!1,cmsId:""})},children:"Cancel"}),(0,N.jsx)(s.A,{type:"primary",htmlType:"submit",loading:T,children:"Submit"})]})]})})}),(0,N.jsx)(o.A,{width:410,title:F,open:D,footer:null,onCancel:()=>{E(!1),O("")},destroyOnClose:!0,children:(0,N.jsx)("img",{src:C||"",alt:C,style:{width:"400px"}})})]})};var D=t(925),E=t(1734),F=t(7043);const L=()=>{const[e,l]=(0,i.useState)(!1),[t,u]=(0,i.useState)({isOpen:!1,cmsId:""}),[m,v]=(0,i.useState)([]),h=[{title:"Type",dataIndex:"type",key:"type",width:140},{title:"Title",dataIndex:"title",key:"title",width:150},{title:"Action",key:"action",render:(e,l)=>(0,N.jsxs)(c.A,{size:"middle",children:[(0,N.jsx)(s.A,{size:"middle",onClick:()=>u({isOpen:!0,cmsId:null===l||void 0===l?void 0:l._id}),children:"Edit"}),(0,N.jsx)(n.A,{title:"Are you sure to delete this task?",onConfirm:()=>{(async e=>{let{id:l}=e;return await k.p.delete("/cms/".concat(l))})({id:null===l||void 0===l?void 0:l._id}).then((e=>{console.log("res",e),message.success("Deleted Successfully"),x()})).catch((e=>console.log("err",e)))},okText:"Yes",cancelText:"No",children:(0,N.jsx)(s.A,{danger:!0,size:"middle",children:"Delete"})})]}),width:150}],x=()=>{(async e=>{let{start:l,limit:t}=e;return await k.p.get("/cms?start=".concat(l,"&limit=").concat(t))})({}).then((e=>{var l;e&&v(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.data)})).catch((e=>console.log("err",e)))};return(0,i.useEffect)((()=>{x()}),[]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(E.z,{title:"Cms",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/cms",breadcrumbName:"Cms"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,N.jsx)(D.rQ,{className:"p-3",children:(0,N.jsx)(d.A,{gutter:16,children:(0,N.jsx)(a.A,{sm:24,xs:24,lg:24,className:"",children:(0,N.jsx)(F.C,{moreBtn:(0,N.jsx)(s.A,{type:"primary",onClick:()=>l(!0),children:"Add"}),border:!1,size:"default",children:(0,N.jsx)(r.A,{scroll:{x:"100%",y:"auto"},columns:h,dataSource:m})})})})}),(0,N.jsx)(o.A,{title:"".concat(e?"Add":"Edit"),destroyOnClose:!0,open:e||t.isOpen,width:1024,footer:!1,onCancel:()=>{l(!1),u({isOpen:!1,cmsId:""})},children:(0,N.jsx)(O,{setisAddCms:l,getAllData:x,isEditCms:t,setIsEditCms:u})})]})}},7975:(e,l,t)=>{t.d(l,{V:()=>s});var i=t(2170);const s=async e=>await i.p.post("/upload",e)},1402:(e,l,t)=>{t.d(l,{A:()=>o});var i=t(9379),s=t(5043);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"};var d=t(2172),a=function(e,l){return s.createElement(d.A,(0,i.A)((0,i.A)({},e),{},{ref:l,icon:n}))};a.displayName="LinkOutlined";const o=s.forwardRef(a)}}]);
//# sourceMappingURL=900.f0d5c0b5.chunk.js.map