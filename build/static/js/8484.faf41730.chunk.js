"use strict";(self.webpackChunkhexadash_tailwind=self.webpackChunkhexadash_tailwind||[]).push([[8484],{46913:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ce});var l=n(65043),r=n(37122),a=n(33307),s=n(47419),i=n(11645),o=n(94406),c=n(89421),d=n(69602),u=n(33946),m=n(58168),h=n(64467),p=n(5544),v=n(53727),f=n(64600),x=n.n(f),y=n(89379),A=n(44347),b=n(52664),g=n(7419),j=n(25001),C=n(48060);const _=l.createContext(null);const k=function(e){var t=e.prefixCls,n=e.className,r=e.style,a=e.children,s=e.containerRef,i=e.id,o={onMouseEnter:e.onMouseEnter,onMouseOver:e.onMouseOver,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp};return l.createElement(l.Fragment,null,l.createElement("div",(0,m.A)({id:i,className:x()("".concat(t,"-content"),n),style:(0,y.A)({},r),"aria-modal":"true",role:"dialog",ref:s},o),a))};var w=n(97907);function E(e){return"string"===typeof e&&String(Number(e))===e?((0,w.Ay)(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var N={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function S(e,t){var n,r,a,s,i=e.prefixCls,o=e.open,c=e.placement,d=e.inline,u=e.push,v=e.forceRender,f=e.autoFocus,A=e.keyboard,b=e.rootClassName,w=e.rootStyle,S=e.zIndex,I=e.className,P=e.id,O=e.style,K=e.motion,T=e.width,D=e.height,M=e.children,F=e.contentWrapperStyle,R=e.mask,V=e.maskClosable,z=e.maskMotion,L=e.maskClassName,q=e.maskStyle,U=e.afterOpenChange,W=e.onClose,B=e.onMouseEnter,H=e.onMouseOver,Q=e.onMouseLeave,G=e.onClick,J=e.onKeyDown,X=e.onKeyUp,Y=l.useRef(),Z=l.useRef(),$=l.useRef();l.useImperativeHandle(t,(function(){return Y.current}));l.useEffect((function(){var e;o&&f&&(null===(e=Y.current)||void 0===e||e.focus({preventScroll:!0}))}),[o]);var ee=l.useState(!1),te=(0,p.A)(ee,2),ne=te[0],le=te[1],re=l.useContext(_),ae=null!==(n=null!==(r=null===(a=!1===u?{distance:0}:!0===u?{}:u||{})||void 0===a?void 0:a.distance)&&void 0!==r?r:null===re||void 0===re?void 0:re.pushDistance)&&void 0!==n?n:180,se=l.useMemo((function(){return{pushDistance:ae,push:function(){le(!0)},pull:function(){le(!1)}}}),[ae]);l.useEffect((function(){var e,t;o?null===re||void 0===re||null===(e=re.push)||void 0===e||e.call(re):null===re||void 0===re||null===(t=re.pull)||void 0===t||t.call(re)}),[o]),l.useEffect((function(){return function(){var e;null===re||void 0===re||null===(e=re.pull)||void 0===e||e.call(re)}}),[]);var ie=R&&l.createElement(g.Ay,(0,m.A)({key:"mask"},z,{visible:o}),(function(e,t){var n=e.className,r=e.style;return l.createElement("div",{className:x()("".concat(i,"-mask"),n,L),style:(0,y.A)((0,y.A)({},r),q),onClick:V&&o?W:void 0,ref:t})})),oe="function"===typeof K?K(c):K,ce={};if(ne&&ae)switch(c){case"top":ce.transform="translateY(".concat(ae,"px)");break;case"bottom":ce.transform="translateY(".concat(-ae,"px)");break;case"left":ce.transform="translateX(".concat(ae,"px)");break;default:ce.transform="translateX(".concat(-ae,"px)")}"left"===c||"right"===c?ce.width=E(T):ce.height=E(D);var de={onMouseEnter:B,onMouseOver:H,onMouseLeave:Q,onClick:G,onKeyDown:J,onKeyUp:X},ue=l.createElement(g.Ay,(0,m.A)({key:"panel"},oe,{visible:o,forceRender:v,onVisibleChanged:function(e){null===U||void 0===U||U(e)},removeOnLeave:!1,leavedClassName:"".concat(i,"-content-wrapper-hidden")}),(function(t,n){var r=t.className,a=t.style;return l.createElement("div",(0,m.A)({className:x()("".concat(i,"-content-wrapper"),r),style:(0,y.A)((0,y.A)((0,y.A)({},ce),a),F)},(0,C.A)(e,{data:!0})),l.createElement(k,(0,m.A)({id:P,containerRef:n,prefixCls:i,className:I,style:O},de),M))})),me=(0,y.A)({},w);return S&&(me.zIndex=S),l.createElement(_.Provider,{value:se},l.createElement("div",{className:x()(i,"".concat(i,"-").concat(c),b,(s={},(0,h.A)(s,"".concat(i,"-open"),o),(0,h.A)(s,"".concat(i,"-inline"),d),s)),style:me,tabIndex:-1,ref:Y,onKeyDown:function(e){var t=e.keyCode,n=e.shiftKey;switch(t){case j.A.TAB:var l;if(t===j.A.TAB)if(n||document.activeElement!==$.current){if(n&&document.activeElement===Z.current){var r;null===(r=$.current)||void 0===r||r.focus({preventScroll:!0})}}else null===(l=Z.current)||void 0===l||l.focus({preventScroll:!0});break;case j.A.ESC:W&&A&&(e.stopPropagation(),W(e))}}},ie,l.createElement("div",{tabIndex:0,ref:Z,style:N,"aria-hidden":"true","data-sentinel":"start"}),ue,l.createElement("div",{tabIndex:0,ref:$,style:N,"aria-hidden":"true","data-sentinel":"end"})))}const I=l.forwardRef(S);const P=function(e){var t=e.open,n=void 0!==t&&t,r=e.prefixCls,a=void 0===r?"rc-drawer":r,s=e.placement,i=void 0===s?"right":s,o=e.autoFocus,c=void 0===o||o,d=e.keyboard,u=void 0===d||d,m=e.width,h=void 0===m?378:m,v=e.mask,f=void 0===v||v,x=e.maskClosable,g=void 0===x||x,j=e.getContainer,C=e.forceRender,_=e.afterOpenChange,k=e.destroyOnClose,w=e.onMouseEnter,E=e.onMouseOver,N=e.onMouseLeave,S=e.onClick,P=e.onKeyDown,O=e.onKeyUp,K=l.useState(!1),T=(0,p.A)(K,2),D=T[0],M=T[1];var F=l.useState(!1),R=(0,p.A)(F,2),V=R[0],z=R[1];(0,b.A)((function(){z(!0)}),[]);var L=!!V&&n,q=l.useRef(),U=l.useRef();(0,b.A)((function(){L&&(U.current=document.activeElement)}),[L]);if(!C&&!D&&!L&&k)return null;var W={onMouseEnter:w,onMouseOver:E,onMouseLeave:N,onClick:S,onKeyDown:P,onKeyUp:O},B=(0,y.A)((0,y.A)({},e),{},{open:L,prefixCls:a,placement:i,autoFocus:c,keyboard:u,width:h,mask:f,maskClosable:g,inline:!1===j,afterOpenChange:function(e){var t,n;(M(e),null===_||void 0===_||_(e),e||!U.current||(null===(t=q.current)||void 0===t?void 0:t.contains(U.current)))||(null===(n=U.current)||void 0===n||n.focus({preventScroll:!0}))},ref:q},W);return l.createElement(A.A,{open:L||C||D,autoDestroy:!1,getContainer:j,autoLock:f&&(L||D)},l.createElement(I,B))};var O=n(35296),K=n(16436),T=n(83290),D=n(29592),M=n(45132),F=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]])}return n},R=((0,D.P)("default","large"),{distance:180});const V=function(e){var t=e.width,n=e.height,r=e.size,a=void 0===r?"default":r,s=e.closable,i=void 0===s||s,o=e.mask,c=void 0===o||o,d=e.push,u=void 0===d?R:d,f=e.closeIcon,y=void 0===f?l.createElement(v.A,null):f,A=e.bodyStyle,b=e.drawerStyle,g=e.className,j=e.visible,C=e.open,_=e.children,k=e.style,w=e.title,E=e.headerStyle,N=e.onClose,S=e.footer,I=e.footerStyle,D=e.prefixCls,V=e.getContainer,z=e.extra,L=e.afterVisibleChange,q=e.afterOpenChange,U=F(e,["width","height","size","closable","mask","push","closeIcon","bodyStyle","drawerStyle","className","visible","open","children","style","title","headerStyle","onClose","footer","footerStyle","prefixCls","getContainer","extra","afterVisibleChange","afterOpenChange"]),W=l.useContext(O.QO),B=W.getPopupContainer,H=W.getPrefixCls,Q=W.direction,G=H("drawer",D),J=void 0===V&&B?function(){return B(document.body)}:V,X=i&&l.createElement("button",{type:"button",onClick:N,"aria-label":"Close",className:"".concat(G,"-close")},y);[["visible","open"],["afterVisibleChange","afterOpenChange"]].forEach((function(e){var t=(0,p.A)(e,2);t[0],t[1]}));var Y=x()((0,h.A)({"no-mask":!c},"".concat(G,"-rtl"),"rtl"===Q),g),Z=l.useMemo((function(){return null!==t&&void 0!==t?t:"large"===a?736:378}),[t,a]),$=l.useMemo((function(){return null!==n&&void 0!==n?n:"large"===a?736:378}),[n,a]),ee={motionName:(0,T.by)(G,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500};return l.createElement(M.K6,null,l.createElement(K.XB,{status:!0,override:!0},l.createElement(P,(0,m.A)({prefixCls:G,onClose:N},U,{open:null!==C&&void 0!==C?C:j,mask:c,push:u,width:Z,height:$,rootClassName:Y,getContainer:J,afterOpenChange:function(e){null===q||void 0===q||q(e),null===L||void 0===L||L(e)},maskMotion:ee,motion:function(e){return{motionName:(0,T.by)(G,"panel-motion-".concat(e)),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500}},rootStyle:k}),l.createElement("div",{className:"".concat(G,"-wrapper-body"),style:(0,m.A)({},b)},w||i?l.createElement("div",{className:x()("".concat(G,"-header"),(0,h.A)({},"".concat(G,"-header-close-only"),i&&!w&&!z)),style:E},l.createElement("div",{className:"".concat(G,"-header-title")},X,w&&l.createElement("div",{className:"".concat(G,"-title")},w)),z&&l.createElement("div",{className:"".concat(G,"-extra")},z)):null,l.createElement("div",{className:"".concat(G,"-body"),style:A},_),function(){if(!S)return null;var e="".concat(G,"-footer");return l.createElement("div",{className:e,style:I},S)}()))))};var z=n(50289),L=n(48193),q=n(5397),U=n(3428),W=n(28440),B=n(61966),H=n(2543),Q=n(70579);const{Option:G}=o.A,J=e=>{let{setisAddCms:t,getAllData:n,setIsEditCms:r,isEditCms:d,currentStore:u,setNewRecord:m,newRecord:h}=e;const[p,v]=(0,l.useState)(!1),[f]=z.A.useForm();return(0,l.useEffect)((()=>{null!==d&&void 0!==d&&d.cmsId&&(v(!0),(0,H.W8)({id:null===d||void 0===d?void 0:d.cmsId}).then((e=>{f.setFieldsValue({tables:[null===e||void 0===e?void 0:e.data]}),v(!1)})).catch((e=>{console.log("err",e),v(!1)})))}),[null===d||void 0===d?void 0:d.cmsId]),(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsx)(q.A,{spinning:p,children:(0,Q.jsx)("div",{children:(0,Q.jsxs)(z.A,{form:f,layout:"vertical",onFinish:e=>{const n=e.tables.map((e=>({...e,store_id:u})));if(null!==d&&void 0!==d&&d.cmsId){var l,a,s;let e={no_of_seats:null===(l=n[0])||void 0===l?void 0:l.no_of_seats,status:null===(a=n[0])||void 0===a?void 0:a.status,table_number:null===(s=n[0])||void 0===s?void 0:s.table_number};(0,H.FM)({id:null===d||void 0===d?void 0:d.cmsId,body:e}).then((e=>{r({isOpen:!1,cmsId:""}),m(h+1),L.Ay.success("Data updated successfully")})).catch((e=>console.log("err",e)))}else{var i;null===(i=(0,H.zF)({body:n}))||void 0===i||i.then((e=>{t(!1),m(h+1),L.Ay.success("Tables added successfully")})).catch((e=>{console.log("err :>> ",e)}))}},initialValues:{tables:[{status:"available"}]},children:[(0,Q.jsx)(z.A.List,{name:"tables",children:(e,t)=>{let{add:n,remove:l}=t;return(0,Q.jsxs)(Q.Fragment,{children:[e.map(((t,n)=>(0,Q.jsx)("div",{style:{marginBottom:20},children:(0,Q.jsxs)(s.A,{gutter:16,align:"middle",children:[(0,Q.jsx)(i.A,{xs:24,sm:24,md:24,lg:8,children:(0,Q.jsx)(z.A.Item,{...t,label:"Table Number",name:[t.name,"table_number"],fieldKey:[t.fieldKey,"table_number"],rules:[{type:"string",message:"Table number must be a string."}],children:(0,Q.jsx)(a.A,{placeholder:"Enter table number"})})}),(0,Q.jsx)(i.A,{xs:24,sm:24,md:24,lg:8,children:(0,Q.jsx)(z.A.Item,{...t,label:"Number of Seats",name:[t.name,"no_of_seats"],fieldKey:[t.fieldKey,"no_of_seats"],rules:[{required:!0,message:"Please enter the number of seats."},{type:"number",min:1,message:"Number of seats must be at least 1."}],children:(0,Q.jsx)(U.A,{min:1,placeholder:"Enter number of seats",style:{width:"100%"}})})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:12,lg:6,children:(0,Q.jsx)(z.A.Item,{...t,label:"Status",name:[t.name,"status"],fieldKey:[t.fieldKey,"status"],rules:[{required:!0,message:"Please select the status."}],children:(0,Q.jsxs)(o.A,{placeholder:"Select status",children:[(0,Q.jsx)(G,{value:"available",children:"Available"}),(0,Q.jsx)(G,{value:"booked",children:"Booked"}),(0,Q.jsx)(G,{value:"service",children:"Service"}),(0,Q.jsx)(G,{value:"preparing",children:"Preparing"})]})})}),(0,Q.jsx)(i.A,{span:2,children:e.length>1&&(0,Q.jsx)(B.A,{onClick:()=>l(t.name),style:{fontSize:"20px",color:"#ff4d4f",cursor:"pointer",marginTop:"30px"}})})]})},t.key))),!(null!==d&&void 0!==d&&d.cmsId)&&(0,Q.jsx)(z.A.Item,{children:(0,Q.jsx)(c.A,{type:"dashed",onClick:()=>n(),style:{width:"60%"},block:!0,children:"Add Another Table"})})]})}}),(0,Q.jsxs)(z.A.Item,{style:{textAlign:"right"},children:[(0,Q.jsx)(c.A,{onClick:()=>t(!1),style:{marginRight:8},children:"Cancel"}),(0,Q.jsx)(c.A,{type:"primary",htmlType:"submit",style:{marginRight:8},children:"Submit"}),(0,Q.jsx)(W.A,{title:"Are you sure to delete this Table?",onConfirm:()=>{},okText:"Yes",cancelText:"No",children:(0,Q.jsx)(c.A,{type:"danger",onClick:()=>{},children:"Delete"})})]})]})})})})};var X=n(9254);const Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var Z=n(22172),$=function(e,t){return l.createElement(Z.A,(0,y.A)((0,y.A)({},e),{},{ref:t,icon:Y}))};$.displayName="PlusCircleOutlined";const ee=l.forwardRef($);var te=n(88655),ne=n(94786),le=n(45904),re=n(65239),ae=n.n(re),se=(n(89680),n(53815)),ie=n(47807),oe=n(19662),ce=n(70495);const{Option:de}=o.A,ue=e=>{let{tableData:t,setVisible:n,visible:d,currentStore:u,allCms:m,setAllCms:h}=e;const[p,v]=(0,l.useState)(!1),[f,x]=(0,l.useState)([]),[y,A]=(0,l.useState)(!1),[b,g]=(0,l.useState)({}),[j,C]=(0,l.useState)(""),[_,k]=(0,l.useState)([]),[w,E]=(0,r.fp)(ce.Zr),[N,S]=(0,l.useState)({orderNumber:"",tableNumber:"",items:[],subtotal:0,tax:0,total:0}),[I]=z.A.useForm(),P=(e,n)=>{let l=m.map((l=>l.id===t.id?(l.status=n,l.current_order=e,l):l));h(l)};(0,l.useEffect)((()=>{(0,ie.hV)({search:j}).then((e=>{x(e.data.rows)})).catch((e=>{L.Ay.error("Error While Fetching Items")}))}),[I,j]),(0,l.useEffect)((()=>{k([]),A(!1),S({orderNumber:"",tableNumber:"",items:[],subtotal:0,tax:0,total:0})}),[d]);const O=async e=>{v(!0),(0,se.W8)({id:e}).then((e=>{var n;I.setFieldsValue(null===e||void 0===e?void 0:e.data),I.setFieldValue("tax_precent",null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.tax_precent);let l=null===e||void 0===e?void 0:e.data,r={orderNumber:l.id,customer_name:l.customer_name,customer_phone:l.customer_phone,tableNumber:t.table_number,items:l.order_items,subtotal:l.total_price||0,tax:l.tax_precent||0,total:l.total_price||0,organisation:l.Organisation,store:l.Store,user:l.User};S(r),v(!1)})).catch((e=>{var t;L.Ay.error((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Something Went Wrong"),console.log("err",e),v(!1)}))};(0,l.useEffect)((()=>{d&&(I.resetFields(),I.setFieldsValue({table_id:t.id}),t.current_order&&O(t.current_order))}),[I,d]);const K=()=>{var e;let t=I.getFieldsValue(["order_items"]),n=0;null===t||void 0===t||null===(e=t.order_items)||void 0===e||e.map((e=>{let t=Number(null===e||void 0===e?void 0:e.price)*Number(null===e||void 0===e?void 0:e.quantity);n+=t}));const l=I.getFieldsValue(),{tax_precent:r,discount_precent:a}=l;n+=.01*r*n,n-=.01*a*n,I.setFieldValue("total_price",n)},T=()=>{const e=I.getFieldValue("select_item"),t=I.getFieldValue("select_item_quantity"),n=f.find((t=>t.id===e));if(n){const e=I.getFieldsValue(["order_items"]).order_items||[],l=e.findIndex((e=>e.item_id===n.id));-1!==l?e[l].quantity+=t||1:e.push({item_id:n.id,item_name:n.name,price:n.price,quantity:t||1}),I.setFieldsValue({order_items:[...e]}),I.setFieldsValue({select_item_name:null,select_item_price:null,select_item_quantity:null,select_item:null}),K()}};return(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsx)(q.A,{spinning:p,children:(0,Q.jsx)("div",{children:(0,Q.jsxs)(z.A,{name:"order",form:I,layout:"vertical",onChange:K,onFinish:e=>{const l=e;var r;(l.table_id=l.table_id.toString(),delete l.select_item,delete l.select_item_name,delete l.select_item_price,delete l.select_item_quantity,t.current_order)?(l.order_items=[...l.order_items,..._],(0,se.FM)({id:t.current_order,body:l}).then((e=>{let n="paid"===l.status?"available":"booked",r="paid"===l.status?null:t.current_order;P(r,n),L.Ay.success("Data updated successfully")})).catch((e=>{L.Ay.error("Something Went Wrong"),console.log("err :>> ",e)}))):(l.store_id=u,null===(r=(0,se.zF)({body:l}))||void 0===r||r.then((e=>{var t;let r="paid"===l.status?null:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id,a="paid"===l.status?"available":"booked";P(r,a),L.Ay.success("Data added successfully"),n(!1)})).catch((e=>{L.Ay.error("Something Went Wrong"),console.log("err :>> ",e)})))},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},autoComplete:"off",children:[(0,Q.jsx)("div",{style:{padding:0},children:(0,Q.jsxs)(s.A,{gutter:16,children:[(0,Q.jsx)(i.A,{span:8,children:(0,Q.jsx)(z.A.Item,{label:"Table",name:"table_id",rules:[{required:!0,message:"Please select the table ID"}],children:(0,Q.jsx)(o.A,{children:(0,Q.jsxs)(de,{value:t.id,children:[t.table_number," - "," ("+t.no_of_seats+" Seater )"]})})})}),(0,Q.jsx)(i.A,{span:8,children:(0,Q.jsx)(z.A.Item,{label:"Customer Name",name:"customer_name",children:(0,Q.jsx)(a.A,{placeholder:"Enter customer name"})})}),(0,Q.jsx)(i.A,{span:8,children:(0,Q.jsx)(z.A.Item,{label:"Customer Phone",name:"customer_phone",children:(0,Q.jsx)(a.A,{placeholder:"Enter phone number"})})})]})}),(0,Q.jsx)("div",{children:(0,Q.jsxs)(s.A,{gutter:16,align:"middle",onKeyDown:e=>{console.log(e.key),"Enter"===e.key&&T()},children:[(0,Q.jsx)(i.A,{xs:12,sm:12,md:7,children:(0,Q.jsx)(z.A.Item,{label:"Select Item",name:"select_item",children:(0,Q.jsx)(X.A,{onSearch:e=>C(e),onSelect:e=>{const t=f.find((t=>t.id===e));I.setFieldsValue({select_item_name:t.name,select_item_price:t.price,select_item_quantity:1})},options:f.map((e=>({value:e.id,label:"".concat(e.name," - ").concat(e.item_code)})))})})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:7,children:(0,Q.jsx)(z.A.Item,{label:"Name",name:"select_item_name",children:(0,Q.jsx)(a.A,{})})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:4,children:(0,Q.jsx)(z.A.Item,{label:"Quantity",name:"select_item_quantity",children:(0,Q.jsx)(U.A,{min:0,precision:0,defaultValue:1,style:{width:"100%"},placeholder:"Quantity"})})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:4,children:(0,Q.jsx)(z.A.Item,{label:"Price",name:"select_item_price",children:(0,Q.jsx)(U.A,{min:0,precision:0,defaultValue:1,style:{width:"100%"},placeholder:"Price"})})}),(0,Q.jsx)(i.A,{span:2,children:(0,Q.jsx)(ee,{style:{fontSize:"30px",marginTop:"25px",color:"green"},onClick:T})})]})}),(0,Q.jsxs)("div",{children:[(0,Q.jsxs)("div",{style:{marginBottom:"10px",color:"black"},children:[(0,Q.jsxs)(s.A,{gutter:8,align:"middle",children:[" ",(0,Q.jsx)(i.A,{xs:12,sm:12,md:4,children:(0,Q.jsx)("span",{children:"Item Code"})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:10,children:(0,Q.jsx)("span",{children:"Item Name"})}),(0,Q.jsx)(i.A,{xs:8,sm:12,md:4,children:(0,Q.jsx)("span",{children:"Quantity"})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:4,children:(0,Q.jsx)("span",{children:"Unit Price"})}),(0,Q.jsx)(i.A,{span:2,children:(0,Q.jsx)("span",{children:"Action"})})]}),(0,Q.jsx)("hr",{style:{borderColor:"#e8e8e8",marginTop:"10px"}})," "]}),(0,Q.jsx)(z.A.List,{name:"order_items",children:(e,n)=>{let{remove:l}=n;return(0,Q.jsx)(Q.Fragment,{children:e.map((e=>{let{key:n,name:r,fieldKey:o,...c}=e;return(0,Q.jsx)("div",{children:(0,Q.jsxs)(s.A,{gutter:16,align:"middle",children:[(0,Q.jsx)(i.A,{xs:12,sm:12,md:4,children:(0,Q.jsx)(z.A.Item,{...c,name:[r,"item_id"],fieldKey:[o,"item_id"],rules:[{required:!0,message:"Please select items"}],children:(0,Q.jsx)(a.A,{})})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:10,children:(0,Q.jsx)(z.A.Item,{...c,name:[r,"item_name"],fieldKey:[o,"item_name"],rules:[{required:!0,message:"Please enter the item name"}],children:(0,Q.jsx)(a.A,{})})}),(0,Q.jsx)(i.A,{xs:8,sm:12,md:4,children:(0,Q.jsx)(z.A.Item,{...c,name:[r,"quantity"],fieldKey:[o,"quantity"],rules:[{required:!0,message:"Please enter the quantity"}],children:(0,Q.jsx)(U.A,{min:0,style:{width:"100%"}})})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:4,children:(0,Q.jsx)(z.A.Item,{...c,name:[r,"price"],fieldKey:[o,"price"],rules:[{required:!0,message:"Please enter the price"}],children:(0,Q.jsx)(U.A,{min:0,precision:2,style:{width:"100%"},disabled:!0})})}),(0,Q.jsx)(i.A,{span:2,children:(0,Q.jsx)(te.A,{onClick:()=>{const e=I.getFieldValue("order_items")[r];if(l(r),t.current_order){let t=_;t.push({...e,deleted:!0}),k(t)}K()},style:{fontSize:"30px",marginTop:"0px",color:"red"}})})]})},n)}))})}})]}),(0,Q.jsxs)("div",{children:[(0,Q.jsxs)(s.A,{gutter:16,children:[(0,Q.jsx)(i.A,{xs:12,sm:12,md:8,children:(0,Q.jsx)(z.A.Item,{label:"Total Price",name:"total_price",rules:[{required:!0,message:"Please enter the total price"}],children:(0,Q.jsx)(U.A,{min:0,precision:2,style:{width:"100%"},placeholder:"Total price"})})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:8,children:(0,Q.jsx)(z.A.Item,{label:"Discount Percent",name:"discount_precent",initialValue:w.discount||0,children:(0,Q.jsx)(U.A,{min:0,max:100,precision:2,style:{width:"100%"},placeholder:"Discount (%)"})})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:8,children:(0,Q.jsx)(z.A.Item,{label:"GST",name:"tax_precent",initialValue:w.gst||0,children:(0,Q.jsx)(U.A,{min:0,max:100,precision:2,style:{width:"100%"},placeholder:"GST (%)"})})})]}),(0,Q.jsxs)(s.A,{gutter:16,children:[(0,Q.jsx)(i.A,{xs:12,sm:12,md:8,children:(0,Q.jsx)(z.A.Item,{label:"Order Status",name:"status",initialValue:"pending",children:(0,Q.jsxs)(o.A,{children:[(0,Q.jsx)(de,{value:"pending",children:"Pending"}),(0,Q.jsx)(de,{value:"preparing",children:"Preparing"}),(0,Q.jsx)(de,{value:"served",children:"Served"}),(0,Q.jsx)(de,{value:"paid",children:"Paid"}),(0,Q.jsx)(de,{value:"canceled",children:"Canceled"})]})})}),(0,Q.jsx)(i.A,{xs:12,sm:12,md:16,style:{display:"flex",alignItems:"center",justifyContent:"left"},children:(0,Q.jsxs)("div",{style:{textAlign:"left"},children:[(0,Q.jsx)(ne.A,{style:{fontSize:"18px",color:"#000",marginRight:"4px"}}),(0,Q.jsx)("a",{style:{color:"#000"},children:"Tip: Change the status to 'Paid' to free the table.."})]})})]}),(0,Q.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,Q.jsx)(c.A,{htmlType:"button",onClick:()=>{n(!1)},children:"Cancel"}),(0,Q.jsx)(c.A,{onClick:async()=>{try{if(v(!0),!t.current_order)return L.Ay.warning("Please save the order first"),void v(!1);await O(t.current_order);const e=await(0,oe.J)(N),n=document.createElement("div");n.style.position="absolute",document.body.appendChild(n),n.innerHTML=e,ae()(n).then((e=>{const t=e.toDataURL("image/png"),l=80*e.height/e.width,r=new le.Ay("p","mm",[80,l]);r.addImage(t,"PNG",0,0,80,l);const a=r.output("blob"),s=URL.createObjectURL(a);printJS({printable:s,type:"pdf",documentTitle:"Order Bill"}),document.body.removeChild(n)})),v(!1)}catch(e){v(!1),L.Ay.warning("Something went wrong."),console.log(e)}},htmlType:"button",children:"Print"}),(0,Q.jsx)(c.A,{onClick:async()=>{try{if(v(!0),!t.current_order)return L.Ay.warning("Please save the order first"),void v(!1);await O(t.current_order);const e=await(0,oe.W)(N),n=document.createElement("div");n.style.position="absolute",document.body.appendChild(n),n.innerHTML=e,ae()(n).then((e=>{const t=e.toDataURL("image/png"),l=80*e.height/e.width,r=new le.Ay("p","mm",[80,l>80?l:80]);r.addImage(t,"PNG",0,0,80,l>80?l:80);const a=r.output("blob"),s=URL.createObjectURL(a);printJS({printable:s,type:"pdf",documentTitle:"Order Bill"}),document.body.removeChild(n)})),v(!1)}catch(e){v(!1),L.Ay.warning("Something went wrong."),console.log(e)}},htmlType:"button",children:"Print Kot"}),(0,Q.jsx)(c.A,{type:"primary",htmlType:"submit",loading:p,children:"Submit"})]})]})]})})})})};var me=n(77047),he=n(1068),pe=n(26655);const{Text:ve,Title:fe}=me.A,{Panel:xe}=he.A,ye=e=>{let{allData:t,setIsEditCms:n,setTableData:l,setVisible:r}=e;return(0,Q.jsx)("div",{style:{padding:"1px"},children:(0,Q.jsx)(s.A,{gutter:[16,16],style:{display:"flex",flexWrap:"wrap"},children:t.map((e=>(0,Q.jsx)(i.A,{children:(0,Q.jsx)(Q.Fragment,{children:(0,Q.jsx)(pe.A,{id:e.id,className:"table-box",onClick:()=>{r(!0),l(e)},hoverable:!0,style:{textAlign:"center",height:"80px",minWidth:"80px",display:"flex",alignItems:"center",justifyContent:"center",...e.current_order&&{backgroundColor:"rgb(125 107 144)",color:"white"}},children:"T-"+e.table_number})})})))})})};var Ae=n(40925),be=n(91734),ge=n(34572);const{Search:je}=a.A,Ce=()=>{const[e,t]=(0,l.useState)(!1),[n,a]=(0,l.useState)(0),[m,h]=(0,l.useState)(""),[p,v]=(0,l.useState)(""),[f,x]=(0,r.fp)(ce.qt),[y,A]=(0,r.fp)(ce.oc),[b,g]=(0,l.useState)(!1),[j,C]=(0,l.useState)(0),[_,k]=(0,l.useState)(0),[w,E]=(0,l.useState)(!1),[N,S]=(0,l.useState)({isOpen:!1,cmsId:""}),[I,P]=(0,l.useState)([]),O=e=>{let{search:t,type:l,isAvailable:r}=e;(0,H.xH)({start:n,limit:50,search:t,type:l,isAvailable:r,store_id:f}).then((e=>{var t,n;e&&(P(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows),k(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.count))})).catch((e=>console.log("err",e)))};(0,l.useEffect)((()=>{O({search:m,type:p,isAvailable:b})}),[m,p,b,f,j,n]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(be.z,{title:"Tables",routes:[{path:"/",breadcrumbName:"Dashboard"},{path:"/tables",breadcrumbName:"Tables"}],className:"flex items-center justify-between px-8 xl:px-[15px] pt-2 pb-6 sm:pb-[30px] bg-transparent sm:flex-col"}),(0,Q.jsx)(Ae.rQ,{className:"p-3",children:(0,Q.jsx)(s.A,{gutter:16,children:(0,Q.jsx)(i.A,{sm:24,xs:24,lg:24,className:"",children:(0,Q.jsxs)(ge.C,{title:(0,Q.jsx)("div",{children:(0,Q.jsxs)(s.A,{gutter:[16,16],align:"middle",children:[(0,Q.jsx)(i.A,{xs:24,sm:12,md:6,children:(0,Q.jsxs)(o.A,{style:{width:"100%"},size:"medium",placeholder:"Status",onChange:e=>{v(e)},children:[(0,Q.jsx)(Option,{value:"",children:"All"}),(0,Q.jsx)(Option,{value:"booked",children:"Running"}),(0,Q.jsx)(Option,{value:"available",children:"Free"}),(0,Q.jsx)(Option,{value:"service",children:"Service"}),(0,Q.jsx)(Option,{value:"preparing",children:"Preparing"})]})}),(0,Q.jsx)(i.A,{xs:24,sm:8,md:6,children:(0,Q.jsx)(je,{placeholder:"Table number",allowClear:!0,enterButton:"Search",size:"medium",onSearch:e=>{h(e)},style:{width:"100%"}})})]})}),moreBtn:(0,Q.jsx)(c.A,{type:"primary",onClick:()=>t(!0),children:"Add"}),children:[(0,Q.jsx)(ye,{allData:I,setIsEditCms:S,setTableData:A,setVisible:E}),(0,Q.jsx)("div",{className:"mt-2 flex justify-end",children:(0,Q.jsx)(d.A,{pageSize:40,total:_,onChange:e=>{a(10*(e-1))},showSizeChanger:!1})})]})})})}),(0,Q.jsx)(u.A,{title:"".concat(e?"Add Tables":"Edit Table"),destroyOnClose:!0,open:e||N.isOpen,width:1024,footer:!1,onCancel:()=>{t(!1),S({isOpen:!1,cmsId:""})},children:(0,Q.jsx)(J,{setisAddCms:t,getAllData:O,isEditCms:N,setIsEditCms:S,currentStore:f,newRecord:j,setNewRecord:C})}),(0,Q.jsx)(V,{title:y.current_order?"Update Order #"+y.current_order:"Add Order",placement:"right",onClose:()=>{E(!1)},open:w,width:window.innerWidth<768?300:700,children:(0,Q.jsx)(ue,{setVisible:E,tableData:y,visible:w,allCms:I,setAllCms:P,currentStore:f})})]})}},61966:(e,t,n)=>{n.d(t,{A:()=>o});var l=n(89379),r=n(65043);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};var s=n(22172),i=function(e,t){return r.createElement(s.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:a}))};i.displayName="DeleteOutlined";const o=r.forwardRef(i)},1068:(e,t,n)=>{n.d(t,{A:()=>T});var l=n(58168),r=n(64467),a=n(99905),s=n(64600),i=n.n(s),o=n(60436),c=n(23029),d=n(92901),u=n(85501),m=n(88293),h=n(82284),p=n(62149),v=n(65043),f=n(17324),x=n.n(f),y=n(80045),A=n(7419),b=n(5544),g=v.forwardRef((function(e,t){var n,l=e.prefixCls,a=e.forceRender,s=e.className,o=e.style,c=e.children,d=e.isActive,u=e.role,m=v.useState(d||a),h=(0,b.A)(m,2),p=h[0],f=h[1];return v.useEffect((function(){(a||d)&&f(!0)}),[a,d]),p?v.createElement("div",{ref:t,className:i()("".concat(l,"-content"),(n={},(0,r.A)(n,"".concat(l,"-content-active"),d),(0,r.A)(n,"".concat(l,"-content-inactive"),!d),n),s),style:o,role:u},v.createElement("div",{className:"".concat(l,"-content-box")},c)):null}));g.displayName="PanelContent";const j=g;var C=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],_=function(e){(0,u.A)(n,e);var t=(0,m.A)(n);function n(){var e;(0,c.A)(this,n);for(var l=arguments.length,r=new Array(l),a=0;a<l;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).onItemClick=function(){var t=e.props,n=t.onItemClick,l=t.panelKey;"function"===typeof n&&n(l)},e.handleKeyPress=function(t){"Enter"!==t.key&&13!==t.keyCode&&13!==t.which||e.onItemClick()},e.renderIcon=function(){var t=e.props,n=t.showArrow,l=t.expandIcon,r=t.prefixCls,a=t.collapsible;if(!n)return null;var s="function"===typeof l?l(e.props):v.createElement("i",{className:"arrow"});return s&&v.createElement("div",{className:"".concat(r,"-expand-icon"),onClick:"header"===a||"icon"===a?e.onItemClick:null},s)},e.renderTitle=function(){var t=e.props,n=t.header,l=t.prefixCls,r=t.collapsible;return v.createElement("span",{className:"".concat(l,"-header-text"),onClick:"header"===r?e.onItemClick:null},n)},e}return(0,d.A)(n,[{key:"shouldComponentUpdate",value:function(e){return!x()(this.props,e)}},{key:"render",value:function(){var e,t,n=this.props,a=n.className,s=n.id,o=n.style,c=n.prefixCls,d=n.headerClass,u=n.children,m=n.isActive,h=n.destroyInactivePanel,p=n.accordion,f=n.forceRender,x=n.openMotion,b=n.extra,g=n.collapsible,_=(0,y.A)(n,C),k="disabled"===g,w="header"===g,E="icon"===g,N=i()((e={},(0,r.A)(e,"".concat(c,"-item"),!0),(0,r.A)(e,"".concat(c,"-item-active"),m),(0,r.A)(e,"".concat(c,"-item-disabled"),k),e),a),S={className:i()("".concat(c,"-header"),(t={},(0,r.A)(t,d,d),(0,r.A)(t,"".concat(c,"-header-collapsible-only"),w),(0,r.A)(t,"".concat(c,"-icon-collapsible-only"),E),t)),"aria-expanded":m,"aria-disabled":k,onKeyPress:this.handleKeyPress};w||E||(S.onClick=this.onItemClick,S.role=p?"tab":"button",S.tabIndex=k?-1:0);var I=null!==b&&void 0!==b&&"boolean"!==typeof b;return delete _.header,delete _.panelKey,delete _.onItemClick,delete _.showArrow,delete _.expandIcon,v.createElement("div",(0,l.A)({},_,{className:N,style:o,id:s}),v.createElement("div",S,this.renderIcon(),this.renderTitle(),I&&v.createElement("div",{className:"".concat(c,"-extra")},b)),v.createElement(A.Ay,(0,l.A)({visible:m,leavedClassName:"".concat(c,"-content-hidden")},x,{forceRender:f,removeOnLeave:h}),(function(e,t){var n=e.className,l=e.style;return v.createElement(j,{ref:t,prefixCls:c,className:n,style:l,isActive:m,forceRender:f,role:p?"tabpanel":null},u)})))}}]),n}(v.Component);_.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};const k=_;function w(e){var t=e;if(!Array.isArray(t)){var n=(0,h.A)(t);t="number"===n||"string"===n?[t]:[]}return t.map((function(e){return String(e)}))}var E=function(e){(0,u.A)(n,e);var t=(0,m.A)(n);function n(e){var l;(0,c.A)(this,n),(l=t.call(this,e)).onClickItem=function(e){var t=l.state.activeKey;if(l.props.accordion)t=t[0]===e?[]:[e];else{var n=(t=(0,o.A)(t)).indexOf(e);n>-1?t.splice(n,1):t.push(e)}l.setActiveKey(t)},l.getNewChild=function(e,t){if(!e)return null;var n=l.state.activeKey,r=l.props,a=r.prefixCls,s=r.openMotion,i=r.accordion,o=r.destroyInactivePanel,c=r.expandIcon,d=r.collapsible,u=e.key||String(t),m=e.props,h=m.header,p=m.headerClass,f=m.destroyInactivePanel,x=m.collapsible,y=null!==x&&void 0!==x?x:d,A={key:u,panelKey:u,header:h,headerClass:p,isActive:i?n[0]===u:n.indexOf(u)>-1,prefixCls:a,destroyInactivePanel:null!==f&&void 0!==f?f:o,openMotion:s,accordion:i,children:e.props.children,onItemClick:"disabled"===y?null:l.onClickItem,expandIcon:c,collapsible:y};return"string"===typeof e.type?e:(Object.keys(A).forEach((function(e){"undefined"===typeof A[e]&&delete A[e]})),v.cloneElement(e,A))},l.getItems=function(){var e=l.props.children;return(0,p.A)(e).map(l.getNewChild)},l.setActiveKey=function(e){"activeKey"in l.props||l.setState({activeKey:e}),l.props.onChange(l.props.accordion?e[0]:e)};var r=e.activeKey,a=e.defaultActiveKey;return"activeKey"in e&&(a=r),l.state={activeKey:w(a)},l}return(0,d.A)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!x()(this.props,e)||!x()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,l=t.className,a=t.style,s=t.accordion,o=i()((e={},(0,r.A)(e,n,!0),(0,r.A)(e,l,!!l),e));return v.createElement("div",{className:o,style:a,role:s?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=w(e.activeKey)),t}}]),n}(v.Component);E.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},E.Panel=k;const N=E;E.Panel;var S=n(18574),I=n(35296),P=n(83290),O=n(12701);var K=function(e){var t,n=v.useContext(I.QO),s=n.getPrefixCls,o=n.direction,c=e.prefixCls,d=e.className,u=void 0===d?"":d,m=e.bordered,h=void 0===m||m,f=e.ghost,x=e.expandIconPosition,y=void 0===x?"start":x,A=s("collapse",c),b=v.useMemo((function(){return"left"===y?"start":"right"===y?"end":y}),[y]),g=i()("".concat(A,"-icon-position-").concat(b),(t={},(0,r.A)(t,"".concat(A,"-borderless"),!h),(0,r.A)(t,"".concat(A,"-rtl"),"rtl"===o),(0,r.A)(t,"".concat(A,"-ghost"),!!f),t),u),j=(0,l.A)((0,l.A)({},P.Ay),{motionAppear:!1,leavedClassName:"".concat(A,"-content-hidden")});return v.createElement(N,(0,l.A)({openMotion:j},e,{expandIcon:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.expandIcon,l=n?n(t):v.createElement(a.A,{rotate:t.isActive?90:void 0});return(0,O.Ob)(l,(function(){return{className:i()(l.props.className,"".concat(A,"-arrow"))}}))},prefixCls:A,className:g}),function(){var t=e.children;return(0,p.A)(t).map((function(e,t){var n;if(null===(n=e.props)||void 0===n?void 0:n.disabled){var r=e.key||String(t),a=e.props,s=a.disabled,i=a.collapsible,o=(0,l.A)((0,l.A)({},(0,S.A)(e.props,["disabled"])),{key:r,collapsible:null!==i&&void 0!==i?i:s?"disabled":void 0});return(0,O.Ob)(e,o)}return e}))}())};K.Panel=function(e){var t=v.useContext(I.QO).getPrefixCls,n=e.prefixCls,a=e.className,s=void 0===a?"":a,o=e.showArrow,c=void 0===o||o,d=t("collapse",n),u=i()((0,r.A)({},"".concat(d,"-no-arrow"),!c),s);return v.createElement(N.Panel,(0,l.A)({},e,{prefixCls:d,className:u}))};const T=K},79688:(e,t,n)=>{n.r(t),n.d(t,{Checkbox:()=>h,default:()=>p});var l=n(58168),r=n(89379),a=n(64467),s=n(5544),i=n(80045),o=n(64600),c=n.n(o),d=n(28678),u=n(65043),m=["prefixCls","className","style","checked","disabled","defaultChecked","type","onChange"],h=(0,u.forwardRef)((function(e,t){var n,o=e.prefixCls,h=void 0===o?"rc-checkbox":o,p=e.className,v=e.style,f=e.checked,x=e.disabled,y=e.defaultChecked,A=void 0!==y&&y,b=e.type,g=void 0===b?"checkbox":b,j=e.onChange,C=(0,i.A)(e,m),_=(0,u.useRef)(null),k=(0,d.A)(A,{value:f}),w=(0,s.A)(k,2),E=w[0],N=w[1];(0,u.useImperativeHandle)(t,(function(){return{focus:function(){var e;null===(e=_.current)||void 0===e||e.focus()},blur:function(){var e;null===(e=_.current)||void 0===e||e.blur()},input:_.current}}));var S=c()(h,p,(n={},(0,a.A)(n,"".concat(h,"-checked"),E),(0,a.A)(n,"".concat(h,"-disabled"),x),n));return u.createElement("span",{className:S,style:v},u.createElement("input",(0,l.A)({},C,{className:"".concat(h,"-input"),ref:_,onChange:function(t){x||("checked"in e||N(t.target.checked),null===j||void 0===j||j({target:(0,r.A)((0,r.A)({},e),{},{type:g,checked:t.target.checked}),stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()},nativeEvent:t.nativeEvent}))},disabled:x,checked:!!E,type:g})),u.createElement("span",{className:"".concat(h,"-inner")}))}));const p=h}}]);
//# sourceMappingURL=8484.faf41730.chunk.js.map